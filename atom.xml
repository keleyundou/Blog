<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ColaBean&#39;s Blog</title>
  <subtitle>è‹Ÿæœ‰æ’ä½•å¿…ä¸‰æ›´ç¡äº”æ›´èµ·ï¼Œæœ€æ— ç›Šè«è¿‡ä¸€æ—¥æ›åæ—¥å¯’ã€‚</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://keleyundou.github.io/"/>
  <updated>2018-06-13T17:06:09.666Z</updated>
  <id>http://keleyundou.github.io/</id>
  
  <author>
    <name>ColaBean</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>LLDBçš„ä½¿ç”¨</title>
    <link href="http://keleyundou.github.io/2018/06/14/LLDB%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <id>http://keleyundou.github.io/2018/06/14/LLDBçš„ä½¿ç”¨/</id>
    <published>2018-06-13T16:47:36.000Z</published>
    <updated>2018-06-13T17:06:09.666Z</updated>
    
    <content type="html"><![CDATA[<p>æ§åˆ¶å°æŸ¥çœ‹æ‰€æœ‰<code>LLDB</code>æŒ‡ä»¤ï¼Œå¯ä»¥ç”¨<code>$help</code></p>
<a id="more"></a>
<h3 id="æ–­ç‚¹"><a href="#æ–­ç‚¹" class="headerlink" title="æ–­ç‚¹"></a>æ–­ç‚¹</h3><h4 id="æ·»åŠ æ–­ç‚¹"><a href="#æ·»åŠ æ–­ç‚¹" class="headerlink" title="æ·»åŠ æ–­ç‚¹"></a>æ·»åŠ æ–­ç‚¹</h4><ul>
<li><p><code>$breakpoint set -n test</code></p>
</li>
<li><p><code>$breakpoint set -n &quot;[HomeHotViewController insertItems:isUp:]&quot;</code></p>
</li>
<li><p><code>b -n &quot;-[HomeViewController insertItems:isUp:]&quot;</code></p>
</li>
</ul>
<p>OCæ–¹æ³•éœ€åŠ åŒå¼•å·<code>&quot;[clasName method]&quot;</code></p>
<h4 id="æŸ¥çœ‹æ–­ç‚¹"><a href="#æŸ¥çœ‹æ–­ç‚¹" class="headerlink" title="æŸ¥çœ‹æ–­ç‚¹"></a>æŸ¥çœ‹æ–­ç‚¹</h4><ul>
<li><code>$breakpoint list</code></li>
</ul>
<h4 id="ç¦ç”¨ã€å¼€å¯æŸä¸ªæ–­ç‚¹"><a href="#ç¦ç”¨ã€å¼€å¯æŸä¸ªæ–­ç‚¹" class="headerlink" title="ç¦ç”¨ã€å¼€å¯æŸä¸ªæ–­ç‚¹"></a>ç¦ç”¨ã€å¼€å¯æŸä¸ªæ–­ç‚¹</h4><ul>
<li><p><code>$breakpoint disable/enable 7</code></p>
</li>
<li><p><code>$breakpoint disable/enable 7.1</code></p>
</li>
</ul>
<p>æ§åˆ¶å°æŸ¥çœ‹ç¦ç”¨æŸä¸ªæ–­ç‚¹åçš„ä¿¡æ¯ï¼ˆå«æœ‰<code>Options: disabled</code>ï¼‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">(lldb) breakpoint list</div><div class="line"><span class="type">Current</span> breakpoints:</div><div class="line"><span class="number">7</span>: name = 'insertItems:isUp:', locations = <span class="number">4</span>, resolved = <span class="number">4</span>, hit <span class="built_in">count</span> = <span class="number">0</span> <span class="type">Options</span>: disabled </div><div class="line"><span class="number">7.1</span>: <span class="keyword">where</span> = <span class="type">Demo</span>`-[<span class="type">HomeFigureViewController</span> insertItems:isUp:] + <span class="number">52</span> at <span class="type">HomeFigureViewController</span>.m:<span class="number">360</span>, address = <span class="number">0x0000000105aede04</span>, resolved, hit <span class="built_in">count</span> = <span class="number">0</span> </div><div class="line"><span class="number">7.2</span>: <span class="keyword">where</span> = <span class="type">Demo</span>`-[<span class="type">HomeHotViewController</span> insertItems:isUp:] + <span class="number">65</span> at <span class="type">HomeHotViewController</span>.m:<span class="number">204</span>, address = <span class="number">0x0000000105cdd341</span>, resolved, hit <span class="built_in">count</span> = <span class="number">0</span> </div><div class="line"><span class="number">7.3</span>: <span class="keyword">where</span> = <span class="type">Demo</span>`-[<span class="type">TopicViewController</span> insertItems:isUp:] + <span class="number">52</span> at <span class="type">TopicViewController</span>.m:<span class="number">276</span>, address = <span class="number">0x0000000105d67f94</span>, resolved, hit <span class="built_in">count</span> = <span class="number">0</span> </div><div class="line"><span class="number">7.4</span>: <span class="keyword">where</span> = <span class="type">Demo</span>`-[lashNewsViewController insertItems:isUp:] + <span class="number">55</span> at lashNewsViewController.m:<span class="number">163</span>, address = <span class="number">0x0000000105f3c787</span>, resolved, hit <span class="built_in">count</span> = <span class="number">0</span></div></pre></td></tr></table></figure>
<h4 id="åˆ é™¤æ–­ç‚¹"><a href="#åˆ é™¤æ–­ç‚¹" class="headerlink" title="åˆ é™¤æ–­ç‚¹"></a>åˆ é™¤æ–­ç‚¹</h4><ul>
<li><code>$breakpoint delete 6/6.1</code></li>
</ul>
<h4 id="ç»™æŸä¸ªæ–¹æ³•æ·»åŠ æ–­ç‚¹"><a href="#ç»™æŸä¸ªæ–¹æ³•æ·»åŠ æ–­ç‚¹" class="headerlink" title="ç»™æŸä¸ªæ–¹æ³•æ·»åŠ æ–­ç‚¹"></a>ç»™æŸä¸ªæ–¹æ³•æ·»åŠ æ–­ç‚¹</h4><p>å…¨å±€å«æœ‰æŸä¸ªæ–¹æ³•çš„åœ°æ–¹å‡è®¾ç½®æ–­ç‚¹</p>
<ul>
<li><code>$breakpoint set --selector insertItems:isUp:</code></li>
</ul>
<p>æ ¹æ®æ–¹æ³•å…³é”®å­—å…¨å±€è®¾ç½®æ–­ç‚¹</p>
<ul>
<li><code>$breakpoint set -r insertItems:</code></li>
</ul>
<p>ç»™å…·ä½“æŸä¸ªç±»ä¸­çš„æ–¹æ³•è®¾ç½®æ–­ç‚¹</p>
<ul>
<li><code>$breakpoint set --file HomeHotViewController.m --selector insertItems:isUp:</code></li>
</ul>
<h4 id="é™„åŠ æŒ‡ä»¤"><a href="#é™„åŠ æŒ‡ä»¤" class="headerlink" title="é™„åŠ æŒ‡ä»¤"></a>é™„åŠ æŒ‡ä»¤</h4><p>æ·»åŠ æ–­ç‚¹é™„åŠ åŠ æŒ‡ä»¤</p>
<ul>
<li><code>$breakpoint command add 2.1</code></li>
</ul>
<p>æ§åˆ¶å°çš„è¾“å‡ºå¦‚ä¸‹ï¼Œéœ€è¦è¾“å…¥ç›¸åº”æŒ‡ä»¤ï¼Œç»“æŸè¾“å…¥<code>DONE</code>æŒ‰å›è½¦é”®</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="type">Enter</span> your debugger command(s).  <span class="type">Type</span> '<span class="type">DONE'</span> to end.</div><div class="line">&gt;</div></pre></td></tr></table></figure>
<p>æŸ¥è¯¢æ–­ç‚¹é™„åŠ æŒ‡ä»¤</p>
<ul>
<li><code>$breakpoint command list 2.1</code></li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">(lldb) breakpoint command list <span class="number">2.1</span></div><div class="line"><span class="type">Breakpoint</span> <span class="number">2.1</span>:</div><div class="line">    <span class="type">Breakpoint</span> commands:</div><div class="line">        po <span class="keyword">self</span></div><div class="line">        po <span class="keyword">self</span>.view</div></pre></td></tr></table></figure>
<p>åˆ é™¤é™„åŠ æŒ‡ä»¤</p>
<ul>
<li><code>$breakpoint command delete 2.1</code></li>
</ul>
<h3 id="æŸ¥çœ‹å †æ ˆä¿¡æ¯"><a href="#æŸ¥çœ‹å †æ ˆä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹å †æ ˆä¿¡æ¯"></a>æŸ¥çœ‹å †æ ˆä¿¡æ¯</h3><ul>
<li><p><code>$bt</code></p>
</li>
<li><p><code>$up</code> è·³è½¬ä¸Šä¸€æ­¥è°ƒç”¨çš„æ–¹æ³•æŸ¥çœ‹ä¿¡æ¯</p>
</li>
<li><p><code>$down</code> è·³è½¬ä¸‹ä¸€æ­¥è°ƒç”¨çš„æ–¹æ³•æŸ¥çœ‹ä¿¡æ¯</p>
</li>
<li><p><code>$frame select 2</code> è·³è½¬åˆ°å †æ ˆä¿¡æ¯ä¸­çš„æŸä¸ªæ–¹æ³•</p>
</li>
<li><p><code>$frame variable</code> æŸ¥çœ‹å½“å‰æ–¹æ³•æ‰€æœ‰å˜é‡</p>
</li>
<li><p><code>$thread return</code> å›æ»šä¸Šä¸€æ¬¡è°ƒç”¨çš„æ–¹æ³•å¹¶return</p>
</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">(lldb) breakpoint list</div><div class="line"><span class="type">Current</span> breakpoints:</div><div class="line"><span class="number">1</span>: name = '-[<span class="type">TestViewController</span> test2]', locations = <span class="number">1</span>, resolved = <span class="number">1</span>, hit <span class="built_in">count</span> = <span class="number">1</span></div><div class="line">  <span class="number">1.1</span>: <span class="keyword">where</span> = <span class="type">Demo</span>`-[<span class="type">TestViewController</span> test2] + <span class="number">30</span> at <span class="type">TestViewController</span>.m:<span class="number">37</span>, address = <span class="number">0x000000010caf2cce</span>, resolved, hit <span class="built_in">count</span> = <span class="number">1</span> </div><div class="line">(lldb) bt</div><div class="line">* thread #<span class="number">1</span>, queue = 'com.apple.main-thread', stop reason = breakpoint <span class="number">1.1</span></div><div class="line">  * frame #<span class="number">0</span>: <span class="number">0x000000010caf2cce</span> <span class="type">Demo</span>`-[<span class="type">TestViewController</span> test2](<span class="keyword">self</span>=<span class="number">0x00007f903dc09910</span>, _cmd=<span class="string">"test2"</span>) at <span class="type">TestViewController</span>.m:<span class="number">37</span></div><div class="line">    frame #<span class="number">1</span>: <span class="number">0x000000010caf2c9e</span> <span class="type">Demo</span>`-[<span class="type">TestViewController</span> test1](<span class="keyword">self</span>=<span class="number">0x00007f903dc09910</span>, _cmd=<span class="string">"test1"</span>) at <span class="type">TestViewController</span>.m:<span class="number">33</span></div><div class="line">    frame #<span class="number">2</span>: <span class="number">0x000000010caf2e01</span> <span class="type">Demo</span>`-[<span class="type">TestViewController</span> touchesBegan:withEvent:](<span class="keyword">self</span>=<span class="number">0x00007f903dc09910</span>, _cmd=<span class="string">"touchesBegan:withEvent:"</span>, touches=<span class="number">1</span> element, event=<span class="number">0x000060000011a4c0</span>) at <span class="type">TestViewController</span>.m:<span class="number">52</span></div><div class="line">    frame #<span class="number">3</span>: <span class="number">0x000000010e0e07c7</span> <span class="type">UIKit</span>`forwardTouchMethod + <span class="number">340</span></div><div class="line">    frame #<span class="number">4</span>: <span class="number">0x000000010e0e0662</span> <span class="type">UIKit</span>`-[<span class="type">UIResponder</span> touchesBegan:withEvent:] + <span class="number">49</span></div><div class="line">    frame #<span class="number">5</span>: <span class="number">0x000000010df28e7a</span> <span class="type">UIKit</span>`-[<span class="type">UIWindow</span> _sendTouchesForEvent:] + <span class="number">2052</span></div><div class="line">    frame #<span class="number">6</span>: <span class="number">0x000000010df2a821</span> <span class="type">UIKit</span>`-[<span class="type">UIWindow</span> sendEvent:] + <span class="number">4086</span></div><div class="line">    frame #<span class="number">7</span>: <span class="number">0x000000010dece370</span> <span class="type">UIKit</span>`-[<span class="type">UIApplication</span> sendEvent:] + <span class="number">352</span></div><div class="line">    frame #<span class="number">8</span>: <span class="number">0x000000010e80f57f</span> <span class="type">UIKit</span>`__dispatchPreprocessedEventFromEventQueue + <span class="number">2796</span></div><div class="line">    frame #<span class="number">9</span>: <span class="number">0x000000010e812194</span> <span class="type">UIKit</span>`__handleEventQueueInternal + <span class="number">5949</span></div><div class="line">    frame #<span class="number">10</span>: <span class="number">0x0000000111bd8bb1</span> <span class="type">CoreFoundation</span>`__CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + <span class="number">17</span></div><div class="line">    frame #<span class="number">11</span>: <span class="number">0x0000000111bbd4af</span> <span class="type">CoreFoundation</span>`__CFRunLoopDoSources0 + <span class="number">271</span></div><div class="line">    frame #<span class="number">12</span>: <span class="number">0x0000000111bbca6f</span> <span class="type">CoreFoundation</span>`__CFRunLoopRun + <span class="number">1263</span></div><div class="line">    frame #<span class="number">13</span>: <span class="number">0x0000000111bbc30b</span> <span class="type">CoreFoundation</span>`<span class="type">CFRunLoopRunSpecific</span> + <span class="number">635</span></div><div class="line">    frame #<span class="number">14</span>: <span class="number">0x0000000115997a73</span> <span class="type">GraphicsServices</span>`<span class="type">GSEventRunModal</span> + <span class="number">62</span></div><div class="line">    frame #<span class="number">15</span>: <span class="number">0x000000010deb30b7</span> <span class="type">UIKit</span>`<span class="type">UIApplicationMain</span> + <span class="number">159</span></div><div class="line">    frame #<span class="number">16</span>: <span class="number">0x000000010caf2e9f</span> <span class="type">Demo</span>`main(argc=<span class="number">1</span>, argv=<span class="number">0x00007ffee3111090</span>) at main.m:<span class="number">18</span></div><div class="line">    frame #<span class="number">17</span>: <span class="number">0x00000001110dc955</span> libdyld.dylib`start + <span class="number">1</span></div><div class="line">(lldb) up</div><div class="line">frame #<span class="number">1</span>: <span class="number">0x000000010caf2c9e</span> <span class="type">Demo</span>`-[<span class="type">TestViewController</span> test1](<span class="keyword">self</span>=<span class="number">0x00007f903dc09910</span>, _cmd=<span class="string">"test1"</span>) at <span class="type">TestViewController</span>.m:<span class="number">33</span></div><div class="line">   <span class="number">30</span>  	</div><div class="line">   <span class="number">31</span>  	- (void)test1 &#123;</div><div class="line">   <span class="number">32</span>  	    <span class="type">NSLog</span>(@<span class="string">"%s"</span>, __func__);</div><div class="line">-&gt; <span class="number">33</span>  	    [4m[[0mself test2];</div><div class="line">   <span class="number">34</span>  	&#125;</div><div class="line">   <span class="number">35</span>  	</div><div class="line">   <span class="number">36</span>  	- (void)test2 &#123;</div><div class="line">(lldb) down</div><div class="line">frame #<span class="number">0</span>: <span class="number">0x000000010caf2cce</span> <span class="type">Demo</span>`-[<span class="type">TestViewController</span> test2](<span class="keyword">self</span>=<span class="number">0x00007f903dc09910</span>, _cmd=<span class="string">"test2"</span>) at <span class="type">TestViewController</span>.m:<span class="number">37</span></div><div class="line">   <span class="number">34</span>  	&#125;</div><div class="line">   <span class="number">35</span>  	</div><div class="line">   <span class="number">36</span>  	- (void)test2 &#123;</div><div class="line">-&gt; <span class="number">37</span>  	    [4mN[0mSLog(@<span class="string">"%s"</span>, __func__);</div><div class="line">   <span class="number">38</span>  	    [<span class="keyword">self</span> test3];</div><div class="line">   <span class="number">39</span>  	&#125;</div><div class="line">   <span class="number">40</span>  	</div><div class="line">(lldb) frame select <span class="number">2</span></div><div class="line">frame #<span class="number">2</span>: <span class="number">0x000000010caf2e01</span> <span class="type">Demo</span>`-[<span class="type">TestViewController</span> touchesBegan:withEvent:](<span class="keyword">self</span>=<span class="number">0x00007f903dc09910</span>, _cmd=<span class="string">"touchesBegan:withEvent:"</span>, touches=<span class="number">1</span> element, event=<span class="number">0x000060000011a4c0</span>) at <span class="type">TestViewController</span>.m:<span class="number">52</span></div><div class="line">   <span class="number">49</span>  	</div><div class="line">   <span class="number">50</span>  	- (void)touchesBegan:(<span class="type">NSSet</span>&lt;<span class="type">UITouch</span> *&gt; *)touches withEvent:(<span class="type">UIEvent</span> *)event &#123;</div><div class="line">   <span class="number">51</span>  	    <span class="type">NSLog</span>(@<span class="string">"%s"</span>, __func__);</div><div class="line">-&gt; <span class="number">52</span>  	    [4m[[0mself test1];</div><div class="line">   <span class="number">53</span>  	    </div><div class="line">   <span class="number">54</span>  	&#125;</div><div class="line">   <span class="number">55</span>  	</div><div class="line">(lldb)</div></pre></td></tr></table></figure>
<!-- 
### æµç¨‹æ§åˆ¶

> `$c` --continue ç¨‹åºç»§ç»­æ‰§è¡Œ

> `$n` --next å•æ­¥æ‰§è¡Œï¼Œé‡å­å‡½æ•°ä¼šå½“åšæ•´ä½“å¤„ç†

> `$s` --step in å•æ­¥æ‰§è¡Œï¼Œé‡å­å‡½æ•°ä¼šè¿›å…¥å­å‡½æ•°ä½“ -->
<h3 id="å†…å­˜æ–­ç‚¹"><a href="#å†…å­˜æ–­ç‚¹" class="headerlink" title="å†…å­˜æ–­ç‚¹"></a>å†…å­˜æ–­ç‚¹</h3><p>ç»™æŸä¸ªå¯¹è±¡çš„å±æ€§è®¾ç½®æ–­ç‚¹</p>
<ul>
<li><code>$watchpoint set variable p1-&gt;_name</code></li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">(lldb) watchpoint <span class="keyword">set</span> variable p1-&gt;_name</div><div class="line"><span class="type">Watchpoint</span> created: <span class="type">Watchpoint</span> <span class="number">1</span>: addr = <span class="number">0x604000037168</span> size = <span class="number">8</span> state = enabled type = w</div><div class="line">    declare @ '/<span class="type">Users</span>/icepoint/<span class="type">Desktop</span>/<span class="type">Demo</span>/<span class="type">Demo</span>/<span class="type">TestViewController</span>.m:<span class="number">30</span>'</div><div class="line">    watchpoint spec = 'p1-&gt;_name'</div><div class="line">    new value: <span class="number">0x0000000109ab8848</span></div></pre></td></tr></table></figure>
<p>æ›´å…·å†…å­˜åœ°å€è®¾ç½®æ–­ç‚¹</p>
<ul>
<li><code>$watchpoint set expression 0x000060c000221528</code></li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">(lldb) frame variable</div><div class="line">(<span class="type">TestViewController</span> *) <span class="keyword">self</span> = <span class="number">0x00007f890bc08f00</span></div><div class="line">(<span class="type">SEL</span>) _cmd = <span class="string">"viewDidLoad"</span></div><div class="line">(<span class="type">Person</span> *) p1 = <span class="number">0x000060c000221520</span></div><div class="line">(<span class="type">Person</span> *) p2 = <span class="number">0x4084d80000000000</span></div><div class="line">(lldb) p &amp;p1-&gt;_name</div><div class="line">(<span class="type">NSString</span> **) $<span class="number">0</span> = <span class="number">0x000060c000221528</span></div><div class="line">(lldb) watchpoint <span class="keyword">set</span> expression <span class="number">0x000060c000221528</span></div><div class="line"><span class="type">Watchpoint</span> created: <span class="type">Watchpoint</span> <span class="number">1</span>: addr = <span class="number">0x60c000221528</span> size = <span class="number">8</span> state = enabled type = w</div><div class="line">    new value: <span class="number">4418234440</span></div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ§åˆ¶å°æŸ¥çœ‹æ‰€æœ‰&lt;code&gt;LLDB&lt;/code&gt;æŒ‡ä»¤ï¼Œå¯ä»¥ç”¨&lt;code&gt;$help&lt;/code&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://keleyundou.github.io/categories/iOS/"/>
    
    
      <category term="LLDB" scheme="http://keleyundou.github.io/tags/LLDB/"/>
    
  </entry>
  
  <entry>
    <title>How to use PlistBuddy</title>
    <link href="http://keleyundou.github.io/2017/08/18/How-to-use-PlistBuddy/"/>
    <id>http://keleyundou.github.io/2017/08/18/How-to-use-PlistBuddy/</id>
    <published>2017-08-18T08:19:36.000Z</published>
    <updated>2017-08-18T09:15:08.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="PlistBuddy"><a href="#PlistBuddy" class="headerlink" title="PlistBuddy"></a>PlistBuddy</h2><p>ä¸€ä¸ªplistæ–‡ä»¶æ“ä½œå·¥å…·ã€‚è®°å½•ä¸‹æ–¹ä¾¿ä»¥åä½¿ç”¨ï¼Œå¸¸ç”¨ä»¥ä¸‹4ä¸ªæ–¹æ³•ï¼š</p>
<ul>
<li><em><code>Add</code></em> æ·»åŠ </li>
<li><em><code>Delete</code></em> åˆ é™¤</li>
<li><em><code>Set</code></em> æ›´æ–°</li>
<li><em><code>Print</code></em> è¯»å–</li>
<li>â€¦</li>
</ul>
<a id="more"></a>
<p>æ›´å¤šæ–¹æ³•å¯ <code>--help</code>ï¼Œ ä»¥ä¸Šå…·ä½“ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<h3 id="Add"><a href="#Add" class="headerlink" title="Add"></a>Add</h3><ul>
<li>æ·»åŠ ä¸€ä¸ª<code>key</code>:<code>code</code> <code>value</code>:<code>404</code></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/usr/libexec/PlistBuddy <span class="string">"Add :code integer 404"</span> t1.plist</div></pre></td></tr></table></figure>
<p>ç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Dict &#123;</div><div class="line">    code = 404</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>æ·»åŠ <code>Array</code>ï¼Œå…ˆåˆ›å»ºä¸€ä¸ªæ•°ç»„å˜é‡<code>list</code>, ç„¶åå¾€<code>list</code>ä¸­æ·»åŠ æ•°æ®</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">/usr/libexec/PlistBuddy <span class="string">"Add :list Array"</span> t1.plist</div><div class="line">/usr/libexec/PlistBuddy <span class="string">"Add :list: string a1"</span> t1.plist</div><div class="line"><span class="comment"># æ ¹æ®ç´¢å¼•æ’å…¥å€¼</span></div><div class="line">/usr/libexec/PlistBuddy <span class="string">"Add :list:0 string a2"</span> t1.plist</div></pre></td></tr></table></figure>
<p>ç»“æœå¦‚ä¸‹ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Dict &#123;</div><div class="line">    list = Array &#123;</div><div class="line">        a2</div><div class="line">        a1</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<ul>
<li>æ·»åŠ <code>Dict</code></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">/usr/libexec/PlistBuddy <span class="string">"Add :result Dict"</span> t1.plist</div><div class="line">/usr/libexec/PlistBuddy <span class="string">"Add :result:name string Tom"</span> t1.plist</div><div class="line">/usr/libexec/PlistBuddy <span class="string">"Add :result:age integer 18"</span> t1.plist</div><div class="line">/usr/libexec/PlistBuddy <span class="string">"Add :result:list Array"</span> t1.plist</div><div class="line">/usr/libexec/PlistBuddy <span class="string">"Add :result:list: string aa"</span> t1.plist</div></pre></td></tr></table></figure>
<p>ç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">Dict &#123;</div><div class="line">    result = Dict &#123;</div><div class="line">        age = 18</div><div class="line">        list = Array &#123;</div><div class="line">            aa</div><div class="line">        &#125;</div><div class="line">        name = Tom</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Delete"><a href="#Delete" class="headerlink" title="Delete"></a>Delete</h3><ul>
<li>æ ¹æ®<code>key</code>åˆ é™¤ å¯¹åº”çš„<code>value</code></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/usr/libexec/PlistBuddy <span class="string">"Delete :code"</span> t1.plist</div></pre></td></tr></table></figure>
<h3 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h3><ul>
<li>æ ¹æ®<code>key</code>æ›´æ–°<code>value</code></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/usr/libexec/PlistBuddy <span class="string">"Set :code 200"</span></div></pre></td></tr></table></figure>
<p>ç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Dict &#123;</div><div class="line">    code = 200</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Print"><a href="#Print" class="headerlink" title="Print"></a>Print</h3><ul>
<li>æ ¹æ®<code>key</code>è¯»å–<code>value</code></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">/usr/libexec/PlistBuddy <span class="string">"Print"</span> t1.plist</div><div class="line">/usr/libexec/PlistBuddy <span class="string">"Print :code"</span> t1.plist</div></pre></td></tr></table></figure>
<p>ç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># t1.plist</span></div><div class="line">Dict &#123;</div><div class="line">    result = Dict &#123;</div><div class="line">        age = 18</div><div class="line">        list = Array &#123;</div><div class="line">            aa</div><div class="line">        &#125;</div><div class="line">        name = Tom</div><div class="line">    &#125;</div><div class="line">    code = 200</div><div class="line">    list = Array &#123;</div><div class="line">        a2</div><div class="line">        a1</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment"># code</span></div><div class="line">200</div></pre></td></tr></table></figure>
<hr>
<p><a href="https://github.com/keleyundou/blog_demo_repo/tree/master/PlistBuddy" target="_blank" rel="external">Demo</a></p>
<!--
 http://fgimian.github.io/blog/2015/06/27/a-simple-plistbuddy-tutorial/
 http://www.jianshu.com/p/2167f755c47e
 -->
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;PlistBuddy&quot;&gt;&lt;a href=&quot;#PlistBuddy&quot; class=&quot;headerlink&quot; title=&quot;PlistBuddy&quot;&gt;&lt;/a&gt;PlistBuddy&lt;/h2&gt;&lt;p&gt;ä¸€ä¸ªplistæ–‡ä»¶æ“ä½œå·¥å…·ã€‚è®°å½•ä¸‹æ–¹ä¾¿ä»¥åä½¿ç”¨ï¼Œå¸¸ç”¨ä»¥ä¸‹4ä¸ªæ–¹æ³•ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;&lt;code&gt;Add&lt;/code&gt;&lt;/em&gt; æ·»åŠ &lt;/li&gt;
&lt;li&gt;&lt;em&gt;&lt;code&gt;Delete&lt;/code&gt;&lt;/em&gt; åˆ é™¤&lt;/li&gt;
&lt;li&gt;&lt;em&gt;&lt;code&gt;Set&lt;/code&gt;&lt;/em&gt; æ›´æ–°&lt;/li&gt;
&lt;li&gt;&lt;em&gt;&lt;code&gt;Print&lt;/code&gt;&lt;/em&gt; è¯»å–&lt;/li&gt;
&lt;li&gt;â€¦&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="çç¢æ‚è®°" scheme="http://keleyundou.github.io/categories/%E7%90%90%E7%A2%8E%E6%9D%82%E8%AE%B0/"/>
    
    
      <category term="PlistBuddy" scheme="http://keleyundou.github.io/tags/PlistBuddy/"/>
    
      <category term="shell" scheme="http://keleyundou.github.io/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>Dispatch Semaphore</title>
    <link href="http://keleyundou.github.io/2017/08/15/Dispatch-Semaphore/"/>
    <id>http://keleyundou.github.io/2017/08/15/Dispatch-Semaphore/</id>
    <published>2017-08-15T08:18:16.000Z</published>
    <updated>2017-08-16T04:16:45.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ä¿¡å·é‡"><a href="#ä¿¡å·é‡" class="headerlink" title="ä¿¡å·é‡"></a>ä¿¡å·é‡</h3><!-- åˆ›å»ºä¸€ä¸ªå¹¶å‘æ§åˆ¶æ¥åŒæ­¥ä»»åŠ¡å’Œæœ‰é™èµ„æºè®¿é—®ï¼Œæ¢å¥è¯è¯´ï¼Œå°±æ˜¯æ§åˆ¶å¹¶å‘çš„çº¿ç¨‹æ•°é‡ã€‚ -->
<p><strong>ä¿¡å·é‡</strong>ï¼ˆè‹±è¯­ï¼š<code>Semaphore</code>ï¼‰åˆç§°ä¸º <strong>ä¿¡å·é‡</strong> ã€<strong>æ——è¯­</strong>ï¼Œæ˜¯ä¸€ä¸ªåŒæ­¥å¯¹è±¡ï¼Œç”¨äºä¿æŒåœ¨0è‡³æŒ‡å®šæœ€å¤§å€¼ä¹‹é—´çš„ä¸€ä¸ªè®¡æ•°å€¼ã€‚å½“çº¿ç¨‹å®Œæˆä¸€æ¬¡å¯¹è¯¥<code>semaphore</code>å¯¹è±¡ç­‰å¾…ï¼ˆwaitï¼‰æ—¶ï¼Œè¯¥è®¡æ•°å€¼å‡1ï¼›å½“çº¿ç¨‹å®Œæˆä¸€æ¬¡å¯¹<code>semaphore</code>å¯¹è±¡é‡Šæ”¾æ—¶ï¼Œè®¡æ•°å€¼åŠ 1ã€‚å½“è®¡æ•°å€¼ä¸º0æ—¶ï¼Œåˆ™çº¿ç¨‹ç­‰å¾…è¯¥<code>semaphore</code>å¯¹è±¡ä¸å†èƒ½æˆåŠŸç›´è‡³è¯¥<code>semaphore</code>å¯¹è±¡å˜æˆsignaledçŠ¶æ€ã€‚<code>semaphore</code>å¯¹è±¡çš„è®¡æ•°å€¼å¤§äº0ï¼Œä¸ºsignaledçŠ¶æ€ï¼›è®¡æ•°å€¼ç­‰äº0ï¼Œä¸ºnonsignaledçŠ¶æ€ã€‚<br><code>semaphore</code>å¯¹è±¡é€‚ç”¨äºæ§åˆ¶ä¸€ä¸ªä»…æ”¯æŒæœ‰é™ä¸ªç”¨æˆ·çš„å…±äº«èµ„æºã€‚æ˜¯ä¸€ç§ä¸éœ€è¦ä½¿ç”¨<code>busy waiting</code>çš„ä¸€ç§æ–¹æ³•ã€‚â€”â€” ç»´åŸºç™¾ç§‘</p>
<a id="more"></a>
<h3 id="æƒ…æ™¯å†ç°"><a href="#æƒ…æ™¯å†ç°" class="headerlink" title="æƒ…æ™¯å†ç°"></a>æƒ…æ™¯å†ç°</h3><p>ä¸ºäº†æ–¹ä¾¿ç†è§£<code>semaphore</code>ï¼Œæ‰¾åˆ°ä¸€ä¸ªç»å…¸æ¡ˆä¾‹ï¼šåœè½¦åœºé—®é¢˜</p>
<p>å‡è®¾åœè½¦åœºåªæœ‰ä¸‰ä¸ªè½¦ä½ï¼Œä¸€å¼€å§‹ä¸‰ä¸ªè½¦ä½éƒ½æ˜¯ç©ºçš„ã€‚è¿™æ—¶å¦‚æœåŒæ—¶æ¥äº†äº”è¾†è½¦ï¼Œçœ‹é—¨äººå…è®¸å…¶ä¸­ä¸‰è¾†ä¸å—é˜»ç¢çš„è¿›å…¥ï¼Œç„¶åæ”¾ä¸‹è½¦æ‹¦ï¼Œå‰©ä¸‹çš„è½¦åˆ™å¿…é¡»åœ¨å…¥å£ç­‰å¾…ï¼Œæ­¤åæ¥çš„è½¦ä¹Ÿéƒ½ä¸å¾—ä¸åœ¨å…¥å£å¤„ç­‰å¾…ã€‚è¿™æ—¶ï¼Œæœ‰ä¸€è¾†è½¦ç¦»å¼€åœè½¦åœºï¼Œçœ‹é—¨äººå¾—çŸ¥åï¼Œæ‰“å¼€è½¦æ‹¦ï¼Œæ”¾å…¥ä¸€è¾†ï¼Œå¦‚æœåˆç¦»å¼€ä¸¤è¾†ï¼Œåˆ™åˆå¯ä»¥æ”¾å…¥ä¸¤è¾†ï¼Œå¦‚æ­¤å¾€å¤ã€‚</p>
<p>åœ¨è¿™ä¸ªåœè½¦åœºç³»ç»Ÿä¸­ï¼Œè½¦ä½æ˜¯å…¬å…±èµ„æºï¼Œæ¯è¾†è½¦å¥½æ¯”ä¸€ä¸ªçº¿ç¨‹ï¼Œçœ‹é—¨äººèµ·çš„å°±æ˜¯ä¿¡å·é‡çš„ä½œç”¨ã€‚</p>
<p>æ›´è¿›ä¸€æ­¥ï¼Œä¿¡å·é‡çš„ç‰¹æ€§å¦‚ä¸‹ï¼šä¿¡å·é‡æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°ï¼ˆè½¦ä½æ•°ï¼‰ï¼Œæ‰€æœ‰é€šè¿‡å®ƒçš„çº¿ç¨‹ï¼ˆè½¦è¾†ï¼‰éƒ½ä¼šå°†è¯¥æ•´æ•°å‡ä¸€ï¼ˆé€šè¿‡å®ƒå½“ç„¶æ˜¯ä¸ºäº†ä½¿ç”¨èµ„æºï¼‰ï¼Œå½“è¯¥æ•´æ•°å€¼ä¸ºé›¶æ—¶ï¼Œæ‰€æœ‰è¯•å›¾é€šè¿‡å®ƒçš„çº¿ç¨‹éƒ½å°†å¤„äºç­‰å¾…çŠ¶æ€ã€‚åœ¨ä¿¡å·é‡ä¸Šæˆ‘ä»¬å®šä¹‰ä¸¤ç§æ“ä½œï¼š Waitï¼ˆç­‰å¾…ï¼‰ å’Œ Signalï¼ˆé‡Šæ”¾ï¼‰ã€‚ å½“ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨Waitï¼ˆç­‰å¾…ï¼‰æ“ä½œæ—¶ï¼Œå®ƒè¦ä¹ˆé€šè¿‡ç„¶åå°†ä¿¡å·é‡å‡ä¸€ï¼Œè¦ä¹ˆä¸€ç›´ç­‰ä¸‹å»ï¼Œç›´åˆ°ä¿¡å·é‡å¤§äºä¸€æˆ–è¶…æ—¶ã€‚Signalï¼ˆé‡Šæ”¾ï¼‰å®é™…ä¸Šæ˜¯åœ¨ä¿¡å·é‡ä¸Šæ‰§è¡ŒåŠ æ“ä½œï¼Œå¯¹åº”äºè½¦è¾†ç¦»å¼€åœè½¦åœºï¼Œè¯¥æ“ä½œä¹‹æ‰€ä»¥å«åšâ€œé‡Šæ”¾â€æ˜¯å› ä¸ºåŠ æ“ä½œå®é™…ä¸Šæ˜¯é‡Šæ”¾äº†ç”±ä¿¡å·é‡å®ˆæŠ¤çš„èµ„æºã€‚</p>
<h4 id="æ¡ˆä¾‹ä¸€"><a href="#æ¡ˆä¾‹ä¸€" class="headerlink" title="æ¡ˆä¾‹ä¸€"></a>æ¡ˆä¾‹ä¸€</h4><p>å½“å¹¶è¡Œæ‰§è¡Œçš„å¤„ç†æ›´æ–°æ•°æ®æ—¶ï¼Œä¼šäº§ç”Ÿæ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µï¼Œæœ‰æ—¶ç¨‹åºè¿˜ä¼šå¼‚å¸¸ç»“æŸã€‚è™½ç„¶ä½¿ç”¨<code>Serial Dispatch Queue</code>å’Œ<code>dispatch_barrier_async</code>å‡½æ•°å¯ä»¥é¿å…æ­¤ç±»é—®é¢˜ï¼Œä½†æœ‰å¿…è¦è¿›è¡Œæ›´ç»†ç²’åº¦çš„æ’ä»–æ§åˆ¶ã€‚ä¾‹å¦‚ä¸‹é¢è¿™ç§æƒ…å†µï¼Œå°†æ‰€æœ‰æ•°æ®è¿½åŠ åˆ°<code>NSMutableArray</code>ä¸­ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">dispatch_queue_t</span> queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, <span class="number">0</span>);</div><div class="line">  <span class="built_in">NSMutableArray</span> *buffer = @[].mutableCopy;</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</div><div class="line">      <span class="built_in">dispatch_async</span>(queue, ^&#123;</div><div class="line">          [buffer addObject:@(i)];</div><div class="line">      &#125;);</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>å› ä¸ºæ­¤æ®µä»£ç ä½¿ç”¨<code>Global Dispatch Queue</code>æ›´æ–°<code>NSMutableArray</code>ç±»å¯¹è±¡ï¼Œæ‰€ä»¥æ‰§è¡Œåç”±äºå†…å­˜é”™è¯¯å¯¼è‡´ç¨‹åºå¼‚å¸¸ç»“æŸçš„æ¦‚ç‡å¾ˆé«˜ã€‚æ­¤æ—¶åº”ä½¿ç”¨<code>Dispatch Semaphore</code>ã€‚</p>
<p><code>semaphore</code> ç›¸å…³å‡½æ•°</p>
<ul>
<li><p>dispatch_semaphore_create</p>
<blockquote>
<p>åˆ›å»ºä¸€ä¸ªä¿¡å·çš„æ€»é‡ å‚æ•°æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºåˆå§‹å€¼</p>
</blockquote>
</li>
<li><p>dispatch_semaphore_signal</p>
<blockquote>
<p>å‘é€ä¸€ä¸ªä¿¡å·ï¼Œä½¿ä¿¡å·æ€»é‡+1</p>
</blockquote>
</li>
<li><p>dispatch_semaphore_wait</p>
<blockquote>
<p>ç­‰å¾…ä¸€ä¸ªä¿¡å·ï¼Œä½¿ä¿¡å·æ€»é‡-1ï¼Œå½“ä¿¡å·æ€»é‡&lt;0æ—¶ï¼Œä¼šä¸€ç›´ç­‰å¾…é˜»å¡çº¿ç¨‹ï¼Œç›´åˆ°ä¿¡å·é‡å†æ¬¡å¤§äº0çš„æ—¶å€™å†æ‰§è¡Œ</p>
</blockquote>
</li>
</ul>
<p>åœ¨å‰é¢çš„ä»£ç ç‰‡æ®µä¸­ä½¿ç”¨<code>Dispatch Semaphore</code>çœ‹çœ‹ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">dispatch_queue_t</span> queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, <span class="number">0</span>);</div><div class="line">  dispatch_semaphore_t dsema = dispatch_semaphore_create(<span class="number">1</span>);</div><div class="line">  <span class="built_in">NSMutableArray</span> *buffer = @[].mutableCopy;</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</div><div class="line">      <span class="built_in">dispatch_async</span>(queue, ^&#123;</div><div class="line">          dispatch_semaphore_wait(dsema, DISPATCH_TIME_FOREVER);</div><div class="line">          [buffer addObject:@(i)];</div><div class="line">          dispatch_semaphore_signal(dsema);</div><div class="line">      &#125;);</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<h4 id="æ¡ˆä¾‹äºŒ"><a href="#æ¡ˆä¾‹äºŒ" class="headerlink" title="æ¡ˆä¾‹äºŒ"></a>æ¡ˆä¾‹äºŒ</h4><p>æ”¹å˜æŸä¸ªå˜é‡å€¼</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">dispatch_queue_t</span> queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, <span class="number">0</span>);</div><div class="line">  dispatch_semaphore_t dsema = dispatch_semaphore_create(<span class="number">1</span>);</div><div class="line">  __block <span class="keyword">int</span> sum = <span class="number">1000</span>;</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</div><div class="line">      <span class="built_in">dispatch_async</span>(queue, ^&#123;</div><div class="line">          dispatch_semaphore_wait(dsema, DISPATCH_TIME_FOREVER);</div><div class="line">          <span class="keyword">int</span> value = arc4random()%<span class="number">4</span> + <span class="number">5</span>;</div><div class="line">          <span class="built_in">NSLog</span>(<span class="string">@"%d-%d = %d"</span>,sum,value, sum-value);</div><div class="line">          sum=sum-value;</div><div class="line">          dispatch_semaphore_signal(dsema);</div><div class="line">      &#125;);</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>æ ¹æ®æ‰“å°çš„æ—¥å¿—çœ‹çœ‹æ•ˆæœ</p>
<ul>
<li>æœªä½¿ç”¨ä¿¡å·é‡æ“ä½œ</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="number">2017</span><span class="number">-08</span><span class="number">-15</span> <span class="number">16</span>:<span class="number">04</span>:<span class="number">36.623</span> RTDispatchQueue[<span class="number">90207</span>:<span class="number">16910625</span>] <span class="number">1000</span><span class="number">-7</span> = <span class="number">993</span></div><div class="line"><span class="number">2017</span><span class="number">-08</span><span class="number">-15</span> <span class="number">16</span>:<span class="number">04</span>:<span class="number">36.623</span> RTDispatchQueue[<span class="number">90207</span>:<span class="number">16910640</span>] <span class="number">1000</span><span class="number">-5</span> = <span class="number">995</span></div><div class="line"><span class="number">2017</span><span class="number">-08</span><span class="number">-15</span> <span class="number">16</span>:<span class="number">04</span>:<span class="number">36.623</span> RTDispatchQueue[<span class="number">90207</span>:<span class="number">16910626</span>] <span class="number">1000</span><span class="number">-6</span> = <span class="number">994</span></div><div class="line"><span class="number">2017</span><span class="number">-08</span><span class="number">-15</span> <span class="number">16</span>:<span class="number">04</span>:<span class="number">36.623</span> RTDispatchQueue[<span class="number">90207</span>:<span class="number">16910628</span>] <span class="number">1000</span><span class="number">-5</span> = <span class="number">995</span></div><div class="line"><span class="number">2017</span><span class="number">-08</span><span class="number">-15</span> <span class="number">16</span>:<span class="number">04</span>:<span class="number">36.623</span> RTDispatchQueue[<span class="number">90207</span>:<span class="number">16910711</span>] <span class="number">1000</span><span class="number">-7</span> = <span class="number">993</span></div><div class="line"><span class="number">2017</span><span class="number">-08</span><span class="number">-15</span> <span class="number">16</span>:<span class="number">04</span>:<span class="number">36.623</span> RTDispatchQueue[<span class="number">90207</span>:<span class="number">16910713</span>] <span class="number">1000</span><span class="number">-7</span> = <span class="number">993</span></div><div class="line"><span class="number">2017</span><span class="number">-08</span><span class="number">-15</span> <span class="number">16</span>:<span class="number">04</span>:<span class="number">36.623</span> RTDispatchQueue[<span class="number">90207</span>:<span class="number">16910712</span>] <span class="number">1000</span><span class="number">-7</span> = <span class="number">993</span></div><div class="line"><span class="number">2017</span><span class="number">-08</span><span class="number">-15</span> <span class="number">16</span>:<span class="number">04</span>:<span class="number">36.623</span> RTDispatchQueue[<span class="number">90207</span>:<span class="number">16910714</span>] <span class="number">1000</span><span class="number">-6</span> = <span class="number">994</span></div><div class="line"><span class="number">2017</span><span class="number">-08</span><span class="number">-15</span> <span class="number">16</span>:<span class="number">04</span>:<span class="number">36.623</span> RTDispatchQueue[<span class="number">90207</span>:<span class="number">16910625</span>] <span class="number">993</span><span class="number">-7</span> = <span class="number">986</span></div><div class="line"><span class="number">2017</span><span class="number">-08</span><span class="number">-15</span> <span class="number">16</span>:<span class="number">04</span>:<span class="number">36.623</span> RTDispatchQueue[<span class="number">90207</span>:<span class="number">16910715</span>] <span class="number">993</span><span class="number">-5</span> = <span class="number">988</span></div></pre></td></tr></table></figure>
<ul>
<li>ä½¿ç”¨ä¿¡å·é‡æ“ä½œ</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="number">2017</span><span class="number">-08</span><span class="number">-15</span> <span class="number">16</span>:<span class="number">04</span>:<span class="number">07.994</span> RTDispatchQueue[<span class="number">90159</span>:<span class="number">16908711</span>] <span class="number">1000</span><span class="number">-6</span> = <span class="number">994</span></div><div class="line"><span class="number">2017</span><span class="number">-08</span><span class="number">-15</span> <span class="number">16</span>:<span class="number">04</span>:<span class="number">07.995</span> RTDispatchQueue[<span class="number">90159</span>:<span class="number">16908695</span>] <span class="number">994</span><span class="number">-5</span> = <span class="number">989</span></div><div class="line"><span class="number">2017</span><span class="number">-08</span><span class="number">-15</span> <span class="number">16</span>:<span class="number">04</span>:<span class="number">07.995</span> RTDispatchQueue[<span class="number">90159</span>:<span class="number">16908697</span>] <span class="number">989</span><span class="number">-7</span> = <span class="number">982</span></div><div class="line"><span class="number">2017</span><span class="number">-08</span><span class="number">-15</span> <span class="number">16</span>:<span class="number">04</span>:<span class="number">07.995</span> RTDispatchQueue[<span class="number">90159</span>:<span class="number">16908694</span>] <span class="number">982</span><span class="number">-5</span> = <span class="number">977</span></div><div class="line"><span class="number">2017</span><span class="number">-08</span><span class="number">-15</span> <span class="number">16</span>:<span class="number">04</span>:<span class="number">07.995</span> RTDispatchQueue[<span class="number">90159</span>:<span class="number">16908962</span>] <span class="number">977</span><span class="number">-8</span> = <span class="number">969</span></div><div class="line"><span class="number">2017</span><span class="number">-08</span><span class="number">-15</span> <span class="number">16</span>:<span class="number">04</span>:<span class="number">07.995</span> RTDispatchQueue[<span class="number">90159</span>:<span class="number">16908963</span>] <span class="number">969</span><span class="number">-6</span> = <span class="number">963</span></div><div class="line"><span class="number">2017</span><span class="number">-08</span><span class="number">-15</span> <span class="number">16</span>:<span class="number">04</span>:<span class="number">07.996</span> RTDispatchQueue[<span class="number">90159</span>:<span class="number">16908964</span>] <span class="number">963</span><span class="number">-6</span> = <span class="number">957</span></div><div class="line"><span class="number">2017</span><span class="number">-08</span><span class="number">-15</span> <span class="number">16</span>:<span class="number">04</span>:<span class="number">07.996</span> RTDispatchQueue[<span class="number">90159</span>:<span class="number">16908965</span>] <span class="number">957</span><span class="number">-6</span> = <span class="number">951</span></div><div class="line"><span class="number">2017</span><span class="number">-08</span><span class="number">-15</span> <span class="number">16</span>:<span class="number">04</span>:<span class="number">07.996</span> RTDispatchQueue[<span class="number">90159</span>:<span class="number">16908711</span>] <span class="number">951</span><span class="number">-8</span> = <span class="number">943</span></div><div class="line"><span class="number">2017</span><span class="number">-08</span><span class="number">-15</span> <span class="number">16</span>:<span class="number">04</span>:<span class="number">07.996</span> RTDispatchQueue[<span class="number">90159</span>:<span class="number">16908966</span>] <span class="number">943</span><span class="number">-8</span> = <span class="number">935</span></div></pre></td></tr></table></figure>
<h4 id="æ¡ˆä¾‹ä¸‰"><a href="#æ¡ˆä¾‹ä¸‰" class="headerlink" title="æ¡ˆä¾‹ä¸‰"></a>æ¡ˆä¾‹ä¸‰</h4><p>é¡ºåºæ‰§è¡Œtask</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"start"</span>);</div><div class="line">dispatch_semaphore_t dsema = dispatch_semaphore_create(<span class="number">0</span>);</div><div class="line"><span class="built_in">dispatch_queue_t</span> queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, <span class="number">0</span>);</div><div class="line"><span class="built_in">dispatch_async</span>(queue, ^&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</div><div class="line">        sleep(<span class="number">1</span>);</div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"process: %d"</span>, i);</div><div class="line">    &#125;</div><div class="line">    dispatch_semaphore_signal(dsema);</div><div class="line">&#125;);</div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"wait..."</span>);</div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"--&gt;%ld"</span>, dispatch_semaphore_wait(dsema, DISPATCH_TIME_FOREVER));</div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"finish."</span>);</div></pre></td></tr></table></figure>
<p>æ‰“å°æ—¥å¿—å¦‚ä¸‹ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="number">2017</span><span class="number">-08</span><span class="number">-16</span> <span class="number">11</span>:<span class="number">04</span>:<span class="number">58.401</span> RTDispatchQueue[<span class="number">8269</span>:<span class="number">383018</span>] start</div><div class="line"><span class="number">2017</span><span class="number">-08</span><span class="number">-16</span> <span class="number">11</span>:<span class="number">04</span>:<span class="number">58.401</span> RTDispatchQueue[<span class="number">8269</span>:<span class="number">383018</span>] wait...</div><div class="line"><span class="number">2017</span><span class="number">-08</span><span class="number">-16</span> <span class="number">11</span>:<span class="number">05</span>:<span class="number">00.968</span> RTDispatchQueue[<span class="number">8269</span>:<span class="number">383061</span>] process: <span class="number">0</span></div><div class="line"><span class="number">2017</span><span class="number">-08</span><span class="number">-16</span> <span class="number">11</span>:<span class="number">05</span>:<span class="number">01.973</span> RTDispatchQueue[<span class="number">8269</span>:<span class="number">383061</span>] process: <span class="number">1</span></div><div class="line"><span class="number">2017</span><span class="number">-08</span><span class="number">-16</span> <span class="number">11</span>:<span class="number">05</span>:<span class="number">02.979</span> RTDispatchQueue[<span class="number">8269</span>:<span class="number">383061</span>] process: <span class="number">2</span></div><div class="line"><span class="number">2017</span><span class="number">-08</span><span class="number">-16</span> <span class="number">11</span>:<span class="number">05</span>:<span class="number">03.985</span> RTDispatchQueue[<span class="number">8269</span>:<span class="number">383061</span>] process: <span class="number">3</span></div><div class="line"><span class="number">2017</span><span class="number">-08</span><span class="number">-16</span> <span class="number">11</span>:<span class="number">05</span>:<span class="number">04.990</span> RTDispatchQueue[<span class="number">8269</span>:<span class="number">383061</span>] process: <span class="number">4</span></div><div class="line"><span class="number">2017</span><span class="number">-08</span><span class="number">-16</span> <span class="number">11</span>:<span class="number">05</span>:<span class="number">04.991</span> RTDispatchQueue[<span class="number">8269</span>:<span class="number">383018</span>] --&gt;<span class="number">0</span></div><div class="line"><span class="number">2017</span><span class="number">-08</span><span class="number">-16</span> <span class="number">11</span>:<span class="number">05</span>:<span class="number">04.991</span> RTDispatchQueue[<span class="number">8269</span>:<span class="number">383018</span>] finish.</div></pre></td></tr></table></figure>
<p>å› ä¸ºä¿¡å·æ€»é‡æ˜¯0 åœ¨æ‰§è¡Œåˆ°<code>dispatch_semaphore_wait</code>æ—¶ wait ä½¿ä¿¡å·é‡-1ï¼Œå¹¶ä¸ä¼šè¿”å›ç»“æœå€¼ï¼Œã€ŒçŒœæµ‹ï¼šwaitå†…éƒ¨ã€å¤„äºç­‰å¾…çŠ¶æ€ï¼ˆå½“å‰åŠåé¢çš„è¯­å¥å¤„äºé˜»å¡çŠ¶æ€ï¼‰ï¼Œç›´åˆ°è§¦å‘signalï¼Œä½¿ä¿¡å·é‡+1ï¼Œç»§ç»­æ‰§è¡Œwaitè¯­å¥åŠåé¢çš„è¯­å¥</p>
<hr>
<p>Reference:</p>
<ul>
<li><a href="https://zh.wikipedia.org/wiki/%E4%BF%A1%E8%99%9F%E6%A8%99" target="_blank" rel="external">ç»´åŸºç™¾ç§‘-ä¿¡å·é‡</a></li>
<li><a href="https://pan.baidu.com/s/1pKLEJl5" target="_blank" rel="external">Objective-Cé«˜çº§ç¼–ç¨‹</a></li>
<li><a href="https://m.aliyun.com/yunqi/articles/30814?spm=5176.100239.0.0.lr2290" target="_blank" rel="external">GCDä¹‹ä¿¡å·é‡æœºåˆ¶</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;ä¿¡å·é‡&quot;&gt;&lt;a href=&quot;#ä¿¡å·é‡&quot; class=&quot;headerlink&quot; title=&quot;ä¿¡å·é‡&quot;&gt;&lt;/a&gt;ä¿¡å·é‡&lt;/h3&gt;&lt;!-- åˆ›å»ºä¸€ä¸ªå¹¶å‘æ§åˆ¶æ¥åŒæ­¥ä»»åŠ¡å’Œæœ‰é™èµ„æºè®¿é—®ï¼Œæ¢å¥è¯è¯´ï¼Œå°±æ˜¯æ§åˆ¶å¹¶å‘çš„çº¿ç¨‹æ•°é‡ã€‚ --&gt;
&lt;p&gt;&lt;strong&gt;ä¿¡å·é‡&lt;/strong&gt;ï¼ˆè‹±è¯­ï¼š&lt;code&gt;Semaphore&lt;/code&gt;ï¼‰åˆç§°ä¸º &lt;strong&gt;ä¿¡å·é‡&lt;/strong&gt; ã€&lt;strong&gt;æ——è¯­&lt;/strong&gt;ï¼Œæ˜¯ä¸€ä¸ªåŒæ­¥å¯¹è±¡ï¼Œç”¨äºä¿æŒåœ¨0è‡³æŒ‡å®šæœ€å¤§å€¼ä¹‹é—´çš„ä¸€ä¸ªè®¡æ•°å€¼ã€‚å½“çº¿ç¨‹å®Œæˆä¸€æ¬¡å¯¹è¯¥&lt;code&gt;semaphore&lt;/code&gt;å¯¹è±¡ç­‰å¾…ï¼ˆwaitï¼‰æ—¶ï¼Œè¯¥è®¡æ•°å€¼å‡1ï¼›å½“çº¿ç¨‹å®Œæˆä¸€æ¬¡å¯¹&lt;code&gt;semaphore&lt;/code&gt;å¯¹è±¡é‡Šæ”¾æ—¶ï¼Œè®¡æ•°å€¼åŠ 1ã€‚å½“è®¡æ•°å€¼ä¸º0æ—¶ï¼Œåˆ™çº¿ç¨‹ç­‰å¾…è¯¥&lt;code&gt;semaphore&lt;/code&gt;å¯¹è±¡ä¸å†èƒ½æˆåŠŸç›´è‡³è¯¥&lt;code&gt;semaphore&lt;/code&gt;å¯¹è±¡å˜æˆsignaledçŠ¶æ€ã€‚&lt;code&gt;semaphore&lt;/code&gt;å¯¹è±¡çš„è®¡æ•°å€¼å¤§äº0ï¼Œä¸ºsignaledçŠ¶æ€ï¼›è®¡æ•°å€¼ç­‰äº0ï¼Œä¸ºnonsignaledçŠ¶æ€ã€‚&lt;br /&gt;&lt;code&gt;semaphore&lt;/code&gt;å¯¹è±¡é€‚ç”¨äºæ§åˆ¶ä¸€ä¸ªä»…æ”¯æŒæœ‰é™ä¸ªç”¨æˆ·çš„å…±äº«èµ„æºã€‚æ˜¯ä¸€ç§ä¸éœ€è¦ä½¿ç”¨&lt;code&gt;busy waiting&lt;/code&gt;çš„ä¸€ç§æ–¹æ³•ã€‚â€”â€” ç»´åŸºç™¾ç§‘&lt;/p&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://keleyundou.github.io/categories/iOS/"/>
    
    
      <category term="GCD" scheme="http://keleyundou.github.io/tags/GCD/"/>
    
  </entry>
  
  <entry>
    <title>Tech sites</title>
    <link href="http://keleyundou.github.io/2017/08/09/Tech-sites/"/>
    <id>http://keleyundou.github.io/2017/08/09/Tech-sites/</id>
    <published>2017-08-09T07:00:38.000Z</published>
    <updated>2017-08-16T07:38:30.000Z</updated>
    
    <content type="html"><![CDATA[<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/A_re-introduction_to_JavaScript" target="_blank" rel="external">JavaScript Doc</a></li>
<li><a href="http://man.linuxde.net/" target="_blank" rel="external">Linuxå‘½ä»¤å¤§å…¨</a></li>
<li><a href="https://jaq.alibaba.com/community/category?spm=a313e.7916646.25000001.1.55489a7agFjyK2&amp;catid=4" target="_blank" rel="external">é˜¿é‡Œèšå®‰å…¨</a></li>
<li><a href="http://nshipster.com/" target="_blank" rel="external">NSHipster</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/A_re-introduction_to_JavaScript&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Ja
    
    </summary>
    
      <category term="Tech" scheme="http://keleyundou.github.io/categories/Tech/"/>
    
    
      <category term="Tech" scheme="http://keleyundou.github.io/tags/Tech/"/>
    
  </entry>
  
  <entry>
    <title>APNsåŸç†åŠç¯å¢ƒæ­å»º</title>
    <link href="http://keleyundou.github.io/2017/06/13/APNs%E5%8E%9F%E7%90%86%E5%8F%8A%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    <id>http://keleyundou.github.io/2017/06/13/APNsåŸç†åŠç¯å¢ƒæ­å»º/</id>
    <published>2017-06-13T02:43:51.000Z</published>
    <updated>2017-06-13T03:03:52.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="APNs"><a href="#APNs" class="headerlink" title="APNs"></a>APNs</h1><p>æ¨é€åœ¨æˆ‘ä»¬çš„ç”Ÿæ´»ä¸­æ— å¤„ä¸åœ¨ï¼Œä¸‹é¢å°±å·²å¼€å‘è€…çš„è§’åº¦æ¥ä¸ºä½ ä»‹ç»å…¶å·¥ä½œåŸç†åŠå¦‚ä½•æ­å»ºpush serverç¯å¢ƒã€‚<br>ä¸€æ¬¾APPè¦æƒ³æ”¶åˆ°æ¶ˆæ¯æ¨é€ï¼Œæœ‰ä¸€ä¸ªå¿…è¦å‰æâ€”â€”é…ç½®æ¨é€è¯ä¹¦ã€‚è¿™é‡Œä¸åœ¨ä»‹ç»å¦‚ä½•é…ç½®æ¨é€è¯ä¹¦ã€‚<br><a id="more"></a></p>
<h2 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h2><h3 id="serverä¸‹å‘æ¶ˆæ¯ç»™APP"><a href="#serverä¸‹å‘æ¶ˆæ¯ç»™APP" class="headerlink" title="serverä¸‹å‘æ¶ˆæ¯ç»™APP"></a>serverä¸‹å‘æ¶ˆæ¯ç»™APP</h3><p>Providerå°†æ¶ˆæ¯æ¨é€ç»™APNsï¼ŒAPNså°†æ¶ˆæ¯æ¨é€ç»™Deviceï¼ŒDeviceå†å°†æ¶ˆæ¯é€šçŸ¥ç»™APPã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/741964-e1810ee703aa2a38.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/620" alt="remote_notif_simple_2x.png"></p>
<h3 id="æ¨é€åŸç†"><a href="#æ¨é€åŸç†" class="headerlink" title="æ¨é€åŸç†"></a>æ¨é€åŸç†</h3><p>æ¨é€çš„å‰ææ˜¯Deviceéœ€å‘APNså‘èµ·æ³¨å†Œæ³¨å†Œï¼Œæ³¨å†ŒæˆåŠŸåAPNsä¸‹å‘ä¸€ä¸ªdeviceTokenç»™APPï¼ŒAPPå†å°†å…¶å‘é€ç»™Providerï¼Œå½“æœ‰è¦è¢«æ¨é€çš„æ¶ˆæ¯æ—¶ï¼ŒProviderä¼šå°†æ¶ˆæ¯ç»“åˆdeviceTokenæŒ‰æŒ‡å®šçš„æ¶ˆæ¯æ ¼å¼æ‰“åŒ…å‘é€ç»™APNsï¼Œç„¶åç”±APNsæ¨é€ç»™Deviceã€‚</p>
<h4 id="deviceTokenç”Ÿæˆ"><a href="#deviceTokenç”Ÿæˆ" class="headerlink" title="deviceTokenç”Ÿæˆ"></a>deviceTokenç”Ÿæˆ</h4><p><img src="http://upload-images.jianshu.io/upload_images/741964-bdc4ff3b379c5bd1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/640" alt="token_generation_2x.png"></p>
<ol>
<li>Deviceå‘APNsæ³¨å†Œè¿œç¨‹æ¨é€æœåŠ¡</li>
<li>APNsç»è¿‡å†…éƒ¨æµç¨‹å¤„ç†ç”Ÿæˆä¸€ä¸ªdeviceTokenï¼Œä¸‹å‘ç»™Device</li>
<li>Deviceå°†è·å–åˆ°çš„deviceTokenå‘é€ç»™Provider</li>
</ol>
<h4 id="æ¨é€è¿‡ç¨‹"><a href="#æ¨é€è¿‡ç¨‹" class="headerlink" title="æ¨é€è¿‡ç¨‹"></a>æ¨é€è¿‡ç¨‹</h4><p><img src="http://upload-images.jianshu.io/upload_images/741964-a406a6f2f707d0a1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/640" alt="token_trust_2x.png"></p>
<ol>
<li>APPé“¾æ¥APNsçš„è¿‡ç¨‹ä¸­ï¼ŒAPNsä¼šéªŒè¯deviceTokenï¼Œé“¾æ¥æˆåŠŸåä¼šç»´æŒä¸€ä¸ªTCPé•¿è¿æ¥</li>
<li>Providerå°†æ¶ˆæ¯ç»“åˆdeviceTokenå°åŒ…å‘é€ç»™APNs</li>
<li>APNså°†æ¥æ”¶åˆ°çš„æ¶ˆæ¯å‘é€ç»™deviceTokenè®¾å¤‡</li>
<li>è®¾å¤‡å†å°†æ”¶åˆ°çš„æ¶ˆæ¯é€šçŸ¥ç»™APP</li>
</ol>
<h2 id="serveræ­å»º"><a href="#serveræ­å»º" class="headerlink" title="serveræ­å»º"></a>serveræ­å»º</h2><h3 id="åˆæˆPEMè¯ä¹¦"><a href="#åˆæˆPEMè¯ä¹¦" class="headerlink" title="åˆæˆPEMè¯ä¹¦"></a>åˆæˆPEMè¯ä¹¦</h3><p>å‘½ä»¤è¡Œï¼š</p>
<ul>
<li>ç”Ÿæˆå…¬é’¥</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">openssl x509 -in aps_development.cer -inform der -out PushPublicCert.pem</div></pre></td></tr></table></figure>
<ul>
<li>ç”Ÿæˆç§é’¥</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">openssl pkcs12 -nocerts -out PushPrivateKey.pem -in Push.p12</div></pre></td></tr></table></figure>
<ul>
<li><p>å°†åˆšæ‰ç”Ÿæˆçš„ä¸¤ä¸ªpemæ–‡ä»¶åˆæˆåˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cat PushPublicCert.pem PushPrivateKey.pem &gt; ck.pem</div></pre></td></tr></table></figure>
</li>
<li><p>æµ‹è¯•è¯ä¹¦æ˜¯å¦æ­£å¸¸å·¥ä½œ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">telnet gateway.sandbox.push.apple.com 2195</div></pre></td></tr></table></figure>
</li>
<li><p>åˆ©ç”¨SSLè¯ä¹¦å’Œç§é’¥æ¥è®¾ç½®ä¸€ä¸ªå®‰å…¨çš„é“¾æ¥å»é“¾æ¥è‹¹æœæœåŠ¡å™¨</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">openssl s_client -connect gateway.sandbox.push.apple.com:2195 -cert PushPublicCert.pem -key PushPrivateKey.pem</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">openssl s_client -connect api.push.apple.com:443 -cert PushPublicCert.pem -key PushPrivateKey.pem</div></pre></td></tr></table></figure>
<h3 id="server-code"><a href="#server-code" class="headerlink" title="server code"></a>server code</h3><p>æ—§ï¼š<br>å¼€å‘ç¯å¢ƒï¼šgateway.sandbox.push.apple.com:2195<br>å‘å¸ƒç¯å¢ƒï¼šgateway.push.apple.com:2195</p>
<p>æ–°ï¼š<br>å¼€å‘ç¯å¢ƒï¼šapi.development.push.apple.com:443<br>å‘å¸ƒç¯å¢ƒï¼šapi.push.apple.com:443</p>
<p><a href="https://github.com/keleyundou/APNsProject" target="_blank" rel="external">Download_APNsProject</a></p>
<h2 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h2><p>ä»¥å‰ä»…çŸ¥é“åŸç†ï¼Œè‡³äºæœåŠ¡ç«¯å¦‚ä½•ä¸è‹¹æœæœåŠ¡å™¨é€šä¿¡æ²¡æœ‰ä¸€ç‚¹æ¦‚å¿µã€‚äºæ˜¯åˆ©ç”¨é—²æš‡æ—¶é—´ç¿»é˜…èµ„æ–™å†™äº†ç¯‡å…³äºAPNså¦‚ä½•åœ¨æœåŠ¡ç«¯å‘é€ã€‚äº‰å–ä¸åšå£å¤´çš„å·¨äººè¡ŒåŠ¨çš„çŸ®å­ï¼ˆåˆä¸­çš„æ—¶å€™ç­ä¸»ä»»å°±æ—¶åˆ»å‘Šè¯‰æˆ‘ä»¬è¿™å¥è¯ï¼Œç°åœ¨åŸºæœ¬ä¸ŠæŠ›ä¹‹è„‘å å†·æ±—ï¼å†·æ±—ï¼ï¼‰ã€‚ç›®å‰åªæ˜¯æ•´ç†äº†åŸºäºSSLåè®®çš„TCPé•¿è¿æ¥æµé€šè®¯ï¼ŒHTTP/2åç»­ä¼šæ•´ç†å‡ºæ¥ã€‚</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><blockquote>
<p><a href="https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/APNSOverview.html#//apple_ref/doc/uid/TP40008194-CH8-SW1" target="_blank" rel="external">AppleDocâ€”â€”APNs</a></p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;APNs&quot;&gt;&lt;a href=&quot;#APNs&quot; class=&quot;headerlink&quot; title=&quot;APNs&quot;&gt;&lt;/a&gt;APNs&lt;/h1&gt;&lt;p&gt;æ¨é€åœ¨æˆ‘ä»¬çš„ç”Ÿæ´»ä¸­æ— å¤„ä¸åœ¨ï¼Œä¸‹é¢å°±å·²å¼€å‘è€…çš„è§’åº¦æ¥ä¸ºä½ ä»‹ç»å…¶å·¥ä½œåŸç†åŠå¦‚ä½•æ­å»ºpush serverç¯å¢ƒã€‚&lt;br&gt;ä¸€æ¬¾APPè¦æƒ³æ”¶åˆ°æ¶ˆæ¯æ¨é€ï¼Œæœ‰ä¸€ä¸ªå¿…è¦å‰æâ€”â€”é…ç½®æ¨é€è¯ä¹¦ã€‚è¿™é‡Œä¸åœ¨ä»‹ç»å¦‚ä½•é…ç½®æ¨é€è¯ä¹¦ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://keleyundou.github.io/categories/iOS/"/>
    
    
      <category term="APNs" scheme="http://keleyundou.github.io/tags/APNs/"/>
    
  </entry>
  
  <entry>
    <title>å‘¨åˆŠâ—†ç¬¬äºŒæœŸ</title>
    <link href="http://keleyundou.github.io/2017/06/04/%E5%91%A8%E5%88%8A%E2%97%86%E7%AC%AC%E4%BA%8C%E6%9C%9F/"/>
    <id>http://keleyundou.github.io/2017/06/04/å‘¨åˆŠâ—†ç¬¬äºŒæœŸ/</id>
    <published>2017-06-04T14:56:30.000Z</published>
    <updated>2017-08-21T09:04:14.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ¨èæŠ€æœ¯æ–‡ç« </p>
<ul>
<li><a href="http://www.jianshu.com/p/382593c3b24d" target="_blank" rel="external">å¼€æºIMå·¥ç¨‹â€œè˜‘è‡è¡—TeamTalkâ€çš„ç°çŠ¶ï¼šä¸€åœºæœ‰å§‹æ— ç»ˆçš„å¼€æºç§€</a></li>
<li><a href="http://blog.makeex.com/2015/05/30/the-architecture-of-teamtalk-mac-client/" target="_blank" rel="external">TeamTalk ä¹‹ Mac å®¢æˆ·ç«¯æ¶æ„åˆ†æ</a></li>
<li><a href="http://www.bluefoxah.org/teamtalk/new_tt_deploy.html" target="_blank" rel="external">æ–°ç‰ˆTeamTalkéƒ¨ç½²æ•™ç¨‹</a></li>
<li><a href="http://www.jianshu.com/p/5559f838a7b1" target="_blank" rel="external">æ¥è‡ªè˜‘è‡è¡—çš„å¼€æºIMï¼šTeamTalk</a></li>
<li><a href="http://www.jianshu.com/p/1359165bae4e" target="_blank" rel="external">mac TeamTalkå¼€å‘ç‚¹ç‚¹æ»´æ»´ä¹‹ä¸€â€”â€”DDLogicæ¡†æ¶åˆ†è§£ - åˆ€å“¥çš„æŠ€æœ¯éšç¬”</a></li>
<li><a href="http://www.jianshu.com/p/403ee06a584e" target="_blank" rel="external">iOSé¢è¯•é¢˜å¤§å…¨-ç‚¹äº®ä½ iOSæŠ€èƒ½æ ‘</a></li>
<li><a href="http://tech.glowing.com/cn/implement-kvo/" target="_blank" rel="external">å¦‚ä½•è‡ªå·±åŠ¨æ‰‹å®ç° KVO</a></li>
<li><a href="http://www.cocoachina.com/industry/20130321/5862.html" target="_blank" rel="external">æ‰‹æŠŠæ‰‹æ•™ä½ åšiOSæ¨é€</a></li>
<li><a href="http://www.cnblogs.com/zhouxihi/p/6422252.html" target="_blank" rel="external">è‡ªå·±åŠ¨æ‰‹æ­å»ºè‹¹æœæ¨é€PushæœåŠ¡å™¨</a></li>
</ul>
<!-- [IOSå­¦ä¹ ç¬”è®°40â€”â€”è‹¹æœæ¨é€æœºåˆ¶APNsï¼ˆä¸€ï¼‰](http://blog.csdn.net/ryantang03/article/details/8482259) -->
<!-- [APNs Overview](https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/APNSOverview.html#//apple_ref/doc/uid/TP40008194-CH8-SW1) -->
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ¨èæŠ€æœ¯æ–‡ç« &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.jianshu.com/p/382593c3b24d&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å¼€æºIMå·¥ç¨‹â€œè˜‘è‡è¡—TeamTalkâ€çš„ç°çŠ¶ï¼šä¸€åœºæœ‰å§‹æ— ç»ˆçš„å¼€æºç§€&lt;/a&gt;&lt;
    
    </summary>
    
      <category term="å¼€å‘å‘¨åˆŠ" scheme="http://keleyundou.github.io/categories/%E5%BC%80%E5%8F%91%E5%91%A8%E5%88%8A/"/>
    
    
  </entry>
  
  <entry>
    <title>å‘¨åˆŠâ—†ç¬¬ä¸€æœŸ</title>
    <link href="http://keleyundou.github.io/2017/05/22/%E5%91%A8%E5%88%8A%E2%97%86%E7%AC%AC%E4%B8%80%E6%9C%9F/"/>
    <id>http://keleyundou.github.io/2017/05/22/å‘¨åˆŠâ—†ç¬¬ä¸€æœŸ/</id>
    <published>2017-05-22T02:27:16.000Z</published>
    <updated>2017-06-13T04:14:44.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ¨èæŠ€æœ¯æ–‡ç« </p>
<ul>
<li><a href="https://techblog.toutiao.com/2017/03/28/fullscreen/" target="_blank" rel="external">iOSç«¯ä¸€æ¬¡è§†é¢‘å…¨å±éœ€æ±‚çš„å®ç°</a></li>
<li><a href="http://www.52im.net/thread-228-1-1.html" target="_blank" rel="external">å³æ—¶é€šè®¯éŸ³è§†é¢‘å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè§†é¢‘ç¼–è§£ç ä¹‹ç†è®ºæ¦‚è¿°</a></li>
<li><a href="https://techblog.toutiao.com/2017/03/28/fullscreen/" target="_blank" rel="external">iOSç«¯ä¸€æ¬¡è§†é¢‘å…¨å±éœ€æ±‚çš„å®ç°</a></li>
<li><a href="https://sdk.cn/news/5556" target="_blank" rel="external">ä»ç›´æ’­CDNçš„åŸç†è¯´èµ·,è°ˆå¦‚ä½•è§£å†³å»¶æ—¶å’Œè¿éº¦çš„è€éš¾é¢˜?</a><!-- http://www.infoq.com/cn/presentations/how-to-solve-the-delay-and-mic-problem?utm_source=infoq&utm_campaign=user_page&utm_medium=link --></li>
<li><a href="http://www.infoq.com/cn/news/2014/07/cdn-for-mobile" target="_blank" rel="external">ä¸ºä»€ä¹ˆCDNå¯¹ç§»åŠ¨å®¢æˆ·ç«¯åŠ é€Ÿâ€œæ²¡æœ‰â€æ•ˆæœ</a></li>
<li><a href="http://www.cnblogs.com/Unclefeng/p/6363152.html" target="_blank" rel="external">iOS-ç›´æ’­å¼€å‘(å¼€å‘ä»åº•å±‚åšèµ·)</a></li>
<li><a href="https://mp.weixin.qq.com/s?__biz=MzAwMDU1MTE1OQ==&amp;mid=2653547042&amp;idx=1&amp;sn=26d8728548a6b5b657079eeab121e283&amp;scene=1&amp;srcid=0428msEitG9LJ3JaKGaRCEjg&amp;pass_ticket=CdMA9ZwxlVwo6NU4FLtW1wgLnWFyK3SF6pCUN70Abd7Q4YdSuvxvf03sg%2BrKmDvU#rd" target="_blank" rel="external">ç§»åŠ¨ç›´æ’­æŠ€æœ¯ç§’å¼€ä¼˜åŒ–ç»éªŒ</a></li>
<li><a href="http://www.jianshu.com/p/b142908f5a85" target="_blank" rel="external">Keychainä»‹ç»</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ¨èæŠ€æœ¯æ–‡ç« &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://techblog.toutiao.com/2017/03/28/fullscreen/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;iOSç«¯ä¸€æ¬¡è§†é¢‘å…¨å±éœ€æ±‚çš„å®ç°&lt;/a&gt;&lt;/li&gt;
    
    </summary>
    
      <category term="å¼€å‘å‘¨åˆŠ" scheme="http://keleyundou.github.io/categories/%E5%BC%80%E5%8F%91%E5%91%A8%E5%88%8A/"/>
    
    
  </entry>
  
  <entry>
    <title>éšç¬”ä¹‹Hexoå‡çº§ä¹‹è·¯</title>
    <link href="http://keleyundou.github.io/2016/07/29/%E9%9A%8F%E7%AC%94%E4%B9%8BHexo%E5%8D%87%E7%BA%A7%E4%B9%8B%E8%B7%AF/"/>
    <id>http://keleyundou.github.io/2016/07/29/éšç¬”ä¹‹Hexoå‡çº§ä¹‹è·¯/</id>
    <published>2016-07-29T10:05:20.000Z</published>
    <updated>2016-07-29T10:29:33.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="éšç¬”-Hexo-å‡çº§"><a href="#éšç¬”-Hexo-å‡çº§" class="headerlink" title="éšç¬” Hexo å‡çº§"></a>éšç¬” Hexo å‡çº§</h1><p>æœ€è¿‘åœ¨å°†<code>hexo</code>å‡çº§åˆ°6.2.0çš„è¿‡ç”Ÿæˆä¸­é‡åˆ°äº†ä¸€äº›å°é—®é¢˜ï¼Œè™½ç„¶æ­£å¸¸åŠŸèƒ½éƒ½èƒ½ä½¿ç”¨ï¼Œä½†åœ¨ä½ debugçš„æ—¶å€™<br>ç»ˆç«¯ä¸Šè·³å‡ºé‚£ä¹ˆå‡ ä¸ªæ‰çœ¼çš„é¢œè‰²æ€»æ˜¯ä¸æ˜¯é‚£ä¹ˆç‹ èˆ’æœã€‚å¯¹äºæˆ‘è¿™ç§å®Œç¾ä¸»ä¹‰è€…å¿…ç„¶è¦å°†å…¶æŠ¹æ€ã€‚</p>
<a id="more"></a>
<h2 id="0x00"><a href="#0x00" class="headerlink" title="0x00"></a>0x00</h2><blockquote>
<p><code>nodejs</code>ä¸­æ–‡ç½‘ <a href="http://nodejs.cn/" target="_blank" rel="external">http://nodejs.cn/</a> å‡çº§ <code>node</code>è‡³<code>v6.2.0</code></p>
<p><code>npm update</code> æ›´æ–° <code>node_modules</code> è¿™ä¸ªæ¯”è¾ƒæ‰‹è´± æ²¡æ›´æ–°ç›¸å…³ç»„ä»¶è€Œæ˜¯æ›´æ–°äº†æ‰€æœ‰çš„<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt; &#123; [Error: Cannot find module &apos;./build/default/DTraceProviderBindings&apos;] code: &apos;MODULE_NOT_FOUND&apos; &#125;</div><div class="line">&gt; &#123; [Error: Cannot find module &apos;./build/Debug/DTraceProviderBindings&apos;] code: &apos;MODULE_NOT_FOUND&apos; &#125;</div><div class="line">&gt;</div></pre></td></tr></table></figure></p>
<p><code>npm install hexo --no-optional</code>ä¸å¥½ä½¿</p>
<p>æ›´æ¢<code>npm</code>æ·˜å®é•œåƒ:<a href="https://npm.taobao.org" target="_blank" rel="external">https://npm.taobao.org</a></p>
<p>è§£å†³æ–¹æ¡ˆï¼š<a href="https://github.com/trentm/node-bunyan/issues/216" target="_blank" rel="external">https://github.com/trentm/node-bunyan/issues/216</a></p>
<p><code>ERROR Plugin load failed: hexo-renderer-sass</code></p>
<p>ç§»é™¤æ­¤æ¨¡å—ï¼Œç”¨<code>cnpm</code>æŒ‡ä»¤é‡æ–°å®‰è£…<br><a href="http://www.rockcoding.com/2016/03/02/hexo/" target="_blank" rel="external">http://www.rockcoding.com/2016/03/02/hexo/</a><br><a href="https://chenyiqiao.gitbooks.io/documentation_for_npm/content/install_packages.html" target="_blank" rel="external">https://chenyiqiao.gitbooks.io/documentation_for_npm/content/install_packages.html</a></p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;éšç¬”-Hexo-å‡çº§&quot;&gt;&lt;a href=&quot;#éšç¬”-Hexo-å‡çº§&quot; class=&quot;headerlink&quot; title=&quot;éšç¬” Hexo å‡çº§&quot;&gt;&lt;/a&gt;éšç¬” Hexo å‡çº§&lt;/h1&gt;&lt;p&gt;æœ€è¿‘åœ¨å°†&lt;code&gt;hexo&lt;/code&gt;å‡çº§åˆ°6.2.0çš„è¿‡ç”Ÿæˆä¸­é‡åˆ°äº†ä¸€äº›å°é—®é¢˜ï¼Œè™½ç„¶æ­£å¸¸åŠŸèƒ½éƒ½èƒ½ä½¿ç”¨ï¼Œä½†åœ¨ä½ debugçš„æ—¶å€™&lt;br&gt;ç»ˆç«¯ä¸Šè·³å‡ºé‚£ä¹ˆå‡ ä¸ªæ‰çœ¼çš„é¢œè‰²æ€»æ˜¯ä¸æ˜¯é‚£ä¹ˆç‹ èˆ’æœã€‚å¯¹äºæˆ‘è¿™ç§å®Œç¾ä¸»ä¹‰è€…å¿…ç„¶è¦å°†å…¶æŠ¹æ€ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="éšç¬”" scheme="http://keleyundou.github.io/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
      <category term="Hexo" scheme="http://keleyundou.github.io/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>iOSå¼€å‘ä¹‹æ­£åˆ™å…¥é—¨</title>
    <link href="http://keleyundou.github.io/2016/07/28/iOS%E5%BC%80%E5%8F%91%E4%B9%8B%E6%AD%A3%E5%88%99%E5%85%A5%E9%97%A8/"/>
    <id>http://keleyundou.github.io/2016/07/28/iOSå¼€å‘ä¹‹æ­£åˆ™å…¥é—¨/</id>
    <published>2016-07-28T09:15:47.000Z</published>
    <updated>2016-07-29T03:11:13.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h2><ul>
<li><code>&#39;^&#39;</code> ã€<code>&#39;$&#39;</code> åˆ†åˆ«è¡¨ç¤ºåŒ¹é…å­—ç¬¦ä¸²çš„å¼€å§‹å’Œç»“æŸ</li>
</ul>
<p>eg: <code>&quot;^one&quot;</code></p>
<blockquote>
<p>ä»¥oneå¼€å¤´çš„å­—ç¬¦ä¸²</p>
</blockquote>
<p>eg: <code>&quot;two$&quot;</code></p>
<blockquote>
<p>ä»¥twoç»“å°¾çš„å­—ç¬¦ä¸²</p>
</blockquote>
<p>eg: <code>&quot;^apple$&quot;</code></p>
<blockquote>
<p>ä»¥<code>apple</code>å¼€å¤´å’Œç»“å°¾çš„å­—ç¬¦ä¸²</p>
</blockquote>
<p>eg: <code>&quot;banana&quot;</code></p>
<blockquote>
<p>è¡¨ç¤ºåŒ…å«<code>banana</code>çš„å­—ç¬¦ä¸²</p>
</blockquote>
<a id="more"></a>
<ul>
<li><code>&#39;*&#39;</code>ã€<code>&#39;+&#39;</code>ã€<code>&#39;?&#39;</code> åˆ†åˆ«è¡¨ç¤º[0, +âˆ), [1, +âˆ), [0,1]</li>
</ul>
<p>eg: <code>&quot;ab*&quot;</code></p>
<blockquote>
<p>å­—ç¬¦ä¸²ä¸­æœ‰ä¸€ä¸ª<code>a</code>å…¶åè·Ÿç€é›¶æˆ–å¤šä¸ª<code>b</code></p>
</blockquote>
<p>eg: <code>&quot;ab+&quot;</code></p>
<blockquote>
<p>å­—ç¬¦ä¸²ä¸­æœ‰ä¸€ä¸ª<code>a</code>å…¶åè·Ÿç€ä¸€æˆ–å¤šä¸ª<code>b</code></p>
</blockquote>
<p>eg: <code>&quot;ab?&quot;</code></p>
<blockquote>
<p>å­—ç¬¦ä¸²ä¸­æœ‰ä¸€ä¸ª<code>a</code>å…¶åè·Ÿç€é›¶æˆ–å¤šä¸ª<code>b</code></p>
</blockquote>
<p>eg: <code>&quot;a?b+$&quot;</code></p>
<blockquote>
<p>å­—ç¬¦ä¸²ä¸­çš„ç»“å°¾æœ€å¤šæœ‰ä¸€ä¸ª<code>a</code>ä¸”å…¶åè·Ÿç€è‡³å°‘æœ‰ä¸€ä¸ª<code>b</code></p>
</blockquote>
<ul>
<li><code>&#39;{}&#39;</code> è¡¨ç¤ºä¸€ä¸ªé‡å¤çš„èŒƒå›´</li>
</ul>
<p>eg: <code>&quot;ab{4}&quot;</code></p>
<blockquote>
<p>å­—ç¬¦ä¸²ä¸­æœ‰ä¸€ä¸ª<code>a</code>å…¶åè·Ÿç€4ä¸ª<code>b</code></p>
</blockquote>
<p>eg: <code>&quot;ab{1,}&quot;</code></p>
<blockquote>
<p>å­—ç¬¦ä¸²ä¸­æœ‰ä¸€ä¸ª<code>a</code>å…¶åè·Ÿç€è‡³å°‘ä¸€ä¸ª<code>b</code></p>
</blockquote>
<p>eg: <code>&quot;ab{3,4}&quot;</code></p>
<blockquote>
<p>å­—ç¬¦ä¸²ä¸­æœ‰ä¸€ä¸ª<code>a</code>å…¶åè·Ÿç€3åˆ°4ä¸ª<code>b</code></p>
</blockquote>
<hr>
<blockquote>
<p>PS:</p>
<p><code>&#39;*&#39;</code> === {0, +âˆ}</p>
<p><code>&#39;+&#39;</code> === {1, +âˆ}</p>
<p><code>&#39;?&#39;</code> === {0, 1}</p>
</blockquote>
<hr>
<ul>
<li><code>&#39;|&#39;</code> è¡¨ç¤ºæˆ–</li>
</ul>
<p>eg: <code>&quot;a|b&quot;</code></p>
<blockquote>
<p>å­—ç¬¦ä¸²ä¸­å­˜åœ¨<code>a</code>æˆ–<code>b</code>ï¼Œä¸¤è€…ä¸èƒ½åŒæ—¶å­˜åœ¨</p>
</blockquote>
<p>eg: <code>&quot;(a|bcd)ef&quot;</code></p>
<blockquote>
<p>è¡¨ç¤ºâ€aefâ€æˆ–â€bcdefâ€</p>
</blockquote>
<p>eg: <code>&quot;(a|b)*c&quot;</code></p>
<blockquote>
<p>å­—ç¬¦ä¸²ä¸­æ··æœ‰é›¶æˆ–å¤šä¸ª<code>a</code> <code>b</code>ï¼Œç´§è·Ÿ<code>c</code></p>
</blockquote>
<ul>
<li><code>&#39;[]&#39;</code> è¡¨ç¤ºæ–¹æ‹¬å·å†…é€‰æ‹©1-Nä¸ªç¬¦åˆè¯­æ³•çš„å­—ç¬¦æœ‰ä¸”ä»…é€‰ä¸€ä¸ª</li>
</ul>
<p>eg: <code>&quot;[ab]&quot;</code></p>
<blockquote>
<p>å­—ç¬¦ä¸²ä¸­æœ‰ä¸€ä¸ª<code>a</code>æˆ–<code>b</code> === â€œa|bâ€</p>
</blockquote>
<p>eg: <code>&quot;[a-d]&quot;</code></p>
<blockquote>
<p>å­—ç¬¦ä¸²ä¸­å«æœ‰ä¸€ä¸ª<code>a</code>åˆ°<code>d</code>çš„å­—æ¯</p>
</blockquote>
<p>eg: <code>&quot;^[a-zA-Z]&quot;</code></p>
<blockquote>
<p>å­—ç¬¦ä¸²å·²å­—æ¯å¼€å¤´</p>
</blockquote>
<p>eg: <code>&quot;[0-9]a&quot;</code></p>
<blockquote>
<p>å­—æ¯<code>a</code>çš„å‰é¢å«æœ‰ä¸€ä¸ªæ•°å­—</p>
</blockquote>
<p>eg: <code>&quot;[a-zA-Z0-9]$&quot;</code></p>
<blockquote>
<p>å­—ç¬¦ä¸²ä»¥ä¸€ä¸ªå­—æ¯æ•°å­—ç»“æŸ</p>
</blockquote>
<ul>
<li><code>&#39;.&#39;</code> è¡¨ç¤ºåŒ¹é…é™¤æ¢è¡Œï¼ˆ\r\nï¼‰ä¹‹å¤–çš„å•ä¸ªå­—ç¬¦</li>
</ul>
<p>eg: <code>&quot;a.[a-z]&quot;</code></p>
<blockquote>
<p>å­—ç¬¦ä¸²ä¸­æœ‰ä¸€ä¸ª<code>a</code>åé¢è·Ÿç€ä¸€ä¸ªä»»æ„å­—ç¬¦å’Œä¸€ä¸ªå°å†™å­—æ¯</p>
</blockquote>
<p>eg: <code>&quot;^.{5}$&quot;</code></p>
<blockquote>
<p>ä»»æ„ä¸€ä¸ªé•¿åº¦ä¸º5çš„å­—ç¬¦ä¸²</p>
</blockquote>
<ul>
<li><code>&#39;\num&#39;</code> è¡¨ç¤º<code>&quot;\num&quot;</code>ä¹‹å‰çš„å­—ç¬¦é‡å¤çš„ä¸ªæ•°ï¼Œå…¶ä¸­<code>num</code>è¡¨ç¤ºä¸€ä¸ªæ­£æ•´æ•°ï¼Œ</li>
</ul>
<p>eg: <code>&quot;(.)|1&quot;</code></p>
<blockquote>
<p>2ä¸ªè¿ç»­çš„ç›¸åŒå­—ç¬¦???</p>
</blockquote>
<p>eg: <code>&quot;10\{1,2}&quot;</code></p>
<blockquote>
<p>æ•°å­—1åé¢è·Ÿç€1æˆ–2ä¸ª0</p>
</blockquote>
<p>eg: <code>&quot;0\{3,}&quot;</code></p>
<blockquote>
<p>æ•°å­—0åé¢è·Ÿç€3æˆ–æ›´å¤šçš„0</p>
</blockquote>
<ul>
<li><code>[^x]</code> è¡¨ç¤ºä¸æœŸæœ›å‡ºç°çš„ä¸€ä¸ªå­—ç¬¦(x)</li>
</ul>
<p>eg: <code>&quot;@[^a-zA-Z]@&quot;</code></p>
<blockquote>
<p>ä¸¤ä¸ª<code>@</code>ä¸­ä¸å¸Œæœ›å‡ºç°å­—æ¯</p>
</blockquote>
<ul>
<li><code>&#39;\d&#39;</code> åŒ¹é…ä¸€ä¸ªæ•°å­—å­—ç¬¦ === [0-9]</li>
<li><code>&#39;\D&#39;</code> åŒ¹é…ä¸€ä¸ªéæ•°å­—å­—ç¬¦ === [^0-9]</li>
<li><code>&#39;\w&#39;</code> åŒ¹é…å­—æ¯æ•°å­—ä¸‹åˆ’çº¿ === [a-zA-Z0-9_]</li>
<li><code>&#39;\W&#39;</code> åŒ¹é…éå­—æ¯æ•°å­—ä¸‹åˆ’çº¿æ±‰å­—</li>
</ul>
<hr>
<blockquote>
<p>Reference</p>
<p><a href="http://www.admin10000.com/document/5944.html" target="_blank" rel="external">http://www.admin10000.com/document/5944.html</a></p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;è¯­æ³•&quot;&gt;&lt;a href=&quot;#è¯­æ³•&quot; class=&quot;headerlink&quot; title=&quot;è¯­æ³•&quot;&gt;&lt;/a&gt;è¯­æ³•&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;&amp;#39;^&amp;#39;&lt;/code&gt; ã€&lt;code&gt;&amp;#39;$&amp;#39;&lt;/code&gt; åˆ†åˆ«è¡¨ç¤ºåŒ¹é…å­—ç¬¦ä¸²çš„å¼€å§‹å’Œç»“æŸ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;eg: &lt;code&gt;&amp;quot;^one&amp;quot;&lt;/code&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä»¥oneå¼€å¤´çš„å­—ç¬¦ä¸²&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;eg: &lt;code&gt;&amp;quot;two$&amp;quot;&lt;/code&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä»¥twoç»“å°¾çš„å­—ç¬¦ä¸²&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;eg: &lt;code&gt;&amp;quot;^apple$&amp;quot;&lt;/code&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä»¥&lt;code&gt;apple&lt;/code&gt;å¼€å¤´å’Œç»“å°¾çš„å­—ç¬¦ä¸²&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;eg: &lt;code&gt;&amp;quot;banana&amp;quot;&lt;/code&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è¡¨ç¤ºåŒ…å«&lt;code&gt;banana&lt;/code&gt;çš„å­—ç¬¦ä¸²&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="çç¢æ‚è®°" scheme="http://keleyundou.github.io/categories/%E7%90%90%E7%A2%8E%E6%9D%82%E8%AE%B0/"/>
    
    
      <category term="æ­£åˆ™" scheme="http://keleyundou.github.io/tags/%E6%AD%A3%E5%88%99/"/>
    
  </entry>
  
  <entry>
    <title>iOS8 App Groups æ•°æ®å…±äº«</title>
    <link href="http://keleyundou.github.io/2016/04/15/iOS8-App-Groups-%E6%95%B0%E6%8D%AE%E5%85%B1%E4%BA%AB/"/>
    <id>http://keleyundou.github.io/2016/04/15/iOS8-App-Groups-æ•°æ®å…±äº«/</id>
    <published>2016-04-15T06:09:44.000Z</published>
    <updated>2016-04-15T06:33:17.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒAPPä¹‹é—´å¾ˆéš¾ç›´æ¥é€šä¿¡ï¼Œå³ä¾¿æ˜¯<code>AppExtension</code> ä¸<code>host App</code> ä¹‹é—´ä¹Ÿä¸èƒ½ç›´æ¥é€šä¿¡ã€‚äº‹æ— ç»å¯¹ï¼ŒAPPä¹‹é—´çš„æ•°æ®å…±äº«æœ‰2ç§æ–¹æ³•ï¼š</p>
<ul>
<li>KeyChain</li>
<li>App Groups</li>
</ul>
<p>ä¸‹é¢æˆ‘ä»¬å°±è®²è®²å¦‚ä½•é€šè¿‡<code>App Groups</code>è¿™ä¸ªåŠŸèƒ½è¿›è¡ŒAPPä¹‹é—´é€šä¿¡çš„ã€‚<br><a id="more"></a></p>
<h2 id="Step-1-åˆ›å»ºä¸€ä¸ªå·¥ç¨‹"><a href="#Step-1-åˆ›å»ºä¸€ä¸ªå·¥ç¨‹" class="headerlink" title="Step 1 åˆ›å»ºä¸€ä¸ªå·¥ç¨‹"></a>Step 1 åˆ›å»ºä¸€ä¸ªå·¥ç¨‹</h2><p>ç”¨<code>Xcode</code>åˆ›å»º<code>Single View Application</code>ä¸‹çš„ä¸€ä¸ªå·¥ç¨‹ï¼Œå·¥ç¨‹åæ˜¯<code>CBAppGroupSimeple</code>ã€‚å¦‚å›¾ï¼š</p>
<p align="center"><br><img src="http://7pn4xs.com1.z0.glb.clouddn.com/%E6%88%AA%E5%9B%BE%202016-04-15%2011%E6%97%B618%E5%88%8620%E7%A7%92.png" width="400" alt="åˆ›å»ºå·¥ç¨‹"><br></p>

<h2 id="Step-2-æ·»åŠ AppGroup"><a href="#Step-2-æ·»åŠ AppGroup" class="headerlink" title="Step 2 æ·»åŠ AppGroup"></a>Step 2 æ·»åŠ <code>AppGroup</code></h2><p>è¿›å…¥<code>Target</code>ï¼Œé€‰æ‹©<code>Capabilities</code> -&gt; <code>App Groups</code>ï¼ˆä½¿ç”¨æ­¤åŠŸèƒ½çš„å‰ææ˜¯å…·å¤‡å¼€å‘è€…è´¦å·ï¼‰ã€‚æ¥ä¸‹æ¥ï¼Œç‚¹å‡»<code>+</code>æ·»åŠ ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ï¼Œä¾‹å¦‚ï¼š<code>group.xxx.xxx</code>ï¼Œç„¶åå‹¾ä¸Šå·¦ä¾§çš„å¤é€‰æ¡†ã€‚å¦‚å›¾ï¼š</p>
<p>å›¾ä¸€ï¼š</p>
<p align="center"><br><img src="http://7pn4xs.com1.z0.glb.clouddn.com/%E6%88%AA%E5%9B%BE%202016-04-15%2011%E6%97%B645%E5%88%8607%E7%A7%92.png" ,="" width="600" alt="é€‰æ‹©å¼€å‘è€…è´¦å·"><br></p>

<p>å›¾äºŒï¼š</p>
<p align="center"><br><img src="http://7pn4xs.com1.z0.glb.clouddn.com/%E6%88%AA%E5%9B%BE%202016-04-15%2011%E6%97%B647%E5%88%8610%E7%A7%92.png" ,="" width="400" alt="æ·»åŠ group"><br></p>

<h2 id="Step-3-å…±äº«æ•°æ®"><a href="#Step-3-å…±äº«æ•°æ®" class="headerlink" title="Step 3 å…±äº«æ•°æ®"></a>Step 3 å…±äº«æ•°æ®</h2><p>åœ¨å®ç°æ­¤åŠŸèƒ½å‰ï¼Œæˆ‘ä»¬å…ˆç®€å•å¸ƒå±€ä¸€ä¸‹<code>UI</code>ã€‚å¾€<code>Storyboard</code>ä¸Šæ·»åŠ ä¸€ä¸ª<code>UITextField</code>å’Œä¸€ä¸ª<code>UIButton</code>ã€‚ç»™<code>UIButton</code>æ·»åŠ ä¸€ä¸ªç‚¹å‡»äº‹ä»¶<code>saveAction:</code>ã€‚å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">IBAction</span>)saveAction:(<span class="keyword">id</span>)sender</div><div class="line">&#123;</div><div class="line">    <span class="built_in">NSUserDefaults</span> *userDefaults = [[<span class="built_in">NSUserDefaults</span> alloc] initWithSuiteName:<span class="string">@"group.colabean.simeple.appgroup"</span>];</div><div class="line">    </div><div class="line">    [userDefaults setObject:<span class="keyword">self</span>.inputTextField.text forKey:<span class="string">@"kCBSharedData"</span>];</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>Run</code>ä¸€ä¸‹å·¥ç¨‹ï¼Œè¾“å…¥ä¸€äº›æ•°æ®ï¼Œç‚¹å‡»<code>Save</code>æŒ‰é’®ã€‚</p>
<h2 id="Step-4-è·å–å…±äº«çš„æ•°æ®"><a href="#Step-4-è·å–å…±äº«çš„æ•°æ®" class="headerlink" title="Step 4 è·å–å…±äº«çš„æ•°æ®"></a>Step 4 è·å–å…±äº«çš„æ•°æ®</h2><p>æˆ‘ä»¬é‡å¤<code>Step 1</code>ï¼Œ<code>Step 2</code>ï¼Œåˆ›å»ºå¦ä¸€ä¸ª<code>Simple</code>ï¼Œå·¥ç¨‹åæ˜¯<code>CBAppGroupOtherSimple</code>ï¼Œæ·»åŠ <code>AppGroup</code>å¹¶å°†ä¸Šä¸€ä¸ªå·¥ç¨‹ä¸­åˆ›å»ºçš„å”¯ä¸€æ ‡è¯†ï¼ˆ<code>group.colabean.simeple.appgroup</code>ï¼‰å‹¾ä¸Šã€‚</p>
<p>åœ¨æˆ‘ä»¬çš„<code>viewDidLoad:</code>ä¸­è·å–å…±äº«çš„æ•°æ®ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</div><div class="line">    [<span class="keyword">super</span> viewDidLoad];</div><div class="line">    <span class="comment">// Do any additional setup after loading the view, typically from a nib.</span></div><div class="line">    <span class="built_in">NSUserDefaults</span> *userDefaults = [[<span class="built_in">NSUserDefaults</span> alloc] initWithSuiteName:<span class="string">@"group.colabean.simeple.appgroup"</span>];</div><div class="line">    <span class="built_in">NSString</span> *content = [userDefaults objectForKey:<span class="string">@"kCBSharedData"</span>];</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"shared data: %@"</span>, content);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>Run</code>ä¸€ä¸‹å·¥ç¨‹ï¼Œå°†ä¼šç«‹å³è·å–åˆ°ä»<code>CBAppGroupSimple</code>å·¥ç¨‹ä¸­å…±äº«çš„æ•°æ®ã€‚å¦‚å›¾ï¼š</p>
<p align="center"><br><img src="http://7pn4xs.com1.z0.glb.clouddn.com/%E6%88%AA%E5%9B%BE%202016-04-15%2012%E6%97%B610%E5%88%8658%E7%A7%92.png" width="500" alt="æ‰“å°ç»“æœ"><br></p>

<p>å°±æ˜¯è¿™ä¹ˆç®€å•ä»»æ€§ã€‚</p>
<p><a href="https://github.com/keleyundou/ColaBeanSimple/tree/master/App%20Groups" target="_blank" rel="external">DownLoadSimple</a></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><blockquote>
<p><a href="http://www.theappguruz.com/blog/ios8-app-groups" target="_blank" rel="external">http://www.theappguruz.com/blog/ios8-app-groups</a></p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒAPPä¹‹é—´å¾ˆéš¾ç›´æ¥é€šä¿¡ï¼Œå³ä¾¿æ˜¯&lt;code&gt;AppExtension&lt;/code&gt; ä¸&lt;code&gt;host App&lt;/code&gt; ä¹‹é—´ä¹Ÿä¸èƒ½ç›´æ¥é€šä¿¡ã€‚äº‹æ— ç»å¯¹ï¼ŒAPPä¹‹é—´çš„æ•°æ®å…±äº«æœ‰2ç§æ–¹æ³•ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;KeyChain&lt;/li&gt;
&lt;li&gt;App Groups&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸‹é¢æˆ‘ä»¬å°±è®²è®²å¦‚ä½•é€šè¿‡&lt;code&gt;App Groups&lt;/code&gt;è¿™ä¸ªåŠŸèƒ½è¿›è¡ŒAPPä¹‹é—´é€šä¿¡çš„ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://keleyundou.github.io/categories/iOS/"/>
    
    
      <category term="Tutorial" scheme="http://keleyundou.github.io/tags/Tutorial/"/>
    
      <category term="AppGroups" scheme="http://keleyundou.github.io/tags/AppGroups/"/>
    
  </entry>
  
  <entry>
    <title>è¯‘ï¼šå®ç°Twitter UIæ•ˆæœ</title>
    <link href="http://keleyundou.github.io/2016/03/30/%E5%AE%9E%E7%8E%B0Twitter-UI%E6%95%88%E6%9E%9C/"/>
    <id>http://keleyundou.github.io/2016/03/30/å®ç°Twitter-UIæ•ˆæœ/</id>
    <published>2016-03-29T17:49:11.000Z</published>
    <updated>2016-04-01T12:33:40.000Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ä½¿ç”¨<code>Twitter</code>çš„APPåï¼Œæˆ‘å·²å¼€å‘è€…çš„è§†è§‰å¹¶æ³¨æ„åˆ°æ•´ä½“ä¸éƒ¨åˆ†ä¹‹é—´ç›¸äº’åè°ƒæ˜¯ä»¶æå…¶æœ‰æ„æ€çš„äº‹æƒ…ã€‚è¿™å¼•èµ·äº†æˆ‘çš„å¥½å¥‡å¿ƒï¼šè¿™æ˜¯æ€ä¹ˆåšåˆ°çš„ï¼Ÿ</p>
<p>è®©æˆ‘ä»¬å…·ä½“åœ°è®¨è®ºä¸‹è¿™ä¸ªè§†å›¾å¸ƒå±€ï¼šæ­¤æ•ˆæœä¸ä¼˜é›…å—ï¼Ÿå®ƒçœ‹èµ·å¼€å°±åƒæœ¬åº”å¦‚æ­¤ï¼Œä½†ä½ ä»”ç»†çš„è§‚å¯Ÿåå°±ä¼šå‘ç°æ›´å¤šã€‚éšç€<code>Scrollview</code>çš„åç§»ï¼Œå›¾å±‚çš„è¦†ç›–ï¼ŒåŠ¨ä½œå’Œæ¯”ä¾‹ç¼©æ”¾æ˜¯é‚£ä¹ˆçš„å¹³æ»‘è¿è´¯â€¦ â€¦ å®åœ¨æ˜¯å¤ªå–œæ¬¢è¿™ä¸ªæ•ˆæœäº†ã€‚</p>
<p>Soï¼Œå°±è®©æˆ‘ä»¬ç«‹åˆ»å®ç°è¿™ä¸ªæ•ˆæœå§ã€‚</p>
<p>é¦–å…ˆï¼Œå…ˆçœ‹ä¸‹æœ€ç»ˆæ•ˆæœï¼š</p>
<p align="center"><br><img src="http://7pn4xs.com1.z0.glb.clouddn.com/colabeanTwitterProfile.gif" width="375" height="667"><br></p>

<a id="more"></a>
<h3 id="ç»“æ„æè¿°"><a href="#ç»“æ„æè¿°" class="headerlink" title="ç»“æ„æè¿°"></a>ç»“æ„æè¿°</h3><hr>
<p>åœ¨å†™ä»£ç ä¹‹å‰ï¼Œæˆ‘æƒ³ç»™ä½ ä¸€ä¸ªå…³äºå¦‚ä½•æ„å»ºUIçš„ç®€å•æ„è§ã€‚</p>
<p>æ‰“å¼€<code>Main.storyboard</code>æ–‡ä»¶ï¼Œåœ¨è¿™ä¸ªæ§åˆ¶å™¨é‡Œé¢ä½ ä¼šå‘ç°2ä¸ªä¸»è¦çš„å¯¹è±¡ã€‚ç¬¬ä¸€ä¸ªæ˜¯ä¸€ä¸ªå‘ˆç°<code>Header</code>çš„è§†å›¾ï¼Œç¬¬äºŒä¸ªæ˜¯<code>Scrollview</code>ï¼Œå®ƒåŒ…å«äº†<code>Avatar</code>å’Œè´¦å·ç›¸å…³çš„å…¶ä»–ä¿¡æ¯ï¼Œå¦‚ï¼š<code>username</code>æ ‡ç­¾å’Œ<code>Follow</code>æŒ‰é’®ã€‚è¿˜æœ‰ä¸€ä¸ªè¢«å«åš<code>Sizer</code>çš„è§†å›¾ï¼Œå®ƒæ˜¯ä¸ºäº†ç¡®ä¿<code>Scrollview</code>æ‹¥æœ‰è¶³å¤Ÿå¤§çš„å‚ç›´æ»‘åŠ¨çš„ç©ºé—´ã€‚</p>
<p>å°±åƒä½ çœ‹åˆ°çš„é‚£æ ·ï¼Œè¿™ä¸ªç»“æ„éå¸¸çš„ç®€å•ã€‚ç¨å¾®æ³¨æ„ä¸€ä¸‹å°±å¯å‘ç°<code>Header</code>çš„å¤–éƒ¨æ”¾ç½®äº†ä¸€ä¸ª<code>Scrollview</code>ï¼Œè€Œä¸æ˜¯ä¸å…¶ä»–å…ƒç´ æ”¾ç½®åœ¨ä¸€èµ·ã€‚è™½ç„¶æ²¡å¿…ä¸¥æ ¼å¦‚æ­¤ï¼Œä½†è¿™æ ·ä¼šä½¿å®ƒçš„ç»“æ„å˜åŠ¨æ›´åŠ çµæ´»ã€‚</p>
<h3 id="ç¼–ç "><a href="#ç¼–ç " class="headerlink" title="ç¼–ç "></a>ç¼–ç </h3><hr>
<p>å¦‚æœä½ ä»”ç»†çš„çœ‹äº†æœ€åçš„åŠ¨ç”»ï¼Œå°†ä¼šæ³¨æ„åˆ°ä½ è¦ç®¡ç†2ä¸ªä¸åŒçš„åŠ¨ä½œï¼š</p>
<ol>
<li>å‘ä¸‹æ‹‰ï¼ˆå½“<code>Scrollview</code>å·²ç»åœé åœ¨å±å¹•çš„é¡¶éƒ¨çš„æ—¶å€™ï¼‰</li>
<li>ä¸Šä¸‹æ»‘åŠ¨</li>
</ol>
<p>ç¬¬äºŒä¸ªåŠ¨ä½œå¯ä»¥ç»†åˆ†ä¸º4ä¸ªå°æ­¥éª¤ï¼š</p>
<ul>
<li>å‘ä¸Šæ»‘åŠ¨ï¼Œä¸€ç›´åˆ°å¯¼èˆªæ¡é»˜è®¤çš„å¤§å°å¹¶åœé åœ¨å±å¹•çš„é¡¶éƒ¨ã€‚</li>
<li>å‘ä¸Šæ»‘åŠ¨ï¼Œ<code>Avatar</code>å¼€å§‹é€æ¸å˜å°ã€‚</li>
<li>å½“<code>Header</code>è¢«å›ºå®šåï¼Œ<code>Avatar</code>ä¼šç§»åŠ¨åˆ°å®ƒçš„ä¸‹è¾¹ã€‚</li>
<li>å½“<code>username</code>æ ‡ç­¾æŠµè¾¾<code>Header</code>çš„é¡¶éƒ¨æ—¶ï¼Œä¸€ä¸ªæ–°çš„ç™½è‰²<code>Label</code>å°†ä¼šä»<code>Header</code>ä¸­å¿ƒçš„åº•éƒ¨å±•ç°ã€‚è¿™æ—¶<code>Header</code>çš„èƒŒæ™¯å›¾ç‰‡å°†ä¼šç”¨é«˜æ–¯æ¨¡ç³Šæ¸²æŸ“ã€‚</li>
</ul>
<p>æ‰“å¼€<code>ViewController</code>è®©æˆ‘ä»¬ä¸€ä¸ªä¸€ä¸ªçš„å®ç°è¿™äº›æ­¥éª¤ã€‚</p>
<h3 id="æ„å»ºç®¡ç†è€…"><a href="#æ„å»ºç®¡ç†è€…" class="headerlink" title="æ„å»ºç®¡ç†è€…"></a>æ„å»ºç®¡ç†è€…</h3><hr>
<p>é¦–å…ˆè¦åšçš„äº‹æƒ…å¾ˆæ˜æ˜¾ï¼Œå°±æ˜¯è·å–å…³äº<code>Scrollview</code>çš„åç§»é‡<code>offset</code>ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>UIScrollViewDelegate</code>åè®®å®ç°<code>scrollViewDidScroll</code>æ–¹æ³•ã€‚</p>
<p>åœ¨ä¸€ä¸ª<code>View</code>ä¸Šæ‰§è¡Œæœ€ç®€å•åœ°åŠ¨ç”»æ–¹å¼æ˜¯ä½¿ç”¨<code>Core Animation</code>é€æ¸çš„è¿›è¡Œä¸‰ç»´å˜æ¢ï¼Œå¹¶ç»™<code>layer.transform</code>èµ‹äºˆæ–°å€¼ã€‚</p>
<p>å…³äº<code>Core Animation</code>å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« </p>
<p><a href="http://www.thinkandbuild.it/playing-around-with-core-graphics-core-animation-and-touch-events-part-1/" target="_blank" rel="external">http://www.thinkandbuild.it/playing-around-with-core-graphics-core-animation-and-touch-events-part-1/</a></p>
<p>è¿™äº›æ˜¯<code>scrollViewDidScroll:</code>æ–¹æ³•çš„ç¬¬ä¸€éƒ¨åˆ†</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">CGFloat</span> offset = scrollView.contentOffset.y;</div><div class="line"><span class="built_in">CATransform3D</span> avatarTransform = <span class="built_in">CATransform3DIdentity</span>;</div><div class="line"><span class="built_in">CATransform3D</span> headerTransform = <span class="built_in">CATransform3DIdentity</span>;</div></pre></td></tr></table></figure>
<p>åœ¨è¿™é‡Œæˆ‘ä»¬è·å–ä¸€ä¸ªå½“å‰å‚ç›´åç§»é‡<code>offset</code>ï¼Œå¹¶åˆå§‹åŒ–2ä¸ª<code>CATransform3D</code>å˜é‡ã€‚</p>
<h3 id="ä¸‹æ‹‰"><a href="#ä¸‹æ‹‰" class="headerlink" title="ä¸‹æ‹‰"></a>ä¸‹æ‹‰</h3><hr>
<p>ä¸‹æ‹‰åŠ¨ä½œçš„ç®¡ç†ï¼š<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (offset &lt; <span class="number">0</span>) &#123;</div><div class="line">        <span class="built_in">CGFloat</span> headerScaleFactor = -(offset) / header.bounds.size.height;</div><div class="line">        <span class="built_in">CGFloat</span> headerSizevariation = (header.bounds.size.height * (<span class="number">1.0</span> + headerScaleFactor) - header.bounds.size.height) / <span class="number">2.0</span>;</div><div class="line">        headerTransform = <span class="built_in">CATransform3DTranslate</span>(headerTransform, <span class="number">0</span>, headerSizevariation, <span class="number">0</span>);</div><div class="line">        headerTransform = <span class="built_in">CATransform3DScale</span>(headerTransform, <span class="number">1.0</span> + headerScaleFactor, <span class="number">1.0</span> + headerScaleFactor, <span class="number">0</span>);</div><div class="line">        header.layer.transform = headerTransform;</div><div class="line">        </div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬æ£€æŸ¥<code>offset</code>æ˜¯å¦ä¸ºè´Ÿæ•°ï¼šç”¨æˆ·åœ¨ä¸‹æ‹‰çš„è¿‡ç¨‹ä¸­ï¼Œå°†ä¼šè¿›å…¥<code>Scrollview</code>çš„å¼¹æ€§åŒºåŸŸã€‚</p>
<p>å‰©ä¸‹çš„ä»£ç å°±æ˜¯ç®€å•çš„æ•°å­¦é€»è¾‘ã€‚</p>
<p><code>Header</code>çš„æ‰©å¤§æ˜¯å› ä¸ºå®ƒçš„ä¸Šè¾¹ç¼˜å›ºå®šäºå±å¹•çš„é¡¶éƒ¨ï¼Œè€Œåº•éƒ¨çš„å›¾ç‰‡åœ¨ç­‰æ¯”ç¼©æ”¾ã€‚</p>
<p><code>the transformation is made by scaling and subsequently translating to the top for a value equal to the size variation of the view.</code>å®é™…ä¸Šï¼Œç§»åŠ¨<code>ImageView</code>å›¾å±‚çš„ä¸­ç‚¹åˆ°é¡¶éƒ¨å¹¶åŒæ—¶ç¼©æ”¾å®ƒï¼Œä½ å¯ä»¥è·å¾—ç›¸åŒçš„æ•ˆæœã€‚</p>
<p align="center"> <img src="http://www.thinkandbuild.it/wp-content/uploads/2015/01/ImageScale.png"></p>

<p><code>headerScaleFactor</code>æ˜¯ç”¨æ¥è¢«è®¡ç®—çš„ä¸€éƒ¨åˆ†ã€‚æˆ‘ä»¬æƒ³ç”¨<code>offset</code>é€‚å½“çš„å¯¹<code>Header</code>è¿›è¡Œç¼©æ”¾ã€‚æ¢å¥è¯è¯´ï¼Œå½“<code>offset</code>æ˜¯<code>Header</code>é«˜åº¦çš„2å€æ—¶ï¼Œ<code>headerScaleFactor</code>å¿…é¡»æ˜¯2.0ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦ç®¡ç†çš„ç¬¬äºŒä¸ªåŠ¨ä½œæ˜¯ä¸Šä¸‹æ»‘åŠ¨ã€‚è®©æˆ‘ä»¬çœ‹çœ‹ï¼Œå¦‚ä½•ä¸€æ­¥æ­¥é€šè¿‡UIçš„ä¸»è¦å…ƒç´ å®Œæˆå˜æ¢çš„ã€‚</p>
<h3 id="å¤´éƒ¨ï¼ˆç¬¬ä¸€é˜¶æ®µï¼‰"><a href="#å¤´éƒ¨ï¼ˆç¬¬ä¸€é˜¶æ®µï¼‰" class="headerlink" title="å¤´éƒ¨ï¼ˆç¬¬ä¸€é˜¶æ®µï¼‰"></a>å¤´éƒ¨ï¼ˆç¬¬ä¸€é˜¶æ®µï¼‰</h3><hr>
<p>å½“å‰çš„<code>offset</code>åº”è¯¥å¤§äº0ã€‚<code>Header</code>åº”è¯¥éš<code>offset</code>è¿›è¡Œå‚ç›´å˜æ¢ï¼Œç›´åˆ°å®ƒæœŸæœ›çš„é«˜åº¦ï¼ˆæˆ‘ä»¬åé¢å°†ä¼šè®²è§£<code>Header</code>çš„é«˜æ–¯æ¨¡ç³Šï¼‰ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">headerTransform = <span class="built_in">CATransform3DTranslate</span>(headerTransform, <span class="number">0</span>, MAX(-offset_HeaderStop, -offset), <span class="number">0</span>);</div></pre></td></tr></table></figure>
<p>è¿™å¥ä»£ç éå¸¸ç®€å•ã€‚æˆ‘ä»¬åªéœ€å®šä¹‰ä¸€ä¸ªè®©<code>Header</code>åœ¨æ­¤åœæ­¢ç§»åŠ¨çš„æœ€å°å€¼ã€‚</p>
<p>è®©æˆ‘æ„Ÿåˆ°ç¾æ„§çš„æ˜¯æˆ‘æ¯”è¾ƒæ‡’ï¼æ‰€ä»¥æˆ‘å†™æ­»äº†ä¸€äº›æ•°å€¼ï¼Œåƒ<code>offset_HeaderStop</code>ã€‚å…¶å®ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¡ç®—UIå…ƒç´ çš„ä½ç½®æ¥è·å–ç›¸åŒçš„æ•ˆæœã€‚ä¸‹æ¬¡æœ‰ç©ºå†æ”¹å§ã€‚</p>
<h3 id="å¤´åƒ"><a href="#å¤´åƒ" class="headerlink" title="å¤´åƒ"></a>å¤´åƒ</h3><hr>
<p><code>Avatar</code>çš„ç¼©æ”¾ä¸æˆ‘ä»¬å¤„ç†ä¸‹æ‹‰çš„é€»è¾‘ä¸€æ ·ï¼Œåªæ˜¯åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå›¾ç‰‡æ˜¯åˆ°è¾¾åº•éƒ¨è€Œä¸æ˜¯é¡¶éƒ¨ã€‚è¿™æ®µä»£ç å’Œä¸Šè¾¹çš„æ¯”è¾ƒç›¸ä¼¼ï¼Œé™¤äº†å‡å°ç¼©æ”¾çš„æ¯”ä¾‹ä¸º1.4ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Avatar -----------</span></div><div class="line"><span class="built_in">CGFloat</span> avatarScaleFactor = MIN(offset_HeaderStop, offset) / avatarImage.bounds.size.height / <span class="number">1.4</span>;</div><div class="line"><span class="built_in">CGFloat</span> avatarSizevariation = (avatarImage.bounds.size.height * (<span class="number">1.0</span> + avatarScaleFactor) - avatarImage.bounds.size.height) / <span class="number">2.0</span>;</div><div class="line">avatarTransform = <span class="built_in">CATransform3DTranslate</span>(avatarTransform, <span class="number">0</span>, avatarSizevariation, <span class="number">0</span>);</div><div class="line">avatarTransform = <span class="built_in">CATransform3DScale</span>(avatarTransform, <span class="number">1.0</span>-avatarScaleFactor, <span class="number">1.0</span>-avatarScaleFactor, <span class="number">0</span>);</div></pre></td></tr></table></figure>
<p>å°±åƒä½ çœ‹åˆ°çš„ï¼Œå½“<code>Header</code>åœæ­¢å˜åŒ–æ—¶ï¼Œæˆ‘ä»¬ç”¨<code>MIN</code>å‡½æ•°æ¥ä½¿<code>Avatar</code>çš„ç¼©æ”¾åœæ­¢ã€‚</p>
<p>æ­¤æ—¶ï¼Œæˆ‘ä»¬æ ¹æ®å½“å‰<code>offset</code>è®¾ç½®æœ€é¡¶å±‚çš„å›¾å±‚ã€‚é™¤é<code>offset</code>å°äºç­‰äº<code>offset_HeaderStop</code>ï¼Œæœ€é¡¶å±‚çš„å›¾å±‚æ˜¯<code>Avatar</code>ï¼Œå¦åˆ™æ˜¯<code>Header</code>ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (offset &lt;= offset_HeaderStop) &#123;</div><div class="line">            <span class="keyword">if</span> (avatarImage.layer.zPosition &lt; header.layer.zPosition) &#123;</div><div class="line">                header.layer.zPosition = <span class="number">0</span>;</div><div class="line">            &#125;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">if</span> (avatarImage.layer.zPosition &gt;= header.layer.zPosition) &#123;</div><div class="line">                header.layer.zPosition = <span class="number">2</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h3 id="ç™½è‰²Label"><a href="#ç™½è‰²Label" class="headerlink" title="ç™½è‰²Label"></a>ç™½è‰²Label</h3><hr>
<p>è¿™æ®µä»£ç æ˜¯ç™½è‰²<code>Label</code>çš„åŠ¨ç”»ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//  ------------ Label</span></div><div class="line"><span class="built_in">CATransform3D</span> labelTransform = <span class="built_in">CATransform3DMakeTranslation</span>(<span class="number">0</span>, MAX(-distance_W_LabelHeader, offset_B_LabelHeader - offset), <span class="number">0</span>);</div><div class="line">headerLabel.layer.transform = labelTransform;</div></pre></td></tr></table></figure>
<p>è¿™é‡Œæœ‰2ä¸ªä»¤æˆ‘æ„Ÿåˆ°ç¾æ„§çš„å˜é‡å€¼ï¼šå½“<code>offset</code>ç­‰äº<code>offset_B_LabelHeader</code>æ—¶ï¼Œé»‘è‰²çš„<code>username</code>æ ‡ç­¾åˆšåˆ°è§¦ç¢°åˆ°<code>Header</code>çš„åº•éƒ¨ã€‚</p>
<p align="center"><br><img src="http://www.thinkandbuild.it/wp-content/uploads/2015/01/shame1.png"><br></p>

<p><code>distance_W_LabelHeader</code>æ˜¯<code>Header</code>åº•éƒ¨ä¸ç™½è‰²<code>Label</code>ç»ˆç‚¹ä¹‹é—´çš„è·ç¦»ã€‚</p>
<p align="center"><br><img src="http://www.thinkandbuild.it/wp-content/uploads/2015/01/shame2.png"><br></p>

<p>è¿™ä¸ªå˜æ¢æ˜¯é€šè¿‡æ­¤é€»è¾‘è®¡ç®—ï¼šé»‘è‰²<code>Label</code>è§¦ç¢°åˆ°<code>Header</code>ï¼Œç™½è‰²<code>Label</code>å°±ä¼šç«‹å³å‡ºç°ï¼Œå¹¶ä¸”åˆ°è¾¾<code>Header</code>ä¸­ç‚¹ä½ç½®å°±åœæ­¢ç§»åŠ¨ã€‚æ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨ä¸‹é¢ä»£ç åˆ›å»º<code>Y</code>å€¼ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">MAX(-distance_W_LabelHeader, offset_B_LabelHeader - offset)</div></pre></td></tr></table></figure>
<h3 id="é«˜æ–¯æ¨¡ç³Š"><a href="#é«˜æ–¯æ¨¡ç³Š" class="headerlink" title="é«˜æ–¯æ¨¡ç³Š"></a>é«˜æ–¯æ¨¡ç³Š</h3><hr>
<p>æœ€åä¸€ä¸ªæ•ˆæœæ˜¯<code>Header</code>çš„æ¨¡ç³Šã€‚ä¸ºäº†å¾—åˆ°åˆé€‚çš„è§£å†³æ–¹æ¡ˆï¼Œæˆ‘ç”¨äº†3ä¸ªä¸åŒçš„åº“â€¦ â€¦ æˆ‘ä¹Ÿå°è¯•è¿‡ç”¨<code>OpenGL ES</code>åˆ›å»ºåŸºç±»ï¼Œä½†å®æ—¶æ›´æ–°æ¨¡ç³Šæ€»æ˜¯éå¸¸ç¼“æ…¢ã€‚</p>
<p>ç„¶åæˆ‘æ„è¯†åˆ°æˆ‘å¯ä»¥å¯¹æ¨¡ç³Šä»…ä»…è®¡ç®—ä¸€æ¬¡ï¼Œå°†ä¸æ¨¡ç³Šå’Œæ¨¡ç³Šçš„å›¾ç‰‡è¿›è¡Œé‡å ï¼Œåªæ˜¯æ”¹å˜<code>alpha</code>å€¼ã€‚æˆ‘éå¸¸ç¡®ä¿¡ï¼Œ<code>Twitter</code>å°±æ˜¯è¿™æ ·åšçš„ã€‚</p>
<p>åœ¨<code>viewDidAppear</code>ä¸­ï¼Œæˆ‘ä»¬è®¡ç®—<code>Header</code>çš„æ¨¡ç³Šå€¼å¹¶éšè—å®ƒï¼Œè®¾ç½®<code>alpha</code>å€¼ä¸º0ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Header - Blurred Image</span></div><div class="line">headerBlurImageView = [[<span class="built_in">UIImageView</span> alloc] initWithFrame:header.bounds];</div><div class="line">headerBlurImageView.image = [[<span class="built_in">UIImage</span> imageNamed:<span class="string">@"header_bg"</span>] blurredImageWithRadius:<span class="number">10</span> iterations:<span class="number">20</span> tintColor:[<span class="built_in">UIColor</span> clearColor]];</div><div class="line">headerBlurImageView.contentMode = <span class="built_in">UIViewContentModeScaleAspectFill</span>;</div><div class="line">headerBlurImageView.alpha = <span class="number">0.0</span>;</div><div class="line">[header insertSubview:headerBlurImageView belowSubview:headerLabel];</div><div class="line">header.clipsToBounds = <span class="literal">YES</span>;</div></pre></td></tr></table></figure>
<p>æ¨¡ç³Šè§†å›¾æ˜¯ç”¨è¿‡<a href="https://github.com/nicklockwood/FXBlurView" target="_blank" rel="external"><code>FXBlurView</code></a>å®ç°çš„ã€‚</p>
<p>åœ¨<code>scrollViewDidScroll:</code>æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬åªéœ€æ ¹æ®<code>offset</code>è®¾ç½®<code>alpha</code>:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//  ------------ Blur</span></div><div class="line">headerBlurImageView.alpha = MIN(<span class="number">1.0</span>, (offset - offset_B_LabelHeader) / distance_W_LabelHeader);</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªè®¡ç®—çš„èƒŒåé€»è¾‘æ˜¯ï¼š<code>alpha</code>æœ€å¤§å€¼æ˜¯1ï¼Œå½“é»‘è‰²<code>Label</code>è§¦ç¢°åˆ°<code>Header</code>æ—¶æ¨¡ç³Šæ•ˆæœå¼€å§‹å‡ºç°ï¼Œå½“ç™½è‰²åˆ°è¾¾æœ€ç»ˆä½ç½®æ—¶ï¼Œä¹Ÿå°†åœæ­¢ç»§ç»­æ¨¡ç³Šã€‚</p>
<p>å°±è¿™æ ·ï¼</p>
<p>æˆ‘å¸Œæœ›ä½ å–œæ¬¢è¿™ä¸ªæ•™ç¨‹ã€‚å­¦ä¹ å¦‚ä½•é‡ç°è¿™ç§å¾ˆæ£’çš„åŠ¨ç”»æ•ˆæœå¯¹æˆ‘æ¥è¯´æ˜¯å¾ˆå¤§çš„ä¹è¶£ã€‚</p>
<blockquote>
<p>Swiftä»£ç ï¼š<a href="https://github.com/ariok/TB_TwitterUI" target="_blank" rel="external"><strong>Download Source</strong></a><br>OCä»£ç : <a href="https://github.com/ariok/TB_TwitterUI" target="_blank" rel="external"><strong>Download Source</strong></a></p>
</blockquote>
<hr>
<blockquote>
<p>åŸç‰ˆï¼š<a href="http://www.thinkandbuild.it/implementing-the-twitter-ios-app-ui/" target="_blank" rel="external">IMPLEMENTING THE TWITTER IOS APP UI</a></p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨ä½¿ç”¨&lt;code&gt;Twitter&lt;/code&gt;çš„APPåï¼Œæˆ‘å·²å¼€å‘è€…çš„è§†è§‰å¹¶æ³¨æ„åˆ°æ•´ä½“ä¸éƒ¨åˆ†ä¹‹é—´ç›¸äº’åè°ƒæ˜¯ä»¶æå…¶æœ‰æ„æ€çš„äº‹æƒ…ã€‚è¿™å¼•èµ·äº†æˆ‘çš„å¥½å¥‡å¿ƒï¼šè¿™æ˜¯æ€ä¹ˆåšåˆ°çš„ï¼Ÿ&lt;/p&gt;
&lt;p&gt;è®©æˆ‘ä»¬å…·ä½“åœ°è®¨è®ºä¸‹è¿™ä¸ªè§†å›¾å¸ƒå±€ï¼šæ­¤æ•ˆæœä¸ä¼˜é›…å—ï¼Ÿå®ƒçœ‹èµ·å¼€å°±åƒæœ¬åº”å¦‚æ­¤ï¼Œä½†ä½ ä»”ç»†çš„è§‚å¯Ÿåå°±ä¼šå‘ç°æ›´å¤šã€‚éšç€&lt;code&gt;Scrollview&lt;/code&gt;çš„åç§»ï¼Œå›¾å±‚çš„è¦†ç›–ï¼ŒåŠ¨ä½œå’Œæ¯”ä¾‹ç¼©æ”¾æ˜¯é‚£ä¹ˆçš„å¹³æ»‘è¿è´¯â€¦ â€¦ å®åœ¨æ˜¯å¤ªå–œæ¬¢è¿™ä¸ªæ•ˆæœäº†ã€‚&lt;/p&gt;
&lt;p&gt;Soï¼Œå°±è®©æˆ‘ä»¬ç«‹åˆ»å®ç°è¿™ä¸ªæ•ˆæœå§ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œå…ˆçœ‹ä¸‹æœ€ç»ˆæ•ˆæœï¼š&lt;/p&gt;
&lt;p align=&quot;center&quot;&gt;&lt;br&gt;&lt;img src=&quot;http://7pn4xs.com1.z0.glb.clouddn.com/colabeanTwitterProfile.gif&quot; width=&quot;375&quot; height=&quot;667&quot;&gt;&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://keleyundou.github.io/categories/iOS/"/>
    
    
      <category term="Tutorial" scheme="http://keleyundou.github.io/tags/Tutorial/"/>
    
      <category term="iOS" scheme="http://keleyundou.github.io/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>ColaBean&#39;s new Blog</title>
    <link href="http://keleyundou.github.io/2016/03/25/colabean&#39;s-new-blog/"/>
    <id>http://keleyundou.github.io/2016/03/25/colabean&#39;s-new-blog/</id>
    <published>2016-03-25T15:50:39.000Z</published>
    <updated>2016-03-26T04:24:13.000Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™æ˜¯<code>ColaBen</code>æ–°éƒ¨ç½²çš„blogï¼Œä¹‹å‰ç”¨çš„æ˜¯<code>Octopress</code>ï¼Œç”±äºå‘å¸ƒæ–‡ç« çš„æŒ‡ä»¤è¿‡äºç¹çï¼Œæ—¶é—´é•¿äº†å®¹æ˜“é—å¿˜ï¼Œä¸æ˜¯å¾ˆå¥½ç”¨ã€‚åœ¨å¤§ç¥çš„æ¨èä¸‹ï¼Œå¼€å§‹ä½¿ç”¨<code>Hexo</code>å†™åšå®¢ã€‚åˆšå¼€å§‹ä¹Ÿæ²¡è§‰å¾—æ€ä¹ˆæ ·ï¼Œä½†ç»è¿‡äº²èº«å®è·µåï¼Œæœç„¶æ˜¯æ¯”<code>Octopress</code>ç”¨èµ·æ¥é¡ºæ‰‹å¤šäº†ã€‚blogè¿™ä¸œè¥¿ç”¨èµ·æ¥é¡ºæ‰‹å°±å¥½ï¼Œé€‚åˆè‡ªå·±çš„æ‰æ˜¯æœ€å¥½çš„ã€‚å“ˆå“ˆã€‚ã€‚ã€‚</p>
<p>æ©â€¦æŠ½ç©ºåœ¨ç ”ç©¶ä¸‹<code>Hexo</code>ï¼ŒæŠŠblogä»æ–°éƒ¨ç½²ä¸‹ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™æ˜¯&lt;code&gt;ColaBen&lt;/code&gt;æ–°éƒ¨ç½²çš„blogï¼Œä¹‹å‰ç”¨çš„æ˜¯&lt;code&gt;Octopress&lt;/code&gt;ï¼Œç”±äºå‘å¸ƒæ–‡ç« çš„æŒ‡ä»¤è¿‡äºç¹çï¼Œæ—¶é—´é•¿äº†å®¹æ˜“é—å¿˜ï¼Œä¸æ˜¯å¾ˆå¥½ç”¨ã€‚åœ¨å¤§ç¥çš„æ¨èä¸‹ï¼Œå¼€å§‹ä½¿ç”¨&lt;code&gt;Hexo&lt;/code&gt;å†™åšå®¢ã€‚åˆšå¼€å§‹ä¹Ÿæ²¡è§‰å¾—æ€ä¹ˆæ ·ï¼Œä½†ç»è¿‡äº²èº«
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://keleyundou.github.io/2016/03/25/hello-world/"/>
    <id>http://keleyundou.github.io/2016/03/25/hello-world/</id>
    <published>2016-03-25T14:56:07.000Z</published>
    <updated>2016-03-25T14:56:07.000Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>å³æ—¶é€šè®¯ä¹‹è¾“å…¥æµä¸­è¯»å–åŸºæœ¬æ•°æ®</title>
    <link href="http://keleyundou.github.io/2016/03/16/%E5%8D%B3%E6%97%B6%E9%80%9A%E8%AE%AF%E4%B9%8B%E8%BE%93%E5%85%A5%E6%B5%81%E4%B8%AD%E8%AF%BB%E5%8F%96%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE/"/>
    <id>http://keleyundou.github.io/2016/03/16/å³æ—¶é€šè®¯ä¹‹è¾“å…¥æµä¸­è¯»å–åŸºæœ¬æ•°æ®/</id>
    <published>2016-03-16T13:59:33.000Z</published>
    <updated>2016-04-01T14:01:51.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç›¸åº”çš„å’Œå†™å…¥ä¸€æ ·ï¼Œä¸‹é¢å°†è¯»å–çš„æ¥å£é™ˆåˆ—å¦‚ä¸‹ï¼š</p>
<ul>
<li>è¯»å– 1 byte</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">- (int8_t)readChar;</div><div class="line">&#123;</div><div class="line">    int8_t v;</div><div class="line">    [data getBytes:&amp;v range:<span class="built_in">NSMakeRange</span>(len, <span class="number">1</span>)];</div><div class="line">    len++;</div><div class="line">    <span class="keyword">return</span> (v &amp; <span class="number">0x0FF</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<a id="more"></a>
<ul>
<li>è¯»å– 2 byte</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">- (int16_t)readShort;</div><div class="line">&#123;</div><div class="line">    int32_t ch1 = [<span class="keyword">self</span> read];</div><div class="line">    int32_t ch2 = [<span class="keyword">self</span> read];</div><div class="line">    <span class="keyword">if</span> ((ch1 | ch2) &lt; <span class="number">0</span>) &#123;</div><div class="line">        <span class="keyword">@throw</span> [<span class="built_in">NSException</span> exceptionWithName:<span class="string">@"Exception"</span> reason:<span class="string">@"EOFException"</span> userInfo:<span class="literal">nil</span>];</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> (int16_t)((ch1 &lt;&lt; <span class="number">8</span>) + (ch2 &lt;&lt; <span class="number">0</span>));</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>è¯»å– 4 byte</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">- (int32_t)readInt;</div><div class="line">&#123;</div><div class="line">    int32_t ch1 = [<span class="keyword">self</span> read];</div><div class="line">    int32_t ch2 = [<span class="keyword">self</span> read];</div><div class="line">    int32_t ch3 = [<span class="keyword">self</span> read];</div><div class="line">    int32_t ch4 = [<span class="keyword">self</span> read];</div><div class="line">    <span class="keyword">if</span> ((ch1 | ch2 | ch3 | ch4) &lt; <span class="number">0</span>)&#123;</div><div class="line">        <span class="keyword">@throw</span> [<span class="built_in">NSException</span> exceptionWithName:<span class="string">@"Exception"</span> reason:<span class="string">@"EOFException"</span> userInfo:<span class="literal">nil</span>];</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> ((ch1 &lt;&lt; <span class="number">24</span>) + (ch2 &lt;&lt; <span class="number">16</span>) + (ch3 &lt;&lt; <span class="number">8</span>) + (ch4 &lt;&lt; <span class="number">0</span>));</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>è¯»å– 8 byte</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">- (int64_t)readLong;</div><div class="line">&#123;</div><div class="line">    int8_t ch[<span class="number">8</span>];</div><div class="line">    [data getBytes:&amp;ch range:<span class="built_in">NSMakeRange</span>(len,<span class="number">8</span>)];</div><div class="line">    len += <span class="number">8</span>;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> (((int64_t)ch[<span class="number">0</span>] &lt;&lt; <span class="number">56</span>) +</div><div class="line">            ((int64_t)(ch[<span class="number">1</span>] &amp; <span class="number">255</span>) &lt;&lt; <span class="number">48</span>) +</div><div class="line">            ((int64_t)(ch[<span class="number">2</span>] &amp; <span class="number">255</span>) &lt;&lt; <span class="number">40</span>) +</div><div class="line">            ((int64_t)(ch[<span class="number">3</span>] &amp; <span class="number">255</span>) &lt;&lt; <span class="number">32</span>) +</div><div class="line">            ((int64_t)(ch[<span class="number">4</span>] &amp; <span class="number">255</span>) &lt;&lt; <span class="number">24</span>) +</div><div class="line">            ((ch[<span class="number">5</span>] &amp; <span class="number">255</span>) &lt;&lt; <span class="number">16</span>) +</div><div class="line">            ((ch[<span class="number">6</span>] &amp; <span class="number">255</span>) &lt;&lt;  <span class="number">8</span>) +</div><div class="line">            ((ch[<span class="number">7</span>] &amp; <span class="number">255</span>) &lt;&lt;  <span class="number">0</span>));</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>BCDæ—¶é’Ÿè½¬æ¢</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line">- (BDSTime)readBCDTime</div><div class="line">&#123;</div><div class="line">    <span class="keyword">struct</span> BDSTime bcdTime;</div><div class="line">    Byte year[<span class="number">2</span>];</div><div class="line">    Byte month[<span class="number">1</span>], day[<span class="number">1</span>], hour[<span class="number">1</span>], min[<span class="number">1</span>], sec[<span class="number">1</span>];</div><div class="line"></div><div class="line">    [data getBytes:&amp;year range:<span class="built_in">NSMakeRange</span>(len, <span class="keyword">sizeof</span>(year))];</div><div class="line">    len += <span class="keyword">sizeof</span>(year);</div><div class="line"></div><div class="line">    [data getBytes:&amp;month range:<span class="built_in">NSMakeRange</span>(len, <span class="keyword">sizeof</span>(month))];</div><div class="line">    len += <span class="keyword">sizeof</span>(month);</div><div class="line"></div><div class="line">    [data getBytes:&amp;day range:<span class="built_in">NSMakeRange</span>(len, <span class="keyword">sizeof</span>(day))];</div><div class="line">    len += <span class="keyword">sizeof</span>(day);</div><div class="line"></div><div class="line">    [data getBytes:&amp;hour range:<span class="built_in">NSMakeRange</span>(len, <span class="keyword">sizeof</span>(hour))];</div><div class="line">    len += <span class="keyword">sizeof</span>(hour);</div><div class="line"></div><div class="line">    [data getBytes:&amp;min range:<span class="built_in">NSMakeRange</span>(len, <span class="keyword">sizeof</span>(min))];</div><div class="line">    len += <span class="keyword">sizeof</span>(min);</div><div class="line"></div><div class="line">    [data getBytes:&amp;sec range:<span class="built_in">NSMakeRange</span>(len, <span class="keyword">sizeof</span>(sec))];</div><div class="line">    len += <span class="keyword">sizeof</span>(sec);</div><div class="line"></div><div class="line">    bcdTime.year = [<span class="keyword">self</span> readBCDToYear:year];</div><div class="line"></div><div class="line">    bcdTime.month = bcdToInt(month, <span class="keyword">sizeof</span>(month));</div><div class="line">    bcdTime.day = bcdToInt(day, <span class="keyword">sizeof</span>(day));</div><div class="line">    bcdTime.hour = bcdToInt(hour, <span class="keyword">sizeof</span>(hour));</div><div class="line">    bcdTime.min = bcdToInt(min, <span class="keyword">sizeof</span>(min));</div><div class="line">    bcdTime.sec = bcdToInt(sec, <span class="keyword">sizeof</span>(sec));</div><div class="line"></div><div class="line">    <span class="keyword">return</span> bcdTime;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">///bcdè½¬int</span></div><div class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span>  bcdToInt(<span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">char</span> *bcd, <span class="keyword">int</span> length)</div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> tmp;</div><div class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span> dec = <span class="number">0</span>;</div><div class="line"></div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; length; i++)</div><div class="line">    &#123;</div><div class="line">        tmp = ((bcd[i] &gt;&gt; <span class="number">4</span>) &amp; <span class="number">0x0F</span>) * <span class="number">10</span> + (bcd[i] &amp; <span class="number">0x0F</span>);</div><div class="line">        dec += tmp * pow(<span class="number">100</span>, length - <span class="number">1</span> - i);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> dec;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (int16_t)readBCDToYear:(Byte *)dt</div><div class="line">&#123;</div><div class="line">    Byte *year = dt;</div><div class="line">    Byte y_high = year[<span class="number">0</span>];</div><div class="line">    Byte y_low = year[<span class="number">1</span>];</div><div class="line"></div><div class="line">    int16_t high = bcdToInt(&amp;y_high, <span class="keyword">sizeof</span>(y_high));</div><div class="line">    int16_t low = bcdToInt(&amp;y_low, <span class="keyword">sizeof</span>(y_low));</div><div class="line">    <span class="keyword">return</span> high*<span class="number">100</span>+low;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç›¸åº”çš„å’Œå†™å…¥ä¸€æ ·ï¼Œä¸‹é¢å°†è¯»å–çš„æ¥å£é™ˆåˆ—å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¯»å– 1 byte&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;- (int8_t)readChar;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    int8_t v;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    [data getBytes:&amp;amp;v range:&lt;span class=&quot;built_in&quot;&gt;NSMakeRange&lt;/span&gt;(len, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)];&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    len++;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; (v &amp;amp; &lt;span class=&quot;number&quot;&gt;0x0FF&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="çç¢æ‚è®°" scheme="http://keleyundou.github.io/categories/%E7%90%90%E7%A2%8E%E6%9D%82%E8%AE%B0/"/>
    
    
      <category term="è§£ç " scheme="http://keleyundou.github.io/tags/%E8%A7%A3%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>å³æ—¶é€šè®¯ä¹‹åŸºæœ¬æ•°æ®å†™å…¥åˆ°è¾“å‡ºæµä¸­</title>
    <link href="http://keleyundou.github.io/2016/03/16/%E5%8D%B3%E6%97%B6%E9%80%9A%E8%AE%AF%E4%B9%8B%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E5%86%99%E5%85%A5%E5%88%B0%E8%BE%93%E5%87%BA%E6%B5%81%E4%B8%AD/"/>
    <id>http://keleyundou.github.io/2016/03/16/å³æ—¶é€šè®¯ä¹‹åŸºæœ¬æ•°æ®å†™å…¥åˆ°è¾“å‡ºæµä¸­/</id>
    <published>2016-03-16T13:53:52.000Z</published>
    <updated>2016-04-01T13:59:06.000Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨åšIMæˆ–è“ç‰™ä¼ è¾“çš„é¡¹ç›®ä¸­ï¼Œéš¾å…ä¼šæœ‰è¿™æ ·é‚£æ ·çš„æ•°æ®è½¬ç çš„æƒ…å†µï¼Œä¸‹é¢å°±å°†æˆ‘åœ¨é¡¹ç›®ä¸­ç”¨åˆ°çš„ä¸€äº›è½¬æ¢æ¥å£æ€»ç»“ä¸€ä¸‹ï¼Œå°†å…¶é™ˆåˆ—å‡ºæ¥ï¼Œå¸Œæœ›èƒ½å¤Ÿå¸®åŠ©åæ¥è€…ã€‚</p>
<ul>
<li>å°† 1 byte æ•°å€¼å†™å…¥è¾“å‡ºæµä¸­ï¼Œ å…ˆå†™å…¥é«˜ä½</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)writeChar:(int8_t)v;</div><div class="line">&#123;</div><div class="line">    int8_t ch[<span class="number">1</span>];</div><div class="line">    ch[<span class="number">0</span>] = (v &amp; <span class="number">0x0FF</span>);</div><div class="line">    [data appendBytes:ch length:<span class="keyword">sizeof</span>(ch)];</div><div class="line">    len++;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<a id="more"></a>
<ul>
<li>å°† 2 byte æ•°å€¼å†™å…¥è¾“å‡ºæµä¸­ï¼Œ å…ˆå†™å…¥é«˜ä½</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)writeShort:(int16_t)v;</div><div class="line">&#123;</div><div class="line">    int8_t ch[<span class="number">2</span>];</div><div class="line">    ch[<span class="number">0</span>] = (v &amp; <span class="number">0x0FF00</span>) &gt;&gt; <span class="number">8</span>;</div><div class="line">    ch[<span class="number">1</span>] = (v &amp; <span class="number">0x0FF</span>);</div><div class="line">    [data appendBytes:ch length:<span class="keyword">sizeof</span>(ch)];</div><div class="line">    len += <span class="keyword">sizeof</span>(ch);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>å°† 4 byte æ•°å€¼å†™å…¥è¾“å‡ºæµä¸­ï¼Œ å…ˆå†™å…¥é«˜ä½</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)writeInt:(int32_t)v;</div><div class="line">&#123;</div><div class="line">    int8_t ch[<span class="number">4</span>];</div><div class="line">    <span class="keyword">for</span> (int32_t i = <span class="number">0</span>; i &lt; <span class="keyword">sizeof</span>(ch); i++) &#123;</div><div class="line">        ch[i] = ((v &gt;&gt; ((<span class="number">3</span>-i) * <span class="number">8</span>)) &amp; <span class="number">0x0FF</span>);</div><div class="line">    &#125;</div><div class="line">    [data appendBytes:ch length:<span class="keyword">sizeof</span>(ch)];</div><div class="line">    len += <span class="keyword">sizeof</span>(ch);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>å°† 8 byte æ•°å€¼å†™å…¥è¾“å‡ºæµä¸­ï¼Œ å…ˆå†™å…¥é«˜ä½</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)writeLong:(int64_t)v;</div><div class="line">&#123;</div><div class="line">    int8_t ch[<span class="number">8</span>];</div><div class="line">    <span class="keyword">for</span> (int32_t i = <span class="number">0</span>; i &lt; <span class="keyword">sizeof</span>(ch); i++) &#123;</div><div class="line">        ch[i] = ((v &gt;&gt; ((<span class="number">7</span>-i) * <span class="number">8</span>)) &amp; <span class="number">0x0FF</span>);</div><div class="line">    &#125;</div><div class="line">    [data appendBytes:ch length:<span class="keyword">sizeof</span>(ch)];</div><div class="line">    len += <span class="keyword">sizeof</span>(ch);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>å°† BCDæ—¶é’Ÿ å†™å…¥è¾“å‡ºæµä¸­</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">- (Byte)int_toBCD:(<span class="keyword">unsigned</span> <span class="keyword">int</span>)v</div><div class="line">&#123;</div><div class="line">    Byte d1 = v / <span class="number">10</span>;</div><div class="line">    Byte d2 = v % <span class="number">10</span>;</div><div class="line">    Byte d = (d1 &lt;&lt; <span class="number">4</span>) | d2;</div><div class="line">    <span class="keyword">return</span> d;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)writeBCDTime:(BDSTime *)time;</div><div class="line">&#123;</div><div class="line">    <span class="comment">//write year</span></div><div class="line">    [<span class="keyword">self</span> writeYearBCDTime:time -&gt; year];</div><div class="line">    <span class="comment">//write month</span></div><div class="line">    [<span class="keyword">self</span> writeOtherBCDTime:time -&gt; month];</div><div class="line">    <span class="comment">//write day</span></div><div class="line">    [<span class="keyword">self</span> writeOtherBCDTime:time -&gt; day];</div><div class="line">    <span class="comment">//write hour</span></div><div class="line">    [<span class="keyword">self</span> writeOtherBCDTime:time -&gt; hour];</div><div class="line">    <span class="comment">//write min</span></div><div class="line">    [<span class="keyword">self</span> writeOtherBCDTime:time -&gt; min];</div><div class="line">    <span class="comment">//write sec</span></div><div class="line">    [<span class="keyword">self</span> writeOtherBCDTime:time -&gt; sec];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)writeYearBCDTime:(int16_t)v</div><div class="line">&#123;</div><div class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span> high, low;</div><div class="line">    high = v / <span class="number">100</span>;</div><div class="line">    low = v % <span class="number">100</span>;</div><div class="line"></div><div class="line">    int8_t ch[<span class="number">2</span>];</div><div class="line">    ch[<span class="number">0</span>] = int_toBCD(high);</div><div class="line">    ch[<span class="number">1</span>] = int_toBCD(low);</div><div class="line">    [data appendBytes:ch length:<span class="keyword">sizeof</span>(ch)];</div><div class="line">    len += <span class="keyword">sizeof</span>(ch);</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)writeOtherBCDTime:(int8_t)v</div><div class="line">&#123;</div><div class="line">    int8_t ch[<span class="number">1</span>];</div><div class="line">    ch[<span class="number">0</span>] = int_toBCD(v);</div><div class="line">    [data appendBytes:ch length:<span class="keyword">sizeof</span>(ch)];</div><div class="line">    len += <span class="keyword">sizeof</span>(ch);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<blockquote>
<p>ä¸‹è½½åœ°å€ï¼š<a href="https://github.com/keleyundou/BDWRDataDemo" target="_blank" rel="external">BDWRDataDemo</a></p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨åšIMæˆ–è“ç‰™ä¼ è¾“çš„é¡¹ç›®ä¸­ï¼Œéš¾å…ä¼šæœ‰è¿™æ ·é‚£æ ·çš„æ•°æ®è½¬ç çš„æƒ…å†µï¼Œä¸‹é¢å°±å°†æˆ‘åœ¨é¡¹ç›®ä¸­ç”¨åˆ°çš„ä¸€äº›è½¬æ¢æ¥å£æ€»ç»“ä¸€ä¸‹ï¼Œå°†å…¶é™ˆåˆ—å‡ºæ¥ï¼Œå¸Œæœ›èƒ½å¤Ÿå¸®åŠ©åæ¥è€…ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å°† 1 byte æ•°å€¼å†™å…¥è¾“å‡ºæµä¸­ï¼Œ å…ˆå†™å…¥é«˜ä½&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)writeChar:(int8_t)v;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    int8_t ch[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;];&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    ch[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;] = (v &amp;amp; &lt;span class=&quot;number&quot;&gt;0x0FF&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    [data appendBytes:ch length:&lt;span class=&quot;keyword&quot;&gt;sizeof&lt;/span&gt;(ch)];&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    len++;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="çç¢æ‚è®°" scheme="http://keleyundou.github.io/categories/%E7%90%90%E7%A2%8E%E6%9D%82%E8%AE%B0/"/>
    
    
      <category term="ç¼–ç " scheme="http://keleyundou.github.io/tags/%E7%BC%96%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>å…³äºå­—ä½“é€‚é…çš„é‚£äº›äº‹</title>
    <link href="http://keleyundou.github.io/2016/01/18/%E5%85%B3%E4%BA%8E%E5%AD%97%E4%BD%93%E9%80%82%E9%85%8D%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B/"/>
    <id>http://keleyundou.github.io/2016/01/18/å…³äºå­—ä½“é€‚é…çš„é‚£äº›äº‹/</id>
    <published>2016-01-18T13:39:42.000Z</published>
    <updated>2016-04-01T13:49:10.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>ä¹‹å‰åšè¿‡å¾ˆå¤šé¡¹ç›®éƒ½æ²¡è€ƒè™‘è¿‡å­—ä½“é€‚é…é—®é¢˜ã€‚ç›¸ä¿¡ç»å¤§å¤šæ•°äººåœ¨åšé¡¹ç›®æ—¶ï¼Œéƒ½æ²¡ä»”ç»†å»è€ƒè™‘è¿™ä»¶äº‹ã€‚ä¸€èˆ¬éƒ½æ˜¯æ ¹æ®UIå‡ºçš„å›¾åšä¸ªä¼°ç®—ï¼Œæœ‰è€å¿ƒçš„ä¼°è®¡ä¼šè‡ªå·±æ‹¿å·¥å…·æµ‹é‡ä¸‹ã€‚å¦‚ä»Šï¼Œè€ƒè™‘åˆ°iPhoneæœºå‹çš„å¤šæ ·æ€§ï¼ŒUIè®¾è®¡å¸ˆä¸å¯èƒ½é’ˆå¯¹æ¯ä¸€æ¬¾iPhoneçš„å±å¹•å‡ºä¸€å¥—UIå›¾ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œéƒ½æ˜¯åŸºäº5sçš„æ ‡å‡†å‡ºUIã€‚å½“æˆ‘ä»¬åœ¨è®¾ç½®å­—ä½“æ—¶ï¼Œå¾€å¾€éƒ½æ˜¯åŸºäºUIå¹¶ä¸”é’ˆå¯¹ä¸åŒçš„å±å¹•å­—ä½“ä¹Ÿéƒ½æ˜¯ç»å¯¹çš„ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œç»†å¿ƒçš„åŒå­¦å¯èƒ½ä¼šæ³¨æ„åˆ°ï¼Œç›¸åŒå¤§å°çš„å­—ä½“åœ¨5sæˆ–6ä¸Šä¹Ÿè®¸å·®åˆ«ä¸å¤§ï¼Œä½†åœ¨6pä¸Šå­—ä½“æœ‰ç¼©å°çš„ç°è±¡ï¼Œå…¶åŸå› ç”±åˆ†è¾¨ç‡å¯¼è‡´ã€‚</p>
<a id="more"></a>
<p>åœ¨6å‡ºæ¥ä¸ä¹…ï¼Œæ›¾çœ‹è¿‡æœ‰å…³é€‚é…çš„æ–‡ç« ï¼Œå…¶ä¸­å…³äºiPhoneå°ºå¯¸è§„æ ¼å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>è®¾å¤‡</th>
<th>å®½</th>
<th>é«˜</th>
<th>å¯¹è§’çº¿</th>
<th>é€»è¾‘åˆ†è¾¨ç‡</th>
<th>scale Factor</th>
<th>è®¾å¤‡åˆ†è¾¨ç‡</th>
<th>PPI</th>
</tr>
</thead>
<tbody>
<tr>
<td>  3GS</td>
<td>2.4inch</td>
<td>4.5inch</td>
<td>3.5inch</td>
<td>320x480</td>
<td>@1x</td>
<td>320x480</td>
<td>163</td>
</tr>
<tr>
<td>  4(s)</td>
<td>2.31inch</td>
<td>4.5inch</td>
<td>3.5inch</td>
<td>320x480</td>
<td>@2x</td>
<td>640x960</td>
<td>326</td>
</tr>
<tr>
<td>  5c</td>
<td>2.33inch</td>
<td>4.90inch</td>
<td>4inch</td>
<td>320x568</td>
<td>@2x</td>
<td>640x1136</td>
<td>326</td>
</tr>
<tr>
<td>  5(s)</td>
<td>2.31inch</td>
<td>4.87inch</td>
<td>4inch</td>
<td>320x568</td>
<td>@2x</td>
<td>640x1136</td>
<td>326</td>
</tr>
<tr>
<td>  6</td>
<td>2.64inch</td>
<td>5.44inch</td>
<td>4.7inch</td>
<td>375x667</td>
<td>@2x</td>
<td>750x1334</td>
<td>326</td>
</tr>
<tr>
<td>  6p</td>
<td>3.06inch</td>
<td>6.22inch</td>
<td>5.5inch</td>
<td>414x736</td>
<td>@3x</td>
<td>1242x2208</td>
<td>401</td>
</tr>
</tbody>
</table>
<p>  ä»iPhone3GS/iPhone4(s)è¿‡æ¸¡åˆ°iPhone5(s)æ—¶ï¼Œåœ¨é€»è¾‘ä¸Šå®½åº¦ä¸å˜é«˜åº¦ç¨é«˜ï¼Œä¹‹å‰æ—§çš„ç´ æå’Œå¸ƒå±€é€šè¿‡AutoresizingFlexibleç®€å•é€‚é…å³å¯è¿è¡Œå¾—å¾ˆå¥½ï¼Œä½†ç”±äºé«˜å®½æ¯”å¢å¤§ï¼Œä¸Šä¸‹ä¸¤ç«¯å‡ºç°é»‘ç²—è¾¹ï¼ˆå…¸å‹å¦‚LaunchImageï¼‰ã€‚ä»åˆ†è¾¨ç‡çš„è§’åº¦æ¥çœ‹ï¼Œé™¤äº†éœ€è¦æä¾›LaunchImageè¿™ç§æ»¡å±å›¾ï¼Œå…¶ä»–åŸºæœ¬æ²¿ç”¨äºŒå€å›¾ï¼ˆ@2xï¼‰ï¼›ä»å±å¹•å°ºå¯¸è§’åº¦æ¥çœ‹ï¼Œéœ€è¦å¯¹çºµå‘æ’ç‰ˆç•¥åŠ è°ƒæ•´ã€‚<br>  ä»iPhone5(s)å‘å±•åˆ°iPhone6(+)ï¼Œç”±äºé«˜å®½æ¯”ä¿æŒä¸å˜ï¼ŒiOSå¯¹å›¾æ ‡ã€å›¾ç‰‡ã€å­—ä½“è¿›è¡Œç­‰æ¯”æ”¾å¤§è‡ªé€‚åº”ï¼Œæ¸…æ™°åº¦ä¼šæœ‰æ‰€é™ä½ã€‚åŒæ—¶ï¼Œç»å¯¹åæ ‡å¸ƒå±€ä¼šå¯¼è‡´åœ¨å¤§å±ä¸‹å‡ºç°åå·¦åä¸Šçš„é—®é¢˜ã€‚ä»åˆ†è¾¨ç‡çš„è§’åº¦æ¥çœ‹ï¼ŒiPhone6æ²¿ç”¨äºŒå€å›¾ï¼ˆ@2xï¼‰ï¼Œä½†éœ€ä¸ºiPhone6+æä¾›æ›´é«˜çš„ä¸‰å€å›¾ï¼ˆ@3xï¼‰ï¼›ä»å±å¹•å°ºå¯¸è§’åº¦æ¥çœ‹ï¼Œéœ€è¦é‡æ–°å¯¹UIå…ƒç´ å°ºå¯¸å’Œå¸ƒå±€è¿›è¡Œé€‚é…ï¼Œä»¥æœŸè§†è§‰åè°ƒã€‚</p>
<h3 id="å­—ä½“é€‚é…"><a href="#å­—ä½“é€‚é…" class="headerlink" title="å­—ä½“é€‚é…"></a>å­—ä½“é€‚é…</h3><p>ä»¥ä¸Šå±äºç§‘æ™®ç±»çš„ä¸œè¥¿ï¼Œä¸‹é¢æ¥ç‚¹å®é™…çš„ã€‚</p>
<p>å…³äºå­—ä½“é€‚é…æœ‰2ç§æ–¹æ¡ˆã€‚</p>
<h3 id="æ–¹æ¡ˆä¸€ï¼š"><a href="#æ–¹æ¡ˆä¸€ï¼š" class="headerlink" title="æ–¹æ¡ˆä¸€ï¼š"></a>æ–¹æ¡ˆä¸€ï¼š</h3><p>è®¾ç½®ä¸€ä¸ªå¤§å°åŒºåŸŸèŒƒå›´ï¼Œæ¯”å¦‚10~30<code>pointSize</code>çš„èŒƒå›´(pointSizeä¸º<code>UIFont</code>çš„ä¸€ä¸ªCGFloatç±»å‹çš„å±æ€§)ï¼Œç„¶å<code>for</code>å¾ªç¯é™åºéå†æ­¤èŒƒå›´è®¾ç½®ä¸€ä¸ªä¸´æ—¶çš„<code>UIFont</code>å˜é‡ï¼Œæ ¹æ®æ­¤å˜é‡è®¡ç®—å½“å‰æ–‡æœ¬çš„å¤§å°ï¼Œä¸å½“å‰<code>UILabel</code>çš„<code>height</code>ä½œæ¯”è¾ƒæ‰¾å‡ºåˆé€‚çš„å­—ä½“ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#define ADAPTIVE__FONT_SIZE_MINIMUM_VALUE 20</span></div><div class="line"><span class="meta">#define ADAPTIVE_FONT_SIZE_MAXIMUM_VALUE 30</span></div><div class="line"></div><div class="line">-(<span class="built_in">UIFont</span> *) adjustFontSizeToFillItsContents</div><div class="line">&#123;</div><div class="line">    <span class="built_in">NSString</span>* text = <span class="keyword">self</span>.text;</div><div class="line"></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = ADAPTIVE_FONT_SIZE_MAXIMUM_VALUE; i&gt;ADAPTIVE__FONT_SIZE_MINIMUM_VALUE; i--) &#123;</div><div class="line"></div><div class="line">        <span class="built_in">UIFont</span> *font = [<span class="built_in">UIFont</span> fontWithName:<span class="keyword">self</span>.font.fontName size:(<span class="built_in">CGFloat</span>)i];</div><div class="line">        <span class="built_in">NSAttributedString</span> *attributedText = [[<span class="built_in">NSAttributedString</span> alloc] initWithString:text attributes:@&#123;<span class="built_in">NSFontAttributeName</span>: font&#125;];</div><div class="line"></div><div class="line">        <span class="built_in">CGRect</span> rectSize = [attributedText boundingRectWithSize:<span class="built_in">CGSizeMake</span>(<span class="keyword">self</span>.frame.size.width, <span class="built_in">CGFLOAT_MAX</span>) options:<span class="built_in">NSStringDrawingUsesLineFragmentOrigin</span> context:<span class="literal">nil</span>];</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (rectSize.size.height &lt;= <span class="keyword">self</span>.frame.size.height) &#123;</div><div class="line">            <span class="keyword">return</span> [<span class="built_in">UIFont</span> fontWithName:<span class="keyword">self</span>.font.fontName size:(<span class="built_in">CGFloat</span>)i];</div><div class="line">            <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">self</span>.font;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="æ–¹æ¡ˆäºŒï¼š"><a href="#æ–¹æ¡ˆäºŒï¼š" class="headerlink" title="æ–¹æ¡ˆäºŒï¼š"></a>æ–¹æ¡ˆäºŒï¼š</h3><p>è®¡ç®—å‡ºä¸€ä¸ª<code>scale</code>é‡æ–°è®¾ç½®<code>UIFont</code>ï¼Œä¼ªä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">CGFloat</span> scale = ([<span class="built_in">UIScreen</span> mainScreen].bounds.size.width / <span class="number">320</span>);</div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"before : %.1f"</span>, [font pointSize]);</div><div class="line">font = [<span class="built_in">UIFont</span> fontWithName:[font fontName] size:fontSize * scale];</div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"after : %.1f"</span>, [font pointSize]);</div></pre></td></tr></table></figure>
<p>æ—¢ç„¶éœ€è¦é‡æ–°è®¾ç½®<code>UIFont</code>ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸å¯é¿å…çš„è¦<code>hook</code>ä¸‹<code>UIFont</code>çš„ç±»æ–¹æ³•<code>fontWithName:size:</code>åšä¸ªå‡½æ•°äº¤æ¢çš„å¤„ç†ã€‚<br>å‡½æ•°çš„äº¤æ¢æˆ‘ä»¬éœ€è¦ç”¨åˆ°<code>runtime</code>æœºåˆ¶ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">void</span> bd_exchageClassMethod(Class aClass, SEL oldSEL, SEL newSEL)</div><div class="line">&#123;</div><div class="line">    Method oldClsMethod = class_getClassMethod(aClass, oldSEL);</div><div class="line">    assert(oldClsMethod);</div><div class="line">    Method newClsMethod = class_getClassMethod(aClass, newSEL);</div><div class="line">    assert(newClsMethod);</div><div class="line">    method_exchangeImplementations(oldClsMethod, newClsMethod);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç„¶åï¼Œæˆ‘ä»¬ç»™<code>UIFont</code>åˆ›å»ºä¸€ä¸ª<code>Categroy</code>æ–‡ä»¶ï¼Œæ–‡ä»¶åä¸º<code>AdaptiveFont</code>ã€‚åœ¨å®ç°æ–‡ä»¶ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">UIFont</span> (<span class="title">AdaptiveFont</span>)</span></div><div class="line"></div><div class="line">+ (<span class="keyword">void</span>)hook</div><div class="line">&#123;</div><div class="line">    bd_exchageClassMethod([<span class="built_in">UIFont</span> <span class="keyword">class</span>], <span class="keyword">@selector</span>(fontWithName:size:), <span class="keyword">@selector</span>(hook_fontWithName:size:));</div><div class="line">&#125;</div><div class="line"></div><div class="line">+ (<span class="built_in">UIFont</span> *)hook_fontWithName:(<span class="built_in">NSString</span> *)fontName size:(<span class="built_in">CGFloat</span>)fontSize</div><div class="line">&#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"before : %.1f"</span>, fontSize);</div><div class="line">    <span class="built_in">CGFloat</span> scale = ([<span class="built_in">UIScreen</span> mainScreen].bounds.size.width / <span class="number">320</span>);</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"scale : %f"</span>, scale);</div><div class="line">    <span class="built_in">UIFont</span> *font = [<span class="keyword">self</span> hook_fontWithName:fontName size:fontSize * scale];</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"after : %.1f"</span>, [font pointSize]);</div><div class="line">    printf(<span class="string">"&lt;---------------------&gt;\n"</span>);</div><div class="line">    <span class="keyword">return</span> font;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<p>æ¥å£æ–‡ä»¶æš´æ¼ç›¸å…³æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">UIFont</span> (<span class="title">AdaptiveFont</span>)</span></div><div class="line"></div><div class="line">+ (<span class="keyword">void</span>)hook;</div><div class="line">+ (<span class="built_in">UIFont</span> *)hook_fontWithName:(<span class="built_in">NSString</span> *)fontName size:(<span class="built_in">CGFloat</span>)fontSize;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<p>ç›¸å¯¹æ¯”è¾ƒè€Œè¨€ï¼Œæˆ‘è¿˜æ˜¯å€¾å‘äºæ–¹æ³•äºŒã€‚æ–¹æ³•ä¸€çš„å‰ææ¡ä»¶æ˜¯<code>height</code>è¦é€‚é…å¥½ï¼Œä¸èƒ½æ˜¯ç»å¯¹å€¼ï¼Œå¦æ•ˆæœã€‚å½“ç„¶ï¼Œæ–¹æ³•äºŒä¹Ÿä¸€æ ·ï¼Œåªä¸è¿‡<code>height</code>è‹¥æ˜¯ç»å¯¹å€¼ï¼Œä¼šå‡ºç°æ–‡å­—æ˜¾ç¤ºä¸å…¨çš„é—®é¢˜ã€‚<br>åœ¨ç”¨æ³•ä¸Šï¼Œæ–¹æ³•ä¸€åªéœ€è°ƒç”¨<code>adjustFontSizeToFillItsContents</code>ï¼Œè€Œæ–¹æ³•äºŒéœ€åœ¨<code>application:didFinishLaunchingWithOptions:</code>å‡½æ•°è°ƒç”¨ä¸‹<code>hook</code>ã€‚</p>
<p>å½“ç„¶ï¼Œè¿™å¹¶ä¸æ˜¯æœ€ç»ˆä¹Ÿä¸æ˜¯æœ€å¥½çš„é€‚é…æ–¹æ¡ˆã€‚ä¸ªäººè§‰å¾—æ ¹æ®<code>PPI</code>é€‚é…å­—ä½“ï¼Œé™äºç»å†æœ‰é™åªèƒ½ç ”ç©¶åˆ°è¿™ã€‚<br>æ¬¢è¿çº é”™ï¼Œæœ‰ä»€ä¹ˆå¥½çš„å­—ä½“é€‚é…æ–¹æ¡ˆä¹Ÿå¯ä»¥åœ¨ä¸‹æ–¹è¯„è®ºè¿›è¡Œæ¢è®¨ã€‚</p>
<hr>
<blockquote>
<p>Demoåœ°å€ï¼š<a href="https://github.com/keleyundou/AdaptiveFontDemo" title="AdaptiveFontDemo" target="_blank" rel="external">AdaptiveFontDemo</a></p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h3&gt;&lt;p&gt;ä¹‹å‰åšè¿‡å¾ˆå¤šé¡¹ç›®éƒ½æ²¡è€ƒè™‘è¿‡å­—ä½“é€‚é…é—®é¢˜ã€‚ç›¸ä¿¡ç»å¤§å¤šæ•°äººåœ¨åšé¡¹ç›®æ—¶ï¼Œéƒ½æ²¡ä»”ç»†å»è€ƒè™‘è¿™ä»¶äº‹ã€‚ä¸€èˆ¬éƒ½æ˜¯æ ¹æ®UIå‡ºçš„å›¾åšä¸ªä¼°ç®—ï¼Œæœ‰è€å¿ƒçš„ä¼°è®¡ä¼šè‡ªå·±æ‹¿å·¥å…·æµ‹é‡ä¸‹ã€‚å¦‚ä»Šï¼Œè€ƒè™‘åˆ°iPhoneæœºå‹çš„å¤šæ ·æ€§ï¼ŒUIè®¾è®¡å¸ˆä¸å¯èƒ½é’ˆå¯¹æ¯ä¸€æ¬¾iPhoneçš„å±å¹•å‡ºä¸€å¥—UIå›¾ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œéƒ½æ˜¯åŸºäº5sçš„æ ‡å‡†å‡ºUIã€‚å½“æˆ‘ä»¬åœ¨è®¾ç½®å­—ä½“æ—¶ï¼Œå¾€å¾€éƒ½æ˜¯åŸºäºUIå¹¶ä¸”é’ˆå¯¹ä¸åŒçš„å±å¹•å­—ä½“ä¹Ÿéƒ½æ˜¯ç»å¯¹çš„ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œç»†å¿ƒçš„åŒå­¦å¯èƒ½ä¼šæ³¨æ„åˆ°ï¼Œç›¸åŒå¤§å°çš„å­—ä½“åœ¨5sæˆ–6ä¸Šä¹Ÿè®¸å·®åˆ«ä¸å¤§ï¼Œä½†åœ¨6pä¸Šå­—ä½“æœ‰ç¼©å°çš„ç°è±¡ï¼Œå…¶åŸå› ç”±åˆ†è¾¨ç‡å¯¼è‡´ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="çç¢æ‚è®°" scheme="http://keleyundou.github.io/categories/%E7%90%90%E7%A2%8E%E6%9D%82%E8%AE%B0/"/>
    
    
      <category term="UIFont" scheme="http://keleyundou.github.io/tags/UIFont/"/>
    
  </entry>
  
  <entry>
    <title>iOSå¼€å‘ä¹‹Quartz2Dç”ŸæˆPDF-Part2</title>
    <link href="http://keleyundou.github.io/2015/08/18/iOS%E5%BC%80%E5%8F%91%E4%B9%8BQuartz2D%E7%94%9F%E6%88%90PDF-Part2/"/>
    <id>http://keleyundou.github.io/2015/08/18/iOSå¼€å‘ä¹‹Quartz2Dç”ŸæˆPDF-Part2/</id>
    <published>2015-08-18T12:40:31.000Z</published>
    <updated>2016-04-01T12:56:49.000Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ä¸Šä¸€èŠ‚å½“ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåŸºäºQuartz2Dçš„PDFï¼Œå¹¶åœ¨PDFä¸­æ·»åŠ ä¸€çº¿æ¡ã€‚<br>åœ¨è¿™ä¸€èŠ‚ï¼Œä¸»è¦æ˜¯æ·»åŠ ä¸€ä¸ªlogoï¼Œå’Œç»˜åˆ¶ä¸€ä¸ªtableã€‚</p>
<h3 id="æ·»åŠ logo"><a href="#æ·»åŠ logo" class="headerlink" title="æ·»åŠ logo"></a>æ·»åŠ logo</h3><p><a href="http://img.blog.csdn.net/20150818132734126" target="_blank" rel="external">ä¸‹è½½å›¾ç‰‡èµ„æº</a>ï¼Œç„¶åæ·»åŠ åˆ°å·¥ç¨‹å½“ä¸­ã€‚</p>
<p>åœ¨<code>PDFRenderer.m</code>æ–‡ä»¶ä¸­æ·»åŠ ä¸‹é¢æ–¹æ³•ï¼š</p>
<a id="more"></a>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//ç»˜åˆ¶å›¾åƒ</span></div><div class="line">+ (<span class="keyword">void</span>)drawImage:(<span class="built_in">UIImage</span>*)image inRect:(<span class="built_in">CGRect</span>)rect &#123;</div><div class="line">    [image drawInRect:rect];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨<code>PDFRenderer.h</code>ä¸­æ·»åŠ ä¸‹é¢æ–¹æ³•ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">+ (<span class="keyword">void</span>)drawImage:(<span class="built_in">UIImage</span>*)image inRect:(<span class="built_in">CGRect</span>)rect;</div><div class="line">+</div></pre></td></tr></table></figure>
<p>ä¸ºäº†èƒ½åœ¨PDFä¸Šæ˜¾ç¤ºæ­¤logoï¼Œåœ¨<code>PDFRenderer.m</code>çš„<code>drawPDF</code>æ–¹æ³•ä¸­æ·»åŠ ä¸‹é¢ä»£ç ï¼Œæ­¤ä»£ç å†™åœ¨<code>UIGraphicsEndPDFContext();</code>ä¹‹å‰ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">UIImage</span> *logo = [<span class="built_in">UIImage</span> imageNamed:<span class="string">@"ray-logo"</span>];</div><div class="line"><span class="built_in">CGRect</span> frame = <span class="built_in">CGRectMake</span>(<span class="number">20</span>, <span class="number">100</span>, <span class="number">300</span>, <span class="number">60</span>);</div><div class="line">[PDFRenderer drawImage:logo inRect:frame];</div></pre></td></tr></table></figure>
<p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªUIImageå¯¹è±¡ï¼Œå¹¶å®šä¹‰å›¾åƒçš„ä½ç½®å’Œå¤§å°ï¼Œè°ƒç”¨<code>drawImage</code>æ–¹æ³•å°†ä¸¤ä¸ªå‚æ•°ä¼ è¿‡å»è¿›è¡Œç»˜åˆ¶ã€‚</p>
<p>å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">+ (<span class="keyword">void</span>)drawPDF:(<span class="built_in">NSString</span>*)fileName &#123;</div><div class="line">    <span class="built_in">UIGraphicsBeginPDFContextToFile</span>(fileName, <span class="built_in">CGRectZero</span>, <span class="literal">nil</span>);</div><div class="line">    <span class="built_in">UIGraphicsBeginPDFPageWithInfo</span>(<span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">612</span>, <span class="number">792</span>), <span class="literal">nil</span>);</div><div class="line"></div><div class="line">    <span class="built_in">CGPoint</span> from = <span class="built_in">CGPointMake</span>(<span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    <span class="built_in">CGPoint</span> to = <span class="built_in">CGPointMake</span>(<span class="number">200</span>, <span class="number">300</span>);</div><div class="line">    [PDFRenderer drawLineFromPoint:from toPoint:to];</div><div class="line"></div><div class="line">    <span class="built_in">UIImage</span> *logo = [<span class="built_in">UIImage</span> imageNamed:<span class="string">@"ray-logo"</span>];</div><div class="line">    <span class="built_in">CGRect</span> frame = <span class="built_in">CGRectMake</span>(<span class="number">20</span>, <span class="number">100</span>, <span class="number">300</span>, <span class="number">60</span>);</div><div class="line">    [PDFRenderer drawImage:logo inRect:frame];</div><div class="line"></div><div class="line">    [<span class="keyword">self</span> drawText];</div><div class="line"></div><div class="line">    <span class="built_in">UIGraphicsEndPDFContext</span>();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è‡³æ­¤äº†è§£åˆ°å¦‚ä½•ç»˜åˆ¶æ¸…å•çš„åŸºæœ¬å…ƒç´ ï¼šæ–‡æœ¬ã€çº¿æ¡ã€å›¾ç‰‡ã€‚æ¥ä¸‹æ¥å°†è¿ç”¨è¿™äº›æ‰€æœ‰å…ƒç´ æ„å»ºæ›´ä¸ºå®Œç¾çš„å¸ƒå±€ã€‚</p>
<h3 id="ç»˜åˆ¶Labels"><a href="#ç»˜åˆ¶Labels" class="headerlink" title="ç»˜åˆ¶Labels"></a>ç»˜åˆ¶Labels</h3><p>åˆ›å»ºä¸€ä¸ªxibï¼Œå¹¶å‘½åä¸º<code>InvoiceView</code>ï¼Œé€‰ä¸­<code>InvoiceView</code>IBï¼Œè®¾ç½®Viewçš„width: 612 å’Œheight: 792ï¼Œè¿™äº›éƒ½æ˜¯A4PDFçš„é»˜è®¤å°ºå¯¸ã€‚ä¸‹é¢æ‹–æ‹½8ä¸ªUILabelï¼Œå¹¶æŒ‰å¦‚ä¸‹å‘½åï¼š</p>
<ul>
<li>Recipient [Name]</li>
<li>Recipientâ€™s Address</li>
<li>Recipientâ€™s City</li>
<li>Recipientâ€™s Postal Code</li>
<li>Invoicer [Name]</li>
<li>Invoicerâ€™s Address</li>
<li>Invoicerâ€™s City</li>
<li>Invoicerâ€™s Postal Code</li>
</ul>
<p align="center"><br><img src="http://img.blog.csdn.net/20150818133920616" width="693" height="293"><br></p>

<p>è¿™äº›labelsçš„ä½ç½®å°†ä¼šåœ¨PDFä¸Šè¿›è¡Œå¸ƒå±€ã€‚ç»™æ¯ä¸ªlabelä»0-7è®¾ç½®tagã€‚ä¾‹å¦‚ï¼š<code>Recipient</code>çš„tagæ˜¯0ï¼Œ<code>Recipientâ€™s Address</code>çš„tagäº‹1ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p>
<p align="center"><br><img src="http://img.blog.csdn.net/20150818134657503" width="519" height="338" align="center"><br></p>

<p>æ‰“å¼€<code>PDFRenderer.m</code>æ–‡ä»¶ï¼Œå¹¶é‡æ„<code>drawText</code>æ–¹æ³•ã€‚ä»£ç æ¸…å•å¦‚ä¸‹ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">+(<span class="keyword">void</span>)drawText:(<span class="built_in">NSString</span>*)textToDraw inFrame:(<span class="built_in">CGRect</span>)frameRect &#123;</div><div class="line">    <span class="built_in">CFStringRef</span> stringRef = (__bridge <span class="built_in">CFStringRef</span>)textToDraw;</div><div class="line">    <span class="built_in">CFAttributedStringRef</span> currentText = <span class="built_in">CFAttributedStringCreate</span>(<span class="literal">NULL</span>, stringRef, <span class="literal">NULL</span>);</div><div class="line">    <span class="built_in">CTFramesetterRef</span> framesetter = <span class="built_in">CTFramesetterCreateWithAttributedString</span>(currentText);</div><div class="line"></div><div class="line">    <span class="built_in">CGMutablePathRef</span> framePath = <span class="built_in">CGPathCreateMutable</span>();</div><div class="line">    <span class="built_in">CGPathAddRect</span>(framePath, <span class="literal">NULL</span>, frameRect);</div><div class="line">    <span class="built_in">CFRange</span> currentRange = <span class="built_in">CFRangeMake</span>(<span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    <span class="built_in">CTFrameRef</span> frameRef = <span class="built_in">CTFramesetterCreateFrame</span>(framesetter, currentRange, framePath, <span class="literal">NULL</span>);</div><div class="line">    <span class="built_in">CGPathRelease</span>(framePath);</div><div class="line"></div><div class="line">    <span class="built_in">CGContextRef</span> currentContext = <span class="built_in">UIGraphicsGetCurrentContext</span>();</div><div class="line"></div><div class="line">    <span class="built_in">CGContextSetTextMatrix</span>(currentContext, <span class="built_in">CGAffineTransformIdentity</span>);</div><div class="line"></div><div class="line">    <span class="built_in">CGContextTranslateCTM</span>(currentContext, <span class="number">0</span>,<span class="number">100</span>);</div><div class="line">    <span class="built_in">CGContextScaleCTM</span>(currentContext, <span class="number">1.0</span>, <span class="number">-1.0</span>);</div><div class="line"></div><div class="line">    <span class="built_in">CTFrameDraw</span>(frameRef, currentContext);</div><div class="line"></div><div class="line">    <span class="built_in">CFRelease</span>(frameRef);</div><div class="line">    <span class="built_in">CFRelease</span>(stringRef);</div><div class="line">    <span class="built_in">CFRelease</span>(framesetter);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨<code>PDFRenderer.h</code>æ–‡ä»¶ä¸­æ·»åŠ ä¸‹é¢ä»£ç ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">+(<span class="keyword">void</span>)drawText:(<span class="built_in">NSString</span>*)textToDraw inFrame:(<span class="built_in">CGRect</span>)frameRect</div></pre></td></tr></table></figure>
<p>ä¸‹é¢æ˜¯ä»<code>InvoiceView</code>ä¸­åŠ è½½labelï¼Œä½¿ç”¨æ–‡æœ¬å’Œä½ç½®å¤§å°æ¥ç»˜åˆ¶åˆ°PDFä¸Šã€‚åœ¨<code>PDFRenderer.m</code>ä¸­çš„<code>drawPDF</code>çš„å•†æ³•æ·»åŠ ä¸€ä¸ªæ–°æ–¹æ³•<code>drawLabels</code>:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">+ (<span class="keyword">void</span>)drawLabels &#123;</div><div class="line">    <span class="built_in">NSArray</span> *objects = [[<span class="built_in">NSBundle</span> mainBundle] loadNibNamed:<span class="string">@"InvoiceView"</span> owner:<span class="literal">nil</span> options:<span class="literal">nil</span>];</div><div class="line">    <span class="built_in">UIView</span> *mainView = [objects lastObject];</div><div class="line">    <span class="keyword">for</span> (<span class="built_in">UIView</span> *view <span class="keyword">in</span> [mainView subviews]) &#123;</div><div class="line">        <span class="keyword">if</span> ([view isKindOfClass:[<span class="built_in">UILabel</span> <span class="keyword">class</span>]]) &#123;</div><div class="line">            <span class="built_in">UILabel</span> *label = (<span class="built_in">UILabel</span>*)view;</div><div class="line">            [<span class="keyword">self</span> drawText:label.text inFrame:label.frame];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ–¹æ³•æ˜¯åŠ è½½<code>InvoiceView</code>ï¼Œéå†<code>InvoiceView</code>ä¸­çš„labelsï¼Œè°ƒç”¨<code>drawText</code>ï¼Œå°†textå’Œframeå˜é‡ä¼ é€’è¿‡å»ã€‚</p>
<p>éœ€æ”¹<code>drawPDF</code>æ–¹æ³•ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">+ (<span class="keyword">void</span>)drawPDF:(<span class="built_in">NSString</span>*)fileName &#123;</div><div class="line">    <span class="built_in">UIGraphicsBeginPDFContextToFile</span>(fileName, <span class="built_in">CGRectZero</span>, <span class="literal">nil</span>);</div><div class="line">    <span class="built_in">UIGraphicsBeginPDFPageWithInfo</span>(<span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">612</span>, <span class="number">792</span>), <span class="literal">nil</span>);</div><div class="line"></div><div class="line">    [<span class="keyword">self</span> drawText:<span class="string">@"Hello world"</span> inFrame:<span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">300</span>, <span class="number">50</span>)];</div><div class="line"></div><div class="line">    [<span class="keyword">self</span> drawLabels];</div><div class="line"><span class="comment">//    [self drawText];</span></div><div class="line"></div><div class="line">    <span class="built_in">UIGraphicsEndPDFContext</span>();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿è¡Œä¸‹æ¨¡æ‹Ÿå™¨ï¼š</p>
<p align="center"><br><img src="http://img.blog.csdn.net/20150818140954252" width="336" height="206"><br><br></p>

<p>å•Šå“ˆï¼Œèƒ½è¿è¡Œå‡ºæ¥ï¼Œä½†ç»“æœä¸æ˜¯ä»¤äººæ»¡æ„ï¼Œæ–‡å­—å•¥çš„éƒ½æ˜¯åçš„ã€‚æ¥ä¸‹æ¥å°±åä¸‹å¤„ç†ï¼Œä¿®æ”¹<code>drawText</code> çš„ä»£ç ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">CGContextTranslateCTM</span>(currentContext, <span class="number">0</span>, frameRect.origin.y*<span class="number">2</span>);</div><div class="line">    <span class="built_in">CGContextScaleCTM</span>(currentContext, <span class="number">1.0</span>, <span class="number">-1.0</span>);</div><div class="line"></div><div class="line">    <span class="built_in">CTFrameDraw</span>(frameRef, currentContext);</div><div class="line"></div><div class="line">    <span class="built_in">CGContextScaleCTM</span>(currentContext, <span class="number">1.0</span>, <span class="number">-1.0</span>);</div><div class="line">    <span class="built_in">CGContextTranslateCTM</span>(currentContext, <span class="number">0</span>, (<span class="number">-1.0</span>) * frameRect.origin.y * <span class="number">2</span>);</div></pre></td></tr></table></figure>
<p>å†æ¬¡è¿è¡Œä¸‹æ¨¡æ‹Ÿå™¨ï¼Œçœ‹ä¸‹ç»“æœï¼š</p>
<p></p><p align="center"><br><img src="http://img.blog.csdn.net/20150818141350370" width="372" height="244"></p>
<p>ç»“æœæ¯”è¾ƒä»¤äººæ»¡æ„ã€‚</p>
<h3 id="æ·»åŠ logo-1"><a href="#æ·»åŠ logo-1" class="headerlink" title="æ·»åŠ logo"></a>æ·»åŠ logo</h3><p>æ‰“å¼€<code>InvoiceView.xib</code> æ·»åŠ ä¸€ä¸ª<code>UIImageView</code></p>
<p></p><p align="center"><br><img src="http://img.blog.csdn.net/20150818141834653" width="371" height="222"></p>
<p>ç„¶ååœ¨<code>PDFRenderer.m</code> ä¸­æ·»åŠ <code>drawLogo</code>æ–¹æ³•:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">+ (<span class="keyword">void</span>)drawLogo &#123;</div><div class="line">    <span class="built_in">NSArray</span> *objects = [[<span class="built_in">NSBundle</span> mainBundle] loadNibNamed:<span class="string">@"InvoiceView"</span> owner:<span class="literal">nil</span> options:<span class="literal">nil</span>];</div><div class="line">    <span class="built_in">UIView</span> *mainView = [objects lastObject];</div><div class="line">    <span class="keyword">for</span> (<span class="built_in">UIView</span> *view <span class="keyword">in</span> [mainView subviews]) &#123;</div><div class="line">        <span class="keyword">if</span> ([view isKindOfClass:[<span class="built_in">UIImageView</span> <span class="keyword">class</span>]]) &#123;</div><div class="line">            <span class="built_in">UIImage</span> *logo = [<span class="built_in">UIImage</span> imageNamed:<span class="string">@"ray-logo"</span>];</div><div class="line">            [<span class="keyword">self</span> drawImage:logo inRect:view.frame];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¤„ç†é€»è¾‘å’Œ<code>drawLabels</code> æ–¹æ³•ç±»ä¼¼ã€‚</p>
<p>æœ€ååœ¨<code>drawPDF</code> æ–¹æ³•ä¸­çš„<code>[self drawLabels]</code> è¯­å¥åè°ƒç”¨<code>[self drawLogo]</code> ã€‚æ¥çœ‹ä¸‹è¿è¡Œæ•ˆæœï¼š</p>
<p></p><p align="center"><br><img src="http://img.blog.csdn.net/20150818142209471" width="371" height="222"></p>
<h3 id="ç»˜åˆ¶ä¸€ä¸ªè¡¨æ ¼"><a href="#ç»˜åˆ¶ä¸€ä¸ªè¡¨æ ¼" class="headerlink" title="ç»˜åˆ¶ä¸€ä¸ªè¡¨æ ¼"></a>ç»˜åˆ¶ä¸€ä¸ªè¡¨æ ¼</h3><p>ç»˜åˆ¶è¡¨æ ¼ä¸èƒ½åƒä½¿ç”¨<code>InvoiceView</code> é‚£æ ·ï¼Œéœ€è¦ä¸€ç³»åˆ—çš„å˜é‡æ¥æ›¿ä»£ï¼Œä¾‹å¦‚ï¼štableçš„widthå’Œheightï¼Œrowçš„heightï¼Œcolumnçš„widthã€‚</p>
<p>ä¸‹é¢åœ¨<code>PDFRenderer.m</code> çš„<code>drawPDF</code> ä¸Šæ–¹æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">+ (<span class="keyword">void</span>)drawTableAt:(<span class="built_in">CGPoint</span>)origin</div><div class="line">      withRowHeight:(<span class="keyword">int</span>)rowHeight</div><div class="line">     andColumnWidth:(<span class="keyword">int</span>)columnWidth</div><div class="line">        andRowCount:(<span class="keyword">int</span>)numberOfRows</div><div class="line">     andColumnCount:(<span class="keyword">int</span>)numberOfColumns</div><div class="line">&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= numberOfRows; i++) &#123;</div><div class="line">        <span class="keyword">int</span> newOrigin = origin.y + (rowHeight * i);</div><div class="line"></div><div class="line">        <span class="built_in">CGPoint</span> from = <span class="built_in">CGPointMake</span>(origin.x, newOrigin);</div><div class="line">        <span class="built_in">CGPoint</span> to = <span class="built_in">CGPointMake</span>(origin.x + (numberOfColumns*columnWidth), newOrigin);</div><div class="line"></div><div class="line">        [<span class="keyword">self</span> drawLineFromPoint:from toPoint:to];</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸Šé¢æ–¹æ³•æ˜¯ç»˜åˆ¶æ°´å¹³çº¿ï¼Œå¾ªç¯éå†æ¯ä¸€è¡Œï¼Œè®¡ç®—æ¯è¡Œçš„èµ·å§‹å’Œç»“æŸä½ç½®ã€‚æœ€åè°ƒç”¨<code>drawLine:from:to</code> æ–¹æ³•ç»˜åˆ¶æ°´å¹³çº¿ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">+ (<span class="keyword">void</span>)drawPDF:(<span class="built_in">NSString</span>*)fileName &#123;</div><div class="line">    <span class="built_in">UIGraphicsBeginPDFContextToFile</span>(fileName, <span class="built_in">CGRectZero</span>, <span class="literal">nil</span>);</div><div class="line">    <span class="built_in">UIGraphicsBeginPDFPageWithInfo</span>(<span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">612</span>, <span class="number">792</span>), <span class="literal">nil</span>);</div><div class="line"></div><div class="line">    [<span class="keyword">self</span> drawText:<span class="string">@"Hello world"</span> inFrame:<span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">300</span>, <span class="number">50</span>)];</div><div class="line"></div><div class="line">    [<span class="keyword">self</span> drawLabels];</div><div class="line">    [<span class="keyword">self</span> drawLogo];</div><div class="line"></div><div class="line">    <span class="keyword">int</span> xOrigin = <span class="number">50</span>;</div><div class="line">    <span class="keyword">int</span> yOrigin = <span class="number">300</span>;</div><div class="line">    <span class="keyword">int</span> rowHeight = <span class="number">50</span>;</div><div class="line">    <span class="keyword">int</span> columnWidth = <span class="number">120</span>;</div><div class="line">    <span class="keyword">int</span> numberOfRows = <span class="number">7</span>;</div><div class="line">    <span class="keyword">int</span> numberOfColumns = <span class="number">4</span>;</div><div class="line"></div><div class="line">    [<span class="keyword">self</span> drawTableAt:<span class="built_in">CGPointMake</span>(xOrigin, yOrigin)</div><div class="line">        withRowHeight:rowHeight</div><div class="line">       andColumnWidth:columnWidth</div><div class="line">          andRowCount:numberOfRows</div><div class="line">       andColumnCount:numberOfColumns];</div><div class="line"></div><div class="line">    <span class="built_in">UIGraphicsEndPDFContext</span>();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿è¡Œæ¨¡æ‹Ÿå™¨ï¼Œçœ‹ä¸‹æ•ˆæœï¼š</p>
<p></p><p align="center"><br><img src="http://img.blog.csdn.net/20150818144256313" width="371" height="565"></p>
<p>æ¥ä¸‹æ¥æ˜¯ç»˜åˆ¶å‚ç›´çº¿æ¡ï¼Œåœ¨<code>drawTable</code> æ–¹æ³•ä¸­çš„ç¬¬ä¸€ä¸ªå¾ªç¯çš„ä¸‹æ–¹å†æ·»åŠ ä¸€ä¸ªå¾ªç¯ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">+ (<span class="keyword">void</span>)drawTableAt:(<span class="built_in">CGPoint</span>)origin</div><div class="line">      withRowHeight:(<span class="keyword">int</span>)rowHeight</div><div class="line">     andColumnWidth:(<span class="keyword">int</span>)columnWidth</div><div class="line">        andRowCount:(<span class="keyword">int</span>)numberOfRows</div><div class="line">     andColumnCount:(<span class="keyword">int</span>)numberOfColumns</div><div class="line">&#123;</div><div class="line">    <span class="comment">//ç»˜åˆ¶æ°´å¹³çº¿</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= numberOfRows; i++) &#123;</div><div class="line">        <span class="keyword">int</span> newOrigin = origin.y + (rowHeight * i);</div><div class="line"></div><div class="line">        <span class="built_in">CGPoint</span> from = <span class="built_in">CGPointMake</span>(origin.x, newOrigin);</div><div class="line">        <span class="built_in">CGPoint</span> to = <span class="built_in">CGPointMake</span>(origin.x + (numberOfColumns*columnWidth), newOrigin);</div><div class="line"></div><div class="line">        [<span class="keyword">self</span> drawLineFromPoint:from toPoint:to];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//ç»˜åˆ¶å‚ç›´çº¿</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= numberOfColumns; i++) &#123;</div><div class="line">        <span class="keyword">int</span> newOrigin = origin.x + (columnWidth * i);</div><div class="line">        <span class="built_in">CGPoint</span> from = <span class="built_in">CGPointMake</span>(newOrigin, origin.y);</div><div class="line">        <span class="built_in">CGPoint</span> to = <span class="built_in">CGPointMake</span>(newOrigin, origin.y + (numberOfRows * rowHeight));</div><div class="line"></div><div class="line">        [<span class="keyword">self</span> drawLineFromPoint:from toPoint:to];</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å†æ¬¡è¿è¡Œä¸‹æ¨¡æ‹Ÿå™¨ï¼Œçœ‹ä¸‹æ•ˆæœï¼š</p>
<p></p><p align="center"><br><img src="http://img.blog.csdn.net/20150818144927519" width="367" height="565"></p>
<p>çœ‹ç€ä¼¼ä¹å·²å®Œæˆï¼Œä½†è¿˜ç¼ºå°‘ä¸€äº›æ•°æ®å¡«å……åˆ°è¡¨æ ¼å½“ä¸­ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥å®Œæˆæ­¤è¿‡ç¨‹ï¼Œè®©æ­¤PDFè¿‘ä¹å®Œç¾ã€‚</p>
<h3 id="å¡«å……è¡¨æ ¼"><a href="#å¡«å……è¡¨æ ¼" class="headerlink" title="å¡«å……è¡¨æ ¼"></a>å¡«å……è¡¨æ ¼</h3><p>æ¨¡æ‹Ÿæ•°æ®å¡«å……è¡¨æ ¼ï¼Œåœ¨<code>PDFRenderer.m</code> ä¸­çš„<code>drawPDF</code> æ–¹æ³•çš„ä¸Šæ–¹æ·»åŠ  <code>drawTableDataAt</code> æ–¹æ³•:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">+ (<span class="keyword">void</span>)drawTableDataAt:(<span class="built_in">CGPoint</span>)origin</div><div class="line">          withRowHeight:(<span class="keyword">int</span>)rowHeight</div><div class="line">         andColumnWidth:(<span class="keyword">int</span>)columnWidth</div><div class="line">            andRowCount:(<span class="keyword">int</span>)numberOfRows</div><div class="line">         andColumnCount:(<span class="keyword">int</span>)numberOfColumns</div><div class="line">&#123;</div><div class="line">    <span class="built_in">NSArray</span> *header = @[<span class="string">@"Quantity"</span>, <span class="string">@"Description"</span>, <span class="string">@"Unit price"</span>, <span class="string">@"Total"</span>];</div><div class="line">    <span class="built_in">NSArray</span> *invoiceInfo1 = @[<span class="string">@"1"</span>, <span class="string">@"Development"</span>, <span class="string">@"$1000"</span>, <span class="string">@"1000"</span>];</div><div class="line">    <span class="built_in">NSArray</span> *invoiceInfo2 = @[<span class="string">@"1"</span>, <span class="string">@"Development"</span>, <span class="string">@"$1000"</span>, <span class="string">@"1000"</span>];</div><div class="line">    <span class="built_in">NSArray</span> *invoiceInfo3 = @[<span class="string">@"1"</span>, <span class="string">@"Development"</span>, <span class="string">@"$1000"</span>, <span class="string">@"1000"</span>];</div><div class="line">    <span class="built_in">NSArray</span> *invoiceInfo4 = @[<span class="string">@"1"</span>, <span class="string">@"Development"</span>, <span class="string">@"$1000"</span>, <span class="string">@"1000"</span>];</div><div class="line"></div><div class="line">    <span class="built_in">NSArray</span> *allInfo = @[header, invoiceInfo1, invoiceInfo2, invoiceInfo3, invoiceInfo4];</div><div class="line"></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; allInfo.count; i++) &#123;</div><div class="line">        <span class="built_in">NSArray</span> *infoToDraw = allInfo[i];</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j&lt; numberOfColumns; j++) &#123;</div><div class="line">            <span class="keyword">int</span> newOriginX = origin.x + (columnWidth * j);</div><div class="line">            <span class="keyword">int</span> newOriginY = origin.y + (rowHeight * (i+<span class="number">1</span>));</div><div class="line"></div><div class="line">            <span class="built_in">CGRect</span> frame = <span class="built_in">CGRectMake</span>(newOriginX, newOriginY, columnWidth, rowHeight);</div><div class="line">            [<span class="keyword">self</span> drawText:infoToDraw[j] inFrame:frame];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç¬¬ä¸€ä¸ªæ•°ç»„æ˜¯è¡¨å¤´æ•°æ®ï¼Œå…¶ä»–æ•°ç»„æ˜¯è¡¨ä¸­è¡Œå’Œåˆ—çš„å€¼ã€‚</p>
<p>åœ¨<code>drawPDF</code> ä¸­è°ƒç”¨<code>drawTableDataAt</code>ï¼ˆåœ¨<code>UIGraphicsEndPDFContext</code> ä¹‹å‰è°ƒç”¨ï¼‰ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[<span class="keyword">self</span> drawTableDataAt:<span class="built_in">CGPointMake</span>(xOrigin, yOrigin)</div><div class="line">            withRowHeight:rowHeight</div><div class="line">           andColumnWidth:columnWidth</div><div class="line">              andRowCount:numberOfRows</div><div class="line">           andColumnCount:numberOfColumns];</div></pre></td></tr></table></figure>
<p>è¿è¡Œæ¨¡æ‹Ÿå™¨ï¼Œå°†ä¼šçœ‹åˆ°è¡¨ä¸­å¡«å……çš„æ•°æ®:</p>
<p></p><p align="center"><br><img src="http://img.blog.csdn.net/20150818160653841" width="368" height="566"></p>
<p>æ„Ÿè§‰è¿˜å·®ç‚¹ä»€ä¹ˆï¼Œå†åšæœ€åä¸€æ¬¡è°ƒæ•´ï¼šæ·»åŠ é—´è·<code>padding</code></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">+ (<span class="keyword">void</span>)drawTableDataAt:(<span class="built_in">CGPoint</span>)origin</div><div class="line">          withRowHeight:(<span class="keyword">int</span>)rowHeight</div><div class="line">         andColumnWidth:(<span class="keyword">int</span>)columnWidth</div><div class="line">            andRowCount:(<span class="keyword">int</span>)numberOfRows</div><div class="line">         andColumnCount:(<span class="keyword">int</span>)numberOfColumns</div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> padding = <span class="number">10</span>;</div><div class="line">    <span class="built_in">NSArray</span> *header = @[<span class="string">@"Quantity"</span>, <span class="string">@"Description"</span>, <span class="string">@"Unit price"</span>, <span class="string">@"Total"</span>];</div><div class="line">    <span class="built_in">NSArray</span> *invoiceInfo1 = @[<span class="string">@"1"</span>, <span class="string">@"Development"</span>, <span class="string">@"$1000"</span>, <span class="string">@"1000"</span>];</div><div class="line">    <span class="built_in">NSArray</span> *invoiceInfo2 = @[<span class="string">@"1"</span>, <span class="string">@"Development"</span>, <span class="string">@"$1000"</span>, <span class="string">@"1000"</span>];</div><div class="line">    <span class="built_in">NSArray</span> *invoiceInfo3 = @[<span class="string">@"1"</span>, <span class="string">@"Development"</span>, <span class="string">@"$1000"</span>, <span class="string">@"1000"</span>];</div><div class="line">    <span class="built_in">NSArray</span> *invoiceInfo4 = @[<span class="string">@"1"</span>, <span class="string">@"Development"</span>, <span class="string">@"$1000"</span>, <span class="string">@"1000"</span>];</div><div class="line"></div><div class="line">    <span class="built_in">NSArray</span> *allInfo = @[header, invoiceInfo1, invoiceInfo2, invoiceInfo3, invoiceInfo4];</div><div class="line"></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; allInfo.count; i++) &#123;</div><div class="line">        <span class="built_in">NSArray</span> *infoToDraw = allInfo[i];</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j&lt; numberOfColumns; j++) &#123;</div><div class="line">            <span class="keyword">int</span> newOriginX = origin.x + (columnWidth * j);</div><div class="line">            <span class="keyword">int</span> newOriginY = origin.y + (rowHeight * (i+<span class="number">1</span>));</div><div class="line"></div><div class="line">            <span class="built_in">CGRect</span> frame = <span class="built_in">CGRectMake</span>(newOriginX+padding, newOriginY+padding, columnWidth, rowHeight);</div><div class="line">            [<span class="keyword">self</span> drawText:infoToDraw[j] inFrame:frame];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æœ€ç»ˆç»“æœï¼š</p>
<p></p><p align="center"><br><img src="http://img.blog.csdn.net/20150818161451165" width="371" height="564"></p>
<p>å¤§åŠŸå‘Šæˆï¼Œæ­¤PDFä¸»è¦å±•ç¤ºäº†å›¾ç‰‡ã€è¡¨æ ¼å’Œæ•°æ®ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨ä¸Šä¸€èŠ‚å½“ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåŸºäºQuartz2Dçš„PDFï¼Œå¹¶åœ¨PDFä¸­æ·»åŠ ä¸€çº¿æ¡ã€‚&lt;br&gt;åœ¨è¿™ä¸€èŠ‚ï¼Œä¸»è¦æ˜¯æ·»åŠ ä¸€ä¸ªlogoï¼Œå’Œç»˜åˆ¶ä¸€ä¸ªtableã€‚&lt;/p&gt;
&lt;h3 id=&quot;æ·»åŠ logo&quot;&gt;&lt;a href=&quot;#æ·»åŠ logo&quot; class=&quot;headerlink&quot; title=&quot;æ·»åŠ logo&quot;&gt;&lt;/a&gt;æ·»åŠ logo&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;http://img.blog.csdn.net/20150818132734126&quot;&gt;ä¸‹è½½å›¾ç‰‡èµ„æº&lt;/a&gt;ï¼Œç„¶åæ·»åŠ åˆ°å·¥ç¨‹å½“ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨&lt;code&gt;PDFRenderer.m&lt;/code&gt;æ–‡ä»¶ä¸­æ·»åŠ ä¸‹é¢æ–¹æ³•ï¼š&lt;/p&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://keleyundou.github.io/categories/iOS/"/>
    
    
      <category term="Tutorial" scheme="http://keleyundou.github.io/tags/Tutorial/"/>
    
      <category term="PDF" scheme="http://keleyundou.github.io/tags/PDF/"/>
    
  </entry>
  
  <entry>
    <title>iOSå¼€å‘ä¹‹Quartz2Dç”ŸæˆPDF-Part1</title>
    <link href="http://keleyundou.github.io/2015/08/17/iOS%E5%BC%80%E5%8F%91%E4%B9%8BQuartz2D%E7%94%9F%E6%88%90PDF-Part1/"/>
    <id>http://keleyundou.github.io/2015/08/17/iOSå¼€å‘ä¹‹Quartz2Dç”ŸæˆPDF-Part1/</id>
    <published>2015-08-17T12:15:25.000Z</published>
    <updated>2016-04-01T12:37:02.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ä½¿ç”¨iOSçš„Quartz2D-ç”ŸæˆPDFæ–‡ä»¶"><a href="#ä½¿ç”¨iOSçš„Quartz2D-ç”ŸæˆPDFæ–‡ä»¶" class="headerlink" title="ä½¿ç”¨iOSçš„Quartz2D ç”ŸæˆPDFæ–‡ä»¶"></a>ä½¿ç”¨iOSçš„Quartz2D ç”ŸæˆPDFæ–‡ä»¶</h3><p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªå·¥ç¨‹ï¼Œå¯¼å…¥CoreText.frameworkæ¡†æ¶ã€‚åœ¨<code>PDFViewController.h</code>æ–‡ä»¶ä¸­å¼•å…¥CoreTextæ–‡ä»¶</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#import <span class="meta-string">&lt;CoreText/CoreText.h&gt;</span></span></div></pre></td></tr></table></figure>
<a id="more"></a>
<p>åœ¨<code>PDFViewController.m</code>æ–‡ä»¶ä¸­åˆ›å»ºä¸€ä¸ªæ–°æ–¹æ³•ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line">-(<span class="keyword">void</span>)drawText</div><div class="line">&#123;</div><div class="line">    <span class="built_in">NSString</span>* fileName = <span class="string">@"Invoice.PDF"</span>;</div><div class="line"> </div><div class="line">    <span class="built_in">NSArray</span> *arrayPaths =</div><div class="line">    <span class="built_in">NSSearchPathForDirectoriesInDomains</span>(</div><div class="line">                                        <span class="built_in">NSDocumentDirectory</span>,</div><div class="line">                                        <span class="built_in">NSUserDomainMask</span>,</div><div class="line">                                        <span class="literal">YES</span>);</div><div class="line">    <span class="built_in">NSString</span> *path = [arrayPaths objectAtIndex:<span class="number">0</span>];</div><div class="line">    <span class="built_in">NSString</span>* pdfFileName = [path stringByAppendingPathComponent:fileName];</div><div class="line"> </div><div class="line">    <span class="built_in">NSString</span>* textToDraw = <span class="string">@"Hello World"</span>;</div><div class="line">    <span class="built_in">CFStringRef</span> stringRef = (__bridge <span class="built_in">CFStringRef</span>)textToDraw;</div><div class="line"> </div><div class="line">    <span class="comment">// ä½¿ç”¨ Core Text Framesetter.</span></div><div class="line">    <span class="built_in">CFAttributedStringRef</span> currentText = <span class="built_in">CFAttributedStringCreate</span>(<span class="literal">NULL</span>, stringRef, <span class="literal">NULL</span>);</div><div class="line">    <span class="built_in">CTFramesetterRef</span> framesetter = <span class="built_in">CTFramesetterCreateWithAttributedString</span>(currentText);</div><div class="line"> </div><div class="line">    <span class="built_in">CGRect</span> frameRect = <span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">300</span>, <span class="number">50</span>);</div><div class="line">    <span class="built_in">CGMutablePathRef</span> framePath = <span class="built_in">CGPathCreateMutable</span>();</div><div class="line">    <span class="built_in">CGPathAddRect</span>(framePath, <span class="literal">NULL</span>, frameRect);</div><div class="line"> </div><div class="line">    <span class="comment">// è·å–å°†è¦è¢«æ¸²æŸ“çš„å¸§</span></div><div class="line">    <span class="built_in">CFRange</span> currentRange = <span class="built_in">CFRangeMake</span>(<span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    <span class="built_in">CTFrameRef</span> frameRef = <span class="built_in">CTFramesetterCreateFrame</span>(framesetter, currentRange, framePath, <span class="literal">NULL</span>);</div><div class="line">    <span class="built_in">CGPathRelease</span>(framePath);</div><div class="line"> </div><div class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªPDFçš„ä¸Šä¸‹æ–‡ï¼Œé¡µé¢å¤§å°é»˜è®¤ä¸º 612 x 792</span></div><div class="line">    <span class="built_in">UIGraphicsBeginPDFContextToFile</span>(pdfFileName, <span class="built_in">CGRectZero</span>, <span class="literal">nil</span>);</div><div class="line"> </div><div class="line">    <span class="comment">// æ ‡è®°æ–°é¡µé¢çš„å¼€å¤´</span></div><div class="line">    <span class="built_in">UIGraphicsBeginPDFPageWithInfo</span>(<span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">612</span>, <span class="number">792</span>), <span class="literal">nil</span>);</div><div class="line"> </div><div class="line">    <span class="comment">// è·å–ä¸Šä¸‹æ–‡.</span></div><div class="line">    <span class="built_in">CGContextRef</span> currentContext = <span class="built_in">UIGraphicsGetCurrentContext</span>();</div><div class="line"> </div><div class="line">    <span class="comment">// æŠŠæ–‡å­—å˜æˆçŸ©é˜µå·²çŸ¥çŠ¶æ€ã€‚è¿™å°†ç¡®ä¿æ²¡æœ‰æ—§ç¼©æ”¾å› å­è¢«ç•™åœ¨åŸå¤„ã€‚</span></div><div class="line">    <span class="built_in">CGContextSetTextMatrix</span>(currentContext, <span class="built_in">CGAffineTransformIdentity</span>);</div><div class="line"> </div><div class="line">    <span class="comment">//æ–‡æœ¬åæ ‡ç¿»è½¬</span></div><div class="line">    <span class="built_in">CGContextTranslateCTM</span>(currentContext, <span class="number">0</span>, <span class="number">100</span>);</div><div class="line">    <span class="built_in">CGContextScaleCTM</span>(currentContext, <span class="number">1.0</span>, <span class="number">-1.0</span>);</div><div class="line"> </div><div class="line">    <span class="comment">// ç»˜åˆ¶å¸§</span></div><div class="line">    <span class="built_in">CTFrameDraw</span>(frameRef, currentContext);</div><div class="line"> </div><div class="line">    <span class="built_in">CFRelease</span>(frameRef);</div><div class="line">    <span class="built_in">CFRelease</span>(stringRef);</div><div class="line">    <span class="built_in">CFRelease</span>(framesetter);</div><div class="line"> </div><div class="line">	<span class="comment">//å…³é—­PDFä¸Šä¸‹æ–‡</span></div><div class="line">    <span class="built_in">UIGraphicsEndPDFContext</span>();</div><div class="line"> </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ­¤æ–¹æ³•æœ‰ç‚¹é•¿ï¼Œåœ¨æ­¤åˆ†æ®µè§£é‡Šä¸‹ï¼š</p>
<p>åœ¨æ²™ç›’ç›®å½•ä¸‹åˆ›å»ºPDFæ–‡ä»¶ï¼Œå¹¶å‘½åä¸º<code>Invoice.pdf</code></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSString</span>* fileName = <span class="string">@"Invoice.PDF"</span>;</div><div class="line"> </div><div class="line"><span class="built_in">NSArray</span> *arrayPaths =</div><div class="line"><span class="built_in">NSSearchPathForDirectoriesInDomains</span>(</div><div class="line">                                    <span class="built_in">NSDocumentDirectory</span>,</div><div class="line">                                    <span class="built_in">NSUserDomainMask</span>,</div><div class="line">                                    <span class="literal">YES</span>);</div><div class="line"><span class="built_in">NSString</span> *path = [arrayPaths objectAtIndex:<span class="number">0</span>];</div><div class="line"><span class="built_in">NSString</span>* pdfFileName = [path stringByAppendingPathComponent:fileName];</div></pre></td></tr></table></figure>
<p>ä¸‹é¢çš„ä»£ç å—æ˜¯åˆ›å»ºä¸€ä¸ªå·²â€œHelloï¼Œworldâ€ä¸ºå†…å®¹çš„PDFï¼Œå°†stringè½¬æ¢ä¸ºCFStringRefæ ¼å¼</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSString</span>* textToDraw = <span class="string">@"Hello World"</span>;</div><div class="line"><span class="built_in">CFStringRef</span> stringRef = (__bridge <span class="built_in">CFStringRef</span>)textToDraw;</div><div class="line"> </div><div class="line"><span class="built_in">CFAttributedStringRef</span> currentText = <span class="built_in">CFAttributedStringCreate</span>(<span class="literal">NULL</span>, stringRef, <span class="literal">NULL</span>);</div><div class="line"><span class="built_in">CTFramesetterRef</span> framesetter = <span class="built_in">CTFramesetterCreateWithAttributedString</span>(currentText);</div></pre></td></tr></table></figure>
<p>ç„¶åæ˜¯åˆ›å»ºä¸€ä¸ªCGRectç”¨äºå®šä¹‰æ–‡æœ¬çš„å¤§å°</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">CGRect</span> frameRect = <span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">300</span>, <span class="number">50</span>);</div><div class="line"><span class="built_in">CGMutablePathRef</span> framePath = <span class="built_in">CGPathCreateMutable</span>();</div><div class="line"><span class="built_in">CGPathAddRect</span>(framePath, <span class="literal">NULL</span>, frameRect);</div><div class="line"> </div><div class="line"><span class="built_in">CFRange</span> currentRange = <span class="built_in">CFRangeMake</span>(<span class="number">0</span>, <span class="number">0</span>);</div><div class="line"><span class="built_in">CTFrameRef</span> frameRef = <span class="built_in">CTFramesetterCreateFrame</span>(framesetter, currentRange, framePath, <span class="literal">NULL</span>);</div><div class="line"><span class="built_in">CGPathRelease</span>(framePath);</div></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªPDFä¸Šä¸‹æ–‡å’Œæ ‡è®°çš„PDFçš„èµ·å§‹é¡µã€‚ PDFçš„æ¯ä¸ªé¡µé¢éƒ½æœ‰å¼€å§‹å¹¶è°ƒç”¨UIGraphicsBeginPDFPageWithInfo ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">UIGraphicsBeginPDFContextToFile</span>(pdfFileName, <span class="built_in">CGRectZero</span>, <span class="literal">nil</span>);</div><div class="line"> </div><div class="line"><span class="built_in">UIGraphicsBeginPDFPageWithInfo</span>(<span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">612</span>, <span class="number">792</span>), <span class="literal">nil</span>);</div><div class="line"> </div><div class="line"><span class="built_in">CGContextRef</span> currentContext = <span class="built_in">UIGraphicsGetCurrentContext</span>();</div></pre></td></tr></table></figure>
<p>ç”±äºCore Graphics çš„åæ ‡æ˜¯ä»å·¦ä¸‹è§’å¼€å§‹ï¼Œè€ŒUIKitçš„åæ ‡æ˜¯ä»å·¦ä¸Šè§’å¼€å§‹ï¼Œæ‰€ä»¥éœ€åšä¸€ä¸ªå˜æ¢ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">CGContextSetTextMatrix</span>(currentContext, <span class="built_in">CGAffineTransformIdentity</span>);</div><div class="line"> </div><div class="line"><span class="built_in">CGContextTranslateCTM</span>(currentContext, <span class="number">0</span>, <span class="number">100</span>);</div><div class="line"><span class="built_in">CGContextScaleCTM</span>(currentContext, <span class="number">1.0</span>, <span class="number">-1.0</span>);</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ç»˜åˆ¶æ–‡æœ¬å®é™…å¸§ï¼Œé‡Šæ”¾Core Graphicså¯¹è±¡ï¼Œå¹¶å…³é—­PDFä¸Šä¸‹æ–‡è‡³æ­¤PDFå†™å…¥åˆ°æ²™ç›’ç›®å½•ä¸‹ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">CTFrameDraw</span>(frameRef, currentContext);</div><div class="line"> </div><div class="line"><span class="built_in">CFRelease</span>(frameRef);</div><div class="line"><span class="built_in">CFRelease</span>(stringRef);</div><div class="line"><span class="built_in">CFRelease</span>(framesetter);</div><div class="line"> </div><div class="line"><span class="built_in">UIGraphicsEndPDFContext</span>();</div></pre></td></tr></table></figure>
<h3 id="ä½¿ç”¨UIWebViewå±•ç¤ºPDFæ–‡ä»¶"><a href="#ä½¿ç”¨UIWebViewå±•ç¤ºPDFæ–‡ä»¶" class="headerlink" title="ä½¿ç”¨UIWebViewå±•ç¤ºPDFæ–‡ä»¶"></a>ä½¿ç”¨UIWebViewå±•ç¤ºPDFæ–‡ä»¶</h3><p>åœ¨<code>PDFViewController.m</code>ä¸­çš„<code>drawText</code>æ–¹æ³•åæ·»åŠ ä¸‹é¢æ–¹æ³•ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">-(<span class="keyword">void</span>)showPDFFile</div><div class="line">&#123;</div><div class="line">    <span class="built_in">NSString</span>* fileName = <span class="string">@"Invoice.PDF"</span>;</div><div class="line"> </div><div class="line">    <span class="built_in">NSArray</span> *arrayPaths =</div><div class="line">    <span class="built_in">NSSearchPathForDirectoriesInDomains</span>(</div><div class="line">                                        <span class="built_in">NSDocumentDirectory</span>,</div><div class="line">                                        <span class="built_in">NSUserDomainMask</span>,</div><div class="line">                                        <span class="literal">YES</span>);</div><div class="line">    <span class="built_in">NSString</span> *path = [arrayPaths objectAtIndex:<span class="number">0</span>];</div><div class="line">    <span class="built_in">NSString</span>* pdfFileName = [path stringByAppendingPathComponent:fileName];</div><div class="line"> </div><div class="line">    <span class="built_in">UIWebView</span>* webView = [[<span class="built_in">UIWebView</span> alloc] initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">320</span>, <span class="number">480</span>)];</div><div class="line"> </div><div class="line">    <span class="built_in">NSURL</span> *url = [<span class="built_in">NSURL</span> fileURLWithPath:pdfFileName];</div><div class="line">    <span class="built_in">NSURLRequest</span> *request = [<span class="built_in">NSURLRequest</span> requestWithURL:url];</div><div class="line">    [webView setScalesPageToFit:<span class="literal">YES</span>];</div><div class="line">    [webView loadRequest:request];</div><div class="line"> </div><div class="line">    [<span class="keyword">self</span>.view addSubview:webView];    </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨<code>viewDidLoad</code>ä¸­æ·»åŠ </p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)viewDidLoad</div><div class="line">&#123;</div><div class="line">    [<span class="keyword">self</span> drawText];</div><div class="line">    [<span class="keyword">self</span> showPDFFile];</div><div class="line"> </div><div class="line">    [<span class="keyword">super</span> viewDidLoad];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;ä½¿ç”¨iOSçš„Quartz2D-ç”ŸæˆPDFæ–‡ä»¶&quot;&gt;&lt;a href=&quot;#ä½¿ç”¨iOSçš„Quartz2D-ç”ŸæˆPDFæ–‡ä»¶&quot; class=&quot;headerlink&quot; title=&quot;ä½¿ç”¨iOSçš„Quartz2D ç”ŸæˆPDFæ–‡ä»¶&quot;&gt;&lt;/a&gt;ä½¿ç”¨iOSçš„Quartz2D ç”ŸæˆPDFæ–‡ä»¶&lt;/h3&gt;&lt;p&gt;é¦–å…ˆåˆ›å»ºä¸€ä¸ªå·¥ç¨‹ï¼Œå¯¼å…¥CoreText.frameworkæ¡†æ¶ã€‚åœ¨&lt;code&gt;PDFViewController.h&lt;/code&gt;æ–‡ä»¶ä¸­å¼•å…¥CoreTextæ–‡ä»¶&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#import &lt;span class=&quot;meta-string&quot;&gt;&amp;lt;CoreText/CoreText.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://keleyundou.github.io/categories/iOS/"/>
    
    
      <category term="Tutorial" scheme="http://keleyundou.github.io/tags/Tutorial/"/>
    
      <category term="PDF" scheme="http://keleyundou.github.io/tags/PDF/"/>
    
  </entry>
  
  <entry>
    <title>assignã€copyã€retainç­‰å…³é”®å­—çš„å«ä¹‰</title>
    <link href="http://keleyundou.github.io/2015/04/21/2015-04-21-assign,-copy,-retaindeng-guan-jian-zi-de-han-yi/"/>
    <id>http://keleyundou.github.io/2015/04/21/2015-04-21-assign,-copy,-retaindeng-guan-jian-zi-de-han-yi/</id>
    <published>2015-04-21T06:06:31.000Z</published>
    <updated>2016-03-26T06:40:27.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>assign:ç®€å•èµ‹å€¼ï¼Œä¸æ›´æ”¹ç´¢å¼•è®¡æ•°</p>
<p>copy:å»ºç«‹ä¸€ä¸ªç´¢å¼•è®¡æ•°ä¸º1çš„å¯¹è±¡ï¼Œç„¶åé‡Šæ”¾æ—§å¯¹è±¡</p>
<p>retain:é‡Šæ”¾å°±å¯¹è±¡ï¼Œå°†æ—§å¯¹è±¡çš„å€¼èµ‹äºˆè¾“å…¥å¯¹è±¡ï¼Œå†å°†è¾“å…¥å¯¹è±¡çš„ç´¢å¼•è®¡æ•°åŠ 1</p>
<p>copy å…¶å®å°±æ˜¯å»ºç«‹äº†ä¸€ä¸ªç›¸åŒçš„å¯¹è±¡ï¼Œè€Œretainä¸æ˜¯ï¼š</p>
<p>æ¯”å¦‚ï¼Œä¸€ä¸ªNSStringå¯¹è±¡ï¼Œåœ°å€ä¸º0x1111ï¼Œå†…å®¹ä¸º@â€Helloï¼Œworldï¼â€ï¼›copyåˆ°å¦ä¸€ä¸ªNSStringå¯¹è±¡ä¹‹åï¼Œåœ°å€ä¸º0x2222ï¼Œå†…å®¹ç›¸åŒï¼Œæ–°çš„å¯¹è±¡retainä¸º1ï¼Œæ—§çš„å¯¹è±¡ç´¢å¼•è®¡æ•°æ²¡ç”¨å˜åŒ–ã€‚</p>
<p>retainåˆ°å¦ä¸€ä¸ªNSStringå¯¹è±¡ä¹‹åï¼Œåœ°å€ç›¸åŒï¼ˆå»ºç«‹ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡é’ˆæ‹·è´ï¼‰ï¼Œå†…å®¹ç›¸åŒï¼Œè¿™ä¸ªå¯¹è±¡çš„retainå€¼+1</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œretainæ˜¯æŒ‡é’ˆæ‹·è´ï¼Œè€Œcopyæ˜¯å†…å®¹æ‹·è´ã€‚æ‹·è´ä¹‹å‰éƒ½ä¼šå°†æ—§çš„å¯¹è±¡ç»™é‡Šæ”¾æ‰ã€‚<br><a id="more"></a></p>
<h3 id="ä½¿ç”¨èŒƒå›´ï¼š"><a href="#ä½¿ç”¨èŒƒå›´ï¼š" class="headerlink" title="ä½¿ç”¨èŒƒå›´ï¼š"></a>ä½¿ç”¨èŒƒå›´ï¼š</h3><p>*assignçš„ä½¿ç”¨ï¼šä¸€èˆ¬å¯¹åº”äºåŸºç¡€æ•°æ®ç±»å‹ï¼ˆNSIntegerï¼‰å’ŒCæ•°æ®ç±»å‹ï¼ˆint, float, double, char ç­‰ï¼‰</p>
<p>*copyçš„ä½¿ç”¨ï¼šä¸€èˆ¬å¯¹åº”äºNSString</p>
<p>*retainçš„ä½¿ç”¨ï¼šä¸€èˆ¬å¯¹åº”äºNSObjectå’Œå…¶ä»–å­ç±»</p>
<p>1.readonlyï¼šè¡¨ç¤ºè¿™ä¸ªå±æ€§æ˜¯åªè¯»çš„ï¼Œå°±æ˜¯åªç”Ÿæˆgetteræ–¹æ³•ä¸ä¼šç”Ÿæˆsetteræ–¹æ³•ï¼›</p>
<p>2.readwriteï¼šè®¾ç½®å¯ä¾›è®¿é—®çº§åˆ«ï¼›</p>
<p>3.retainï¼šæ—¨åœ¨è¯´æ˜è¯¥å±æ€§åœ¨èµ‹å€¼çš„æ—¶å€™ï¼Œå…ˆreleaseæ‰ä¹‹å‰çš„å€¼ï¼Œç„¶åå†èµ‹æ–°å€¼ç»™å±æ€§ï¼Œå¼•ç”¨è®¡æ•°å†+1ï¼›</p>
<p>4.nonatomicï¼šéåŸå­æ€§è®¿é—®ï¼Œä¸åŠ åŒæ­¥ï¼Œå¤šçº¿ç¨‹å¹¶å‘è®¿é—®ä¼šæé«˜æ€§èƒ½ã€‚æ³¨æ„ï¼šå¦‚æœä¸åŠ æ­¤å±æ€§ï¼Œåˆ™é»˜è®¤æ˜¯ä¸¤ä¸ªè®¿é—®æ–¹æ³•éƒ½ä¸ºåŸå­å‹äº‹åŠ¡è®¿é—®ã€‚</p>
<h3 id="åŒºåˆ«"><a href="#åŒºåˆ«" class="headerlink" title="åŒºåˆ«"></a>åŒºåˆ«</h3><p>1.å‡è®¾ç”¨mallocåˆ†é…äº†ä¸€ä¸ªå—å†…å­˜ï¼Œå¹¶æŠŠå®ƒçš„åœ°å€èµ‹å€¼ç»™äº†æŒ‡é’ˆaï¼Œç„¶åä½ å¸Œæœ›æŒ‡é’ˆbä¹Ÿå…±äº«è¿™å—å†…å­˜ï¼Œäºæ˜¯ä½ åˆæŠŠaèµ‹å€¼ç»™ï¼ˆassignï¼‰äº†bã€‚è‡³æ­¤aå’Œbå°±æŒ‡å‘äº†åŒä¸€å—å†…å­˜ï¼Œè¯·é—®å½“aä¸å†éœ€è¦è¿™å—å†…å­˜æ˜¯ï¼Œèƒ½å¦ç›´æ¥é‡Šæ”¾æ‰ï¼Ÿç­”æ¡ˆä¸ºNoï¼æ˜¯çš„ï¼Œå› ä¸ºaå¹¶ä¸çŸ¥é“bæ˜¯å¦è¿˜åœ¨ä½¿ç”¨è¿™å—å†…å­˜ï¼Œå¦‚æœaé‡Šæ”¾äº†ï¼Œé‚£ä¹ˆbåœ¨ä½¿ç”¨è¿™å—å†…å­˜çš„æ—¶å€™ä¼šå¼•èµ·ç¨‹åºcrashã€‚</p>
<p>2.äº†è§£åˆ°1ä¸­assignçš„é—®é¢˜åï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œè¯¥å¦‚ä½•è§£å†³å‘¢ï¼Ÿæœ€ç®€å•çš„ä¸€ä¸ªæ–¹æ³•å°±æ˜¯ï¼šä½¿ç”¨å¼•ç”¨è®¡æ•°ã€‚è¿˜æ˜¯ä¸Šé¢é‚£ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬ç»™é‚£å—å†…å­˜è®¾ä¸€ä¸ªå†…å­˜å¼•ç”¨è®¡æ•°ï¼Œå½“å†…å­˜è¢«åˆ†é…å¹¶ä¸”èµ‹å€¼ç»™aæ—¶ï¼Œå¼•ç”¨è®¡æ•°æ˜¯1ã€‚å½“aèµ‹å€¼ç»™bæ—¶ï¼Œå¼•ç”¨è®¡æ•°å¢åŠ åˆ°2ï¼Œè¿™æ—¶å¦‚æœaä¸å†ä½¿ç”¨è¿™å—å†…å­˜ï¼Œå®ƒåªéœ€æŠŠå¼•ç”¨è®¡æ•°å‡1ï¼Œè¡¨æ˜è‡ªå·±ä¸å†æ‹¥æœ‰è¿™å—å†…å­˜ï¼Œbä¸å†ä½¿ç”¨è¿™å—å†…å­˜æ—¶ä¹ŸæŠŠå¼•ç”¨è®¡æ•°å‡1ï¼Œå½“å¼•ç”¨è®¡æ•°å˜ä¸º0æ—¶ï¼Œä»£è¡¨è¯¥å†…å­˜ä¸å†è¢«ä»»ä½•æŒ‡é’ˆæ‰€å¼•ç”¨ï¼Œç³»ç»Ÿå¯ä»¥æŠŠå®ƒç›´æ¥é‡Šæ”¾æ‰ã€‚</p>
<p>3.ä¸Šé¢ä¸¤ç‚¹å…¶å®å°±æ˜¯assignå’Œretainçš„åŒºåˆ«ï¼Œassignå°±æ˜¯ç›´æ¥èµ‹å€¼ï¼Œä»è€Œä¼šå¼•èµ·1ä¸­çš„é—®é¢˜ã€‚å½“æ•°æ®ä¸ºint, float,ç­‰åŸç”Ÿç±»å‹æ—¶ï¼Œå¯ä»¥ä½¿ç”¨assignã€‚retainå°±å¦‚2ä¸­æ‰€è¿°ï¼Œä½¿ç”¨äº†å¼•ç”¨è®¡æ•°ï¼Œretainå¼•èµ·å¼•ç”¨è®¡æ•°+1ï¼Œreleaseå¼•èµ·å¼•ç”¨è®¡æ•°-1ï¼Œå½“å¼•ç”¨è®¡æ•°ä¸º0æ—¶ï¼Œdeallocå‡½æ•°å°†ä¼šè¢«è°ƒç”¨ï¼Œå†…å­˜è¢«å›æ”¶ã€‚</p>
<p>4.copyæ˜¯åœ¨ä½ ä¸å¸Œæœ›aå’Œbå…±äº«åŒä¸€å—å†…å­˜æ˜¯ä½¿ç”¨åˆ°ã€‚aå’Œbå„è‡ªæœ‰å„è‡ªçš„å†…å­˜ã€‚</p>
<p>5.atomic å’Œ nonatomicç”¨æ¥å†³å®šç¼–è¯‘å™¨ç”Ÿæˆçš„getterå’Œsetteræ˜¯å¦ä¸ºåŸå­æ“ä½œã€‚åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼ŒåŸå­æ“ä½œæ˜¯å¿…è¦çš„ï¼Œå¦åˆ™æœ‰å¯èƒ½å¼•èµ·é”™è¯¯çš„ç»“æœã€‚åŠ äº†atomicå, setterå‡½æ•°ä¼šå˜æˆè¿™æ ·ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (property != newValue) &#123;</div><div class="line">	[property release];</div><div class="line">	property = [newValue <span class="keyword">retain</span>];</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      assignã€copyã€retainç­‰å…³é”®å­—çš„å«ä¹‰
    
    </summary>
    
      <category term="iOS" scheme="http://keleyundou.github.io/categories/iOS/"/>
    
    
  </entry>
  
  <entry>
    <title>å¤šå°ç”µè„‘å†™åšå®¢ä¹‹åšå®¢å…‹éš†</title>
    <link href="http://keleyundou.github.io/2015/04/01/2015-04-01-duo-tai-dian-nao-xie-bo-ke-zhi-bo-ke-ke-long/"/>
    <id>http://keleyundou.github.io/2015/04/01/2015-04-01-duo-tai-dian-nao-xie-bo-ke-zhi-bo-ke-ke-long/</id>
    <published>2015-04-01T10:23:10.000Z</published>
    <updated>2016-03-26T04:31:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="åˆ›å»ºä¸€ä¸ªæœ¬åœ°çš„Octopressä»“åº“"><a href="#åˆ›å»ºä¸€ä¸ªæœ¬åœ°çš„Octopressä»“åº“" class="headerlink" title="åˆ›å»ºä¸€ä¸ªæœ¬åœ°çš„Octopressä»“åº“"></a>åˆ›å»ºä¸€ä¸ªæœ¬åœ°çš„Octopressä»“åº“</h2><p>é‡æ–°åˆ›å»ºä¸€ä¸ªæœ¬åœ°çš„Octopressä»“åº“åªéœ€æ‰§è¡Œä»¥ä¸‹å‡ æ­¥éª¤å³å¯ã€‚</p>
<h3 id="æ‹‰å–Octopressä»“åº“å†…å®¹"><a href="#æ‹‰å–Octopressä»“åº“å†…å®¹" class="headerlink" title="æ‹‰å–Octopressä»“åº“å†…å®¹"></a>æ‹‰å–Octopressä»“åº“å†…å®¹</h3><p>é¦–å…ˆå…‹éš†è‡ªå·±çš„Octopressä»“åº“ï¼Œåˆå§‹åŒ–gitä»“åº“ï¼Œæ·»åŠ è¿œç¨‹ä»“åº“ï¼Œä¹Ÿå°±æ˜¯ä½ è‡ªå·±çš„Octopressåœ°å€ï¼Œpullåˆ°è¿œç¨‹ä»“åº“ã€‚åœ¨ç»ˆç«¯æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">mkdir Octopress</div><div class="line">cd Octopress</div><div class="line">git init</div><div class="line">git remote add origin git@github.com:username/username.github.com.git</div><div class="line">git pull origin</div></pre></td></tr></table></figure>
<a id="more"></a>
<h3 id="åˆ‡æ¢åˆ°sourceåˆ†æ”¯"><a href="#åˆ‡æ¢åˆ°sourceåˆ†æ”¯" class="headerlink" title="åˆ‡æ¢åˆ°sourceåˆ†æ”¯"></a>åˆ‡æ¢åˆ°sourceåˆ†æ”¯</h3><p>è¿™æ—¶å€™è¿›å…¥Octopressç›®å½•ï¼Œå‘ç°é™¤äº†åˆå§‹åŒ–ç”Ÿæˆçš„.gitç›®å½•å¤–ä»€ä¹ˆéƒ½æ²¡æœ‰ã€‚æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤åsourceåˆ†æ”¯çš„ä¸œè¥¿å°±éƒ½å‡ºæ¥çš„äº†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git checkout source</div></pre></td></tr></table></figure>
<h3 id="å»ºç«‹github-pages"><a href="#å»ºç«‹github-pages" class="headerlink" title="å»ºç«‹github pages"></a>å»ºç«‹github pages</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rake setup_github_pages</div></pre></td></tr></table></figure>
<h3 id="æ‹‰å–masteråˆ†æ”¯"><a href="#æ‹‰å–masteråˆ†æ”¯" class="headerlink" title="æ‹‰å–masteråˆ†æ”¯"></a>æ‹‰å–masteråˆ†æ”¯</h3><p>è¿›å…¥_deployç›®å½•ï¼Œè¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git pull origin master</div></pre></td></tr></table></figure>
<h3 id="åˆ‡æ¢å›sourceåˆ†æ”¯"><a href="#åˆ‡æ¢å›sourceåˆ†æ”¯" class="headerlink" title="åˆ‡æ¢å›sourceåˆ†æ”¯"></a>åˆ‡æ¢å›sourceåˆ†æ”¯</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git checkout source</div></pre></td></tr></table></figure>
<p>è‡³æ­¤ï¼ŒOctopresså°±åœ¨å¦ä¸€å°ç”µè„‘ä¸Šå…‹éš†å¥½äº†ï¼Œä½ å°±å¯ä»¥åœ¨ä¸åŒçš„ç”µè„‘ä¸Šç»´æŠ¤åŒä¸€ä¸ªåšå®¢äº†ï¼Œè¿è¡Œä¸€ä¸‹å¦‚ä¸‹å‘½ä»¤ï¼Œç¡®è®¤æ²¡æœ‰é—®é¢˜ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">rake generate</div><div class="line">rake preview</div><div class="line">rake deploy</div></pre></td></tr></table></figure>
<h3 id="æ›´æ–°å’Œæ¨é€"><a href="#æ›´æ–°å’Œæ¨é€" class="headerlink" title="æ›´æ–°å’Œæ¨é€"></a>æ›´æ–°å’Œæ¨é€</h3><p>å½“ä½ è¦åœ¨ä¸€å°ç”µè„‘ä¸Šå†™åšå®¢æˆ–æ›´æ”¹æ—¶ï¼Œé¦–å…ˆæ›´æ–°sourceä»“åº“ã€‚æ›´æ–°masterå¹¶ä¸æ˜¯å¿…é¡»çš„ï¼Œå› ä¸ºä½ æ›´æ”¹æºæ–‡ä»¶ä¹‹åè¿˜æ˜¯éœ€è¦rake generateçš„ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">cd Octopress</div><div class="line">git pull origin source</div><div class="line">cd _deploy</div><div class="line">git pull origin master</div></pre></td></tr></table></figure>
<p>å†™å®Œåšå®¢ä¹‹åä¸è¦å¿˜äº†æ¨é€åˆ°remoteï¼Œä¸‹é¢çš„å‘½ä»¤åœ¨æ¯æ¬¡å¤„ç†å®Œåšå®¢äº‹åŠ¡åè®°å¾—è¦è¿è¡Œã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">rake generate</div><div class="line">git add .</div><div class="line">git commit â€“m &quot;commit message&quot;</div><div class="line">git push origin source</div><div class="line">rake deploy</div></pre></td></tr></table></figure>
<h3 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h3><p>å½“ä½ æ¢äº†ä¸€å°æ–°ç”µè„‘ä¹‹åï¼Œéœ€è¦é‡æ–°ç­¾åï¼Œç­¾åè¯·å‚è€ƒ<a href="http://https://help.github.com/articles/generating-ssh-keys/" target="_blank" rel="external">generating-ssh-keys</a></p>
]]></content>
    
    <summary type="html">
    
      å¤šå°ç”µè„‘å†™åšå®¢ä¹‹åšå®¢å…‹éš†
    
    </summary>
    
      <category term="çç¢æ‚è®°" scheme="http://keleyundou.github.io/categories/%E7%90%90%E7%A2%8E%E6%9D%82%E8%AE%B0/"/>
    
    
  </entry>
  
</feed>
